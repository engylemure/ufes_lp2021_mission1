/*! For license information please see app.e5682d3e8727754fc93d.js.LICENSE.txt */
(()=>{var t,e,n={228:t=>{t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i},t.exports.default=t.exports,t.exports.__esModule=!0},858:t=>{t.exports=function(t){if(Array.isArray(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0},575:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},913:t=>{function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t},t.exports.default=t.exports,t.exports.__esModule=!0},884:t=>{t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,s=[],o=!0,a=!1;try{for(n=n.call(t);!(o=(i=n.next()).done)&&(s.push(i.value),!e||s.length!==e);o=!0);}catch(t){a=!0,r=t}finally{try{o||null==n.return||n.return()}finally{if(a)throw r}}return s}},t.exports.default=t.exports,t.exports.__esModule=!0},521:t=>{t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},38:(t,e,n)=>{var i=n(858),r=n(884),s=n(379),o=n(521);t.exports=function(t,e){return i(t)||r(t,e)||s(t,e)||o()},t.exports.default=t.exports,t.exports.__esModule=!0},379:(t,e,n)=>{var i=n(228);t.exports=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},973:t=>{"use strict";var e=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,s=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw s}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=Object,o=["black","red","green","yellow","blue","magenta","cyan","lightGray","","default"],a=["darkGray","lightRed","lightGreen","lightYellow","lightBlue","lightMagenta","lightCyan","white",""],c=["","bright","dim","italic","underline","","","inverse"],u={red:"lightRed",green:"lightGreen",yellow:"lightYellow",blue:"lightBlue",magenta:"lightMagenta",cyan:"lightCyan",black:"darkGray",lightGray:"white"},l={0:"style",2:"unstyle",3:"color",9:"colorLight",4:"bgColor",10:"bgColorLight"},h={color:o,colorLight:a,bgColor:o,bgColorLight:a,style:c,unstyle:c},p=function(t){for(var e in t)t[e]||delete t[e];return 0===s.keys(t).length?void 0:t},d=function(){function t(e,n,i){r(this,t),this.background=e,this.name=n,this.brightness=i}return n(t,[{key:"defaultBrightness",value:function(e){return new t(this.background,this.name,this.brightness||e)}},{key:"css",value:function(t){var e=t?this.inverse:this,n=e.brightness===f.bright&&u[e.name]||e.name,r=e.background?"background:":"color:",s=v.rgb[n],o=this.brightness===f.dim?.5:1;return s?r+"rgba("+[].concat(i(s),[o]).join(",")+");":!e.background&&o<1?"color:rgba(0,0,0,0.5);":""}},{key:"inverse",get:function(){return new t(!this.background,this.name||(this.background?"black":"white"),this.brightness)}},{key:"clean",get:function(){return p({name:"default"===this.name?"":this.name,bright:this.brightness===f.bright,dim:this.brightness===f.dim})}}]),t}(),f=function(){function t(e){r(this,t),void 0!==e&&(this.value=Number(e))}return n(t,[{key:"type",get:function(){return l[Math.floor(this.value/10)]}},{key:"subtype",get:function(){return h[this.type][this.value%10]}},{key:"str",get:function(){return this.value?"["+this.value+"m":""}},{key:"isBrightness",get:function(){return this.value===t.noBrightness||this.value===t.bright||this.value===t.dim}}],[{key:"str",value:function(e){return new t(e).str}}]),t}();s.assign(f,{reset:0,bright:1,dim:2,inverse:7,noBrightness:22,noItalic:23,noUnderline:24,noInverse:27,noColor:39,noBgColor:49});var m=function(t,e,n){var i=f.str(e),r=f.str(n);return String(t).split("\n").map((function(t){return(i+(e=t.replace(/\u001b\[22m(\u001b\[(1|2)m)/g,"$1"),n=r,s=i,e.split(n).join(s))+r).replace(/(\u001b\[(1|2)m)/g,"[22m$1");var e,n,s})).join("\n")},g=function(t,e){return t+e.charAt(0).toUpperCase()+e.slice(1)},_=[].concat(i(o.map((function(t,e){return t?[[t,30+e,f.noColor],[g("bg",t),40+e,f.noBgColor]]:[]}))),i(a.map((function(t,e){return t?[[t,90+e,f.noColor],[g("bg",t),100+e,f.noBgColor]]:[]}))),i(["","BrightRed","BrightGreen","BrightYellow","BrightBlue","BrightMagenta","BrightCyan"].map((function(t,e){return t?[["bg"+t,100+e,f.noBgColor]]:[]}))),i(c.map((function(t,e){return t?[[t,e,"bright"===t||"dim"===t?f.noBrightness:20+e]]:[]})))).reduce((function(t,e){return t.concat(e)})),v=function(){function t(e){r(this,t),this.spans=e?function(t){for(var e=0,n="",i="",r="",s=[],o=[],a=0,c=t.length;a<c;a++){var u=t[a];switch(n+=u,e){case 0:""===u?(e=1,n=u):i+=u;break;case 1:"["===u?(e=2,r="",s=[]):(e=0,i+=n);break;case 2:if(u>="0"&&u<="9")r+=u;else if(";"===u)s.push(new f(r)),r="";else if("m"===u){r=r||"0",s.push(new f(r));var l=!0,h=!1,p=void 0;try{for(var d,m=s[Symbol.iterator]();!(l=(d=m.next()).done);l=!0){var g=d.value;o.push({text:i,code:g}),i=""}}catch(t){h=!0,p=t}finally{try{!l&&m.return&&m.return()}finally{if(h)throw p}}e=0}else e=0,i+=n}}return 0!==e&&(i+=n),i&&o.push({text:i,code:new f}),o}(e):[]}return n(t,[{key:Symbol.iterator,value:function(){return this.spans[Symbol.iterator]()}},{key:"str",get:function(){return this.spans.reduce((function(t,e){return t+e.text+e.code.str}),"")}},{key:"parsed",get:function(){var e=void 0,n=void 0,i=void 0,r=void 0;function o(){e=new d,n=new d(!0),i=void 0,r=new Set}return o(),s.assign(new t,{spans:this.spans.map((function(t){var a=t.code,c=r.has("inverse"),u=r.has("underline")?"text-decoration: underline;":"",l=r.has("italic")?"font-style: italic;":"",h=i===f.bright?"font-weight: bold;":"",m=e.defaultBrightness(i),g=s.assign({css:h+l+u+m.css(c)+n.css(c)},p({bold:!!h,color:m.clean,bgColor:n.clean}),t),_=!0,v=!1,y=void 0;try{for(var w,b=r[Symbol.iterator]();!(_=(w=b.next()).done);_=!0)g[w.value]=!0}catch(t){v=!0,y=t}finally{try{!_&&b.return&&b.return()}finally{if(v)throw y}}if(a.isBrightness)i=a.value;else if(void 0!==t.code.value)if(t.code.value===f.reset)o();else switch(t.code.type){case"color":case"colorLight":e=new d(!1,a.subtype);break;case"bgColor":case"bgColorLight":n=new d(!0,a.subtype);break;case"style":r.add(a.subtype);break;case"unstyle":r.delete(a.subtype)}return g})).filter((function(t){return t.text.length>0}))})}},{key:"asChromeConsoleLogArguments",get:function(){var t=this.parsed.spans;return[t.map((function(t){return"%c"+t.text})).join("")].concat(i(t.map((function(t){return t.css}))))}},{key:"browserConsoleArguments",get:function(){return this.asChromeConsoleLogArguments}}],[{key:"parse",value:function(e){return new t(e).parsed}},{key:"strip",value:function(t){return t.replace(/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-PRZcf-nqry=><]/g,"")}},{key:"nice",get:function(){return t.names.forEach((function(e){e in String.prototype||s.defineProperty(String.prototype,e,{get:function(){return t[e](this)}})})),t}},{key:"ansicolor",get:function(){return t}}]),t}();!function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;return _.reduce((function(n,r){var o=e(r,3),a=o[0],c=o[1],u=o[2];return s.defineProperty(n,a,{get:function(){return t((function(t){return i(m(t,c,u))}))}})}),n)}(v,(function(t){return t})),v.names=_.map((function(t){return e(t,1)[0]})),v.rgb={black:[0,0,0],darkGray:[100,100,100],lightGray:[200,200,200],white:[255,255,255],red:[204,0,0],lightRed:[255,51,0],green:[0,204,0],lightGreen:[51,204,51],yellow:[204,102,0],lightYellow:[255,153,51],blue:[0,0,255],lightBlue:[26,140,255],magenta:[204,0,204],lightMagenta:[255,0,255],cyan:[0,153,255],lightCyan:[0,204,255]},t.exports=v},369:(t,e,n)=>{"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}const r=Object;var s=n(299);const o=s.first,a=s.strlen,c=(t,e)=>{const n=(t,e)=>t.reduce(((t,e)=>e.map(((e,n)=>[].concat(i(t[n]||[]),[e])))),[]).map((t=>e.apply(void 0,i(t)))),s=t.map((t=>t.map((t=>t.replace(/\n/g,"\\n"))))),c=s.map((t=>t.map(a))),u=n(c,Math.max),l=r.assign({delimiter:"  ",minColumnWidths:u.map((t=>0)),maxTotalWidth:0},e),h=a(l.delimiter),p=u.reduce(((t,e)=>t+e),0),d=u.map((t=>t/p)),f=l.maxTotalWidth-h*(u.length-1),m=Math.max(0,p-f),g=n([l.minColumnWidths,u,d],((t,e,n)=>Math.max(t,Math.floor(e-m*n)))),_=c.map((t=>n([g,t],((t,e)=>t-e))));return n([s,_],((t,e)=>n([t,e],((t,e)=>{return e>=0?l.right?" ".repeat(e)+t:t+" ".repeat(e):(n=t,i=a(t)+e,o(n,i-1)+"…");var n,i})).join(l.delimiter)))},u=t=>r.assign((e=>{var n;if(e[0]&&Array.isArray(e[0]))return c(e.map((e=>e.map(((e,n)=>void 0===e?"":t.print(e,n))))),t).join("\n");const s=[].concat(i(new Set((n=[]).concat.apply(n,i(e.map(r.keys)))))),o=[s.map(t.title)].concat(i(e.map((e=>s.map((n=>void 0===e[n]?"":t.print(e[n],n))))))),u=c(o,t);return(t.dash?[u[0],t.dash.repeat(a(u[0]))].concat(i(u.slice(1))):u).join("\n")}),t,{configure:e=>u(r.assign({},t,e))});t.exports=u({maxTotalWidth:Number.MAX_SAFE_INTEGER,print:String,title:String,dash:"-",right:!1})},382:function(t,e,n){!function(t,e,n,i){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var s=r(e),o=r(n),a=r(i),c=function(t,e,n){return{endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}},u=function(t,e,n){return{endTime:e,insertTime:n,type:"linearRampToValue",value:t}},l=function(t,e){return{startTime:e,type:"setValue",value:t}},h=function(t,e,n){return{duration:n,startTime:e,type:"setValueCurve",values:t}},p=function(t,e,n){var i=n.startTime,r=n.target,s=n.timeConstant;return r+(e-r)*Math.exp((i-t)/s)},d=function(t){return"exponentialRampToValue"===t.type},f=function(t){return"linearRampToValue"===t.type},m=function(t){return d(t)||f(t)},g=function(t){return"setValue"===t.type},_=function(t){return"setValueCurve"===t.type},v=function t(e,n,i,r){var s=e[n];return void 0===s?r:m(s)||g(s)?s.value:_(s)?s.values[s.values.length-1]:p(i,t(e,n-1,s.startTime,r),s)},y=function(t,e,n,i,r){return void 0===n?[i.insertTime,r]:m(n)?[n.endTime,n.value]:g(n)?[n.startTime,n.value]:_(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,v(t,e-1,n.startTime,r)]},w=function(t){return"cancelAndHold"===t.type},b=function(t){return"cancelScheduledValues"===t.type},x=function(t){return w(t)||b(t)?t.cancelTime:d(t)||f(t)?t.endTime:t.startTime},S=function(t,e,n,i){var r=i.endTime,s=i.value;return n===s?s:0<n&&0<s||n<0&&s<0?n*Math.pow(s/n,(t-e)/(r-e)):0},A=function(t,e,n,i){return n+(t-e)/(i.endTime-e)*(i.value-n)},T=function(t,e){var n=e.duration,i=e.startTime,r=e.values;return function(t,e){var n=Math.floor(e),i=Math.ceil(e);return n===i?t[n]:(1-(e-n))*t[n]+(1-(i-e))*t[i]}(r,(t-i)/n*(r.length-1))},C=function(t){return"setTarget"===t.type},E=function(t){function e(t){o.default(this,e),this._automationEvents=[],this._currenTime=0,this._defaultValue=t}return a.default(e,[{key:t,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(t){var e=x(t);if(w(t)||b(t)){var n=this._automationEvents.findIndex((function(n){return b(t)&&_(n)?n.startTime+n.duration>=e:x(n)>=e})),i=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),w(t)){var r=this._automationEvents[this._automationEvents.length-1];if(void 0!==i&&m(i)){if(C(r))throw new Error("The internal list is malformed.");var s=_(r)?r.startTime+r.duration:x(r),o=_(r)?r.values[r.values.length-1]:r.value,a=d(i)?S(e,s,o,i):A(e,s,o,i),p=d(i)?c(a,e,this._currenTime):u(a,e,this._currenTime);this._automationEvents.push(p)}void 0!==r&&C(r)&&this._automationEvents.push(l(this.getValue(e),e)),void 0!==r&&_(r)&&r.startTime+r.duration>e&&(this._automationEvents[this._automationEvents.length-1]=h(new Float32Array([6,7]),r.startTime,e-r.startTime))}}else{var g=this._automationEvents.findIndex((function(t){return x(t)>e})),v=-1===g?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[g-1];if(void 0!==v&&_(v)&&x(v)+v.duration>e)return!1;var y=d(t)?c(t.value,t.endTime,this._currenTime):f(t)?u(t.value,e,this._currenTime):t;if(-1===g)this._automationEvents.push(y);else{if(_(t)&&e+t.duration>x(this._automationEvents[g]))return!1;this._automationEvents.splice(g,0,y)}}return!0}},{key:"flush",value:function(t){var e=this._automationEvents.findIndex((function(e){return x(e)>t}));if(e>1){var n=this._automationEvents.slice(e-1),i=n[0];C(i)&&n.unshift(l(v(this._automationEvents,e-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(t){if(0===this._automationEvents.length)return this._defaultValue;var e=this._automationEvents.findIndex((function(e){return x(e)>t})),n=this._automationEvents[e],i=(-1===e?this._automationEvents.length:e)-1,r=this._automationEvents[i];if(void 0!==r&&C(r)&&(void 0===n||!m(n)||n.insertTime>t))return p(t,v(this._automationEvents,i-1,r.startTime,this._defaultValue),r);if(void 0!==r&&g(r)&&(void 0===n||!m(n)))return r.value;if(void 0!==r&&_(r)&&(void 0===n||!m(n)||r.startTime+r.duration>t))return t<r.startTime+r.duration?T(t,r):r.values[r.values.length-1];if(void 0!==r&&m(r)&&(void 0===n||!m(n)))return r.value;if(void 0!==n&&d(n)){var o=y(this._automationEvents,i,r,n,this._defaultValue),a=s.default(o,2),c=a[0],u=a[1];return S(t,c,u,n)}if(void 0!==n&&f(n)){var l=y(this._automationEvents,i,r,n,this._defaultValue),h=s.default(l,2),w=h[0],b=h[1];return A(t,w,b,n)}return this._defaultValue}}]),e}(Symbol.iterator);t.AutomationEventList=E,t.createCancelAndHoldAutomationEvent=function(t){return{cancelTime:t,type:"cancelAndHold"}},t.createCancelScheduledValuesAutomationEvent=function(t){return{cancelTime:t,type:"cancelScheduledValues"}},t.createExponentialRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"exponentialRampToValue",value:t}},t.createLinearRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"linearRampToValue",value:t}},t.createSetTargetAutomationEvent=function(t,e,n){return{startTime:e,target:t,timeConstant:n,type:"setTarget"}},t.createSetValueAutomationEvent=l,t.createSetValueCurveAutomationEvent=h,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(38),n(575),n(913))},824:t=>{"use strict";t.exports=function(t){if(!/^data\:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');var e=(t=t.replace(/\r?\n/g,"")).indexOf(",");if(-1===e||e<=4)throw new TypeError("malformed data: URI");for(var n=t.substring(5,e).split(";"),i=n[0]||"text/plain",r=i,s=!1,o="",a=1;a<n.length;a++)"base64"==n[a]?s=!0:(r+=";"+n[a],0==n[a].indexOf("charset=")&&(o=n[a].substring(8)));n[0]||o.length||(r+=";charset=US-ASCII",o="US-ASCII");var c=unescape(t.substring(e+1)),u=s?"base64":"ascii",l=Buffer.from?Buffer.from(c,u):new Buffer(c,u);return l.type=i,l.typeFull=r,l.charset=o,l}},187:t=>{"use strict";var e,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var r=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(n,i){function r(n){t.removeListener(e,s),i(n)}function s(){"function"==typeof t.removeListener&&t.removeListener("error",r),n([].slice.call(arguments))}m(t,e,s,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&m(t,"error",e,{once:!0})}(t,r)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function u(t,e,n,i){var r,s,o,u;if(a(n),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),void 0===o)o=s[e]=n,++t._eventsCount;else if("function"==typeof o?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),(r=c(t))>0&&o.length>r&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=o.length,u=l,console&&console.warn&&console.warn(u)}return t}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=l.bind(i);return r.listener=n,i.wrapFn=r,r}function p(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):f(r,r.length)}function d(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function m(t,e,n,i){if("function"==typeof t.on)i.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function r(s){i.once&&t.removeEventListener(e,r),n(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,s=this._events;if(void 0!==s)r=r&&void 0===s.error;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[t];if(void 0===c)return!1;if("function"==typeof c)i(c,this,e);else{var u=c.length,l=f(c,u);for(n=0;n<u;++n)i(l[n],this,e)}return!0},s.prototype.addListener=function(t,e){return u(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return u(this,t,e,!0)},s.prototype.once=function(t,e){return a(e),this.on(t,h(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return a(e),this.prependListener(t,h(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,i,r,s,o;if(a(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){o=n[s].listener,r=s;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,o||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,s=Object.keys(n);for(i=0;i<s.length;++i)"removeListener"!==(r=s[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},s.prototype.listeners=function(t){return p(this,t,!0)},s.prototype.rawListeners=function(t){return p(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},s.prototype.listenerCount=d,s.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},144:(t,e,n)=>{"use strict";t=n.nmd(t);const{assign:i}=Object,r="undefined"!=typeof window&&window.window===window&&window.navigator,s=n(741).SourceMapConsumer,o=n(526),a=n(472),c=n(824),u=r?null:t.require,l=t=>{const e=n=>n in e.cache?e.cache[n]:e.cache[n]=t(n);return e.forgetEverything=()=>{e.cache=Object.create(null)},e.cache=Object.create(null),e};function h(t,e){const n=e?o:Promise,r=l((e=>u(e,t(e))));function u(t,h){return void 0===h?r(a.resolve(t)):n.resolve(h).then((n=>{let r,h,p,d=t=>(p=p||function(t){const e=/\u0023 sourceMappingURL=(.+)\n?/g;let n;for(;;){const i=e.exec(t.text);if(!i)break;n=i}const r=n&&n[1],o=e=>i({},e,{sourceFile:t,sourceLine:t.lines[e.line-1]||""});return r?function(t,e,n){const r=e.startsWith("data:")?u(t,c(e).toString()):u(a.relativeToFile(t,e)),o=r.then((t=>s(JSON.parse(t.text)))),h=l((function(t){return r.then((e=>{const n=a.relativeToFile(e.path,t);return o.then((e=>u(n,e.sourceContentFor(t,!0)||void 0)))}))}));return t=>o.then((e=>{const r=e.originalPositionFor(t);return r.source?h(r.source).then((e=>e._resolve(i({},t,{line:r.line,column:r.column+1,name:r.name})))):n(t)})).catch((e=>i(n(t),{sourceMapError:e})))}(t.path,r,o):o}(r))(t);return r={path:t,text:n,get lines(){return h=h||n.split("\n")},resolve(t){const n=d(t);if(!e)return Promise.resolve(n);try{return o.valueFrom(n)}catch(e){return i({},t,{error:e})}},_resolve:d}}))}return i((function(t){const n=u(t);if(e)try{return o.valueFrom(n)}catch(e){const n={path:t,text:"",lines:[],error:e,resolve:t=>i({},t,{error:e,sourceLine:"",sourceFile:n})};return n}return n}),{resetCache:()=>r.forgetEverything(),getCache:()=>r.cache})}t.exports=h((function(t){return new o((e=>{if(r){let n=new XMLHttpRequest;n.open("GET",t,!1),n.send(null),e(n.responseText)}else e(u("fs").readFileSync(t,{encoding:"utf8"}))}))}),!0),t.exports.async=h((function(t){return new Promise(((e,n)=>{if(r){let i=new XMLHttpRequest;i.open("GET",t),i.onreadystatechange=t=>{4===i.readyState&&(200===i.status?e(i.responseText):n(new Error(i.statusText)))},i.send(null)}else u("fs").readFile(t,{encoding:"utf8"},((t,i)=>{t?n(t):e(i)}))}))}))},526:t=>{"use strict";t.exports=class t{constructor(t){try{t((t=>{this.setValue(t,!1)}),(t=>{this.setValue(t,!0)}))}catch(t){this.setValue(t,!0)}}setValue(e,n){this.val=e instanceof t?e.val:e,this.rejected=n||e instanceof t&&e.rejected}static valueFrom(e){if(e instanceof t){if(e.rejected)throw e.val;return e.val}return e}then(e){try{if(!this.rejected)return t.resolve(e(this.val))}catch(e){return t.reject(e)}return this}catch(e){try{if(this.rejected)return t.resolve(e(this.val))}catch(e){return t.reject(e)}return this}static resolve(e){return new t((t=>{t(e)}))}static reject(e){return new t(((t,n)=>{n(e)}))}}},472:t=>{"use strict";const e="undefined"!=typeof window&&window.window===window&&window.navigator,n=e?window.location.href:process.cwd(),i=new RegExp("^((https|http)://)?[a-z0-9A-Z]{3}.[a-z0-9A-Z][a-z0-9A-Z]{0,61}?[a-z0-9A-Z].com|net|cn|cc (:s[0-9]{1-4})?/$"),r=t.exports={concat(t,e){const n="/"===t[t.length-1],i="/"===e[0];return t+(n||i?"":"/")+(n&&i?e.substring(1):e)},resolve:t=>r.isAbsolute(t)?r.normalize(t):r.normalize(r.concat(n,t)),normalize(t){let n=[],i=0;t.split("/").reverse().filter((t=>"."!==t)).forEach((t=>{".."===t?i++:0===i?n.push(t):i--}));const r=n.reverse().join("/");return(e&&"/"===r[0]?"/"===r[1]?window.location.protocol:window.location.origin:"")+r},isData:t=>0===t.indexOf("data:"),isURL:t=>i.test(t),isAbsolute:t=>"/"===t[0]||/^[^\/]*:/.test(t),relativeToFile:(t,e)=>r.isData(t)||r.isAbsolute(e)?r.normalize(e):r.normalize(r.concat(t.split("/").slice(0,-1).join("/"),e))}},805:(t,e,n)=>{var i=n(798),r=Object.prototype.hasOwnProperty,s="undefined"!=typeof Map;function o(){this._array=[],this._set=s?new Map:Object.create(null)}o.fromArray=function(t,e){for(var n=new o,i=0,r=t.length;i<r;i++)n.add(t[i],e);return n},o.prototype.size=function(){return s?this._set.size:Object.getOwnPropertyNames(this._set).length},o.prototype.add=function(t,e){var n=s?t:i.toSetString(t),o=s?this.has(t):r.call(this._set,n),a=this._array.length;o&&!e||this._array.push(t),o||(s?this._set.set(t,a):this._set[n]=a)},o.prototype.has=function(t){if(s)return this._set.has(t);var e=i.toSetString(t);return r.call(this._set,e)},o.prototype.indexOf=function(t){if(s){var e=this._set.get(t);if(e>=0)return e}else{var n=i.toSetString(t);if(r.call(this._set,n))return this._set[n]}throw new Error('"'+t+'" is not in the set.')},o.prototype.at=function(t){if(t>=0&&t<this._array.length)return this._array[t];throw new Error("No element indexed by "+t)},o.prototype.toArray=function(){return this._array.slice()},e.I=o},588:(t,e,n)=>{var i=n(757);e.encode=function(t){var e,n="",r=function(t){return t<0?1+(-t<<1):0+(t<<1)}(t);do{e=31&r,(r>>>=5)>0&&(e|=32),n+=i.encode(e)}while(r>0);return n},e.decode=function(t,e,n){var r,s,o,a,c=t.length,u=0,l=0;do{if(e>=c)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(s=i.decode(t.charCodeAt(e++))))throw new Error("Invalid base64 digit: "+t.charAt(e-1));r=!!(32&s),u+=(s&=31)<<l,l+=5}while(r);n.value=(a=(o=u)>>1,1==(1&o)?-a:a),n.rest=e}},757:(t,e)=>{var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");e.encode=function(t){if(0<=t&&t<n.length)return n[t];throw new TypeError("Must be between 0 and 63: "+t)},e.decode=function(t){return 65<=t&&t<=90?t-65:97<=t&&t<=122?t-97+26:48<=t&&t<=57?t-48+52:43==t?62:47==t?63:-1}},614:(t,e)=>{function n(t,i,r,s,o,a){var c=Math.floor((i-t)/2)+t,u=o(r,s[c],!0);return 0===u?c:u>0?i-c>1?n(c,i,r,s,o,a):a==e.LEAST_UPPER_BOUND?i<s.length?i:-1:c:c-t>1?n(t,c,r,s,o,a):a==e.LEAST_UPPER_BOUND?c:t<0?-1:t}e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2,e.search=function(t,i,r,s){if(0===i.length)return-1;var o=n(-1,i.length,t,i,r,s||e.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&0===r(i[o],i[o-1],!0);)--o;return o}},293:(t,e,n)=>{var i=n(798);function r(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}r.prototype.unsortedForEach=function(t,e){this._array.forEach(t,e)},r.prototype.add=function(t){var e,n,r,s,o,a;n=t,r=(e=this._last).generatedLine,s=n.generatedLine,o=e.generatedColumn,a=n.generatedColumn,s>r||s==r&&a>=o||i.compareByGeneratedPositionsInflated(e,n)<=0?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))},r.prototype.toArray=function(){return this._sorted||(this._array.sort(i.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},e.H=r},700:(t,e)=>{function n(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function i(t,e,r,s){if(r<s){var o=r-1;n(t,(l=r,h=s,Math.round(l+Math.random()*(h-l))),s);for(var a=t[s],c=r;c<s;c++)e(t[c],a)<=0&&n(t,o+=1,c);n(t,o+1,c);var u=o+1;i(t,e,r,u-1),i(t,e,u+1,s)}var l,h}e.U=function(t,e){i(t,e,0,t.length-1)}},965:(t,e,n)=>{var i=n(798),r=n(614),s=n(805).I,o=n(588),a=n(700).U;function c(t,e){var n=t;return"string"==typeof t&&(n=i.parseSourceMapInput(t)),null!=n.sections?new h(n,e):new u(n,e)}function u(t,e){var n=t;"string"==typeof t&&(n=i.parseSourceMapInput(t));var r=i.getArg(n,"version"),o=i.getArg(n,"sources"),a=i.getArg(n,"names",[]),c=i.getArg(n,"sourceRoot",null),u=i.getArg(n,"sourcesContent",null),l=i.getArg(n,"mappings"),h=i.getArg(n,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);c&&(c=i.normalize(c)),o=o.map(String).map(i.normalize).map((function(t){return c&&i.isAbsolute(c)&&i.isAbsolute(t)?i.relative(c,t):t})),this._names=s.fromArray(a.map(String),!0),this._sources=s.fromArray(o,!0),this._absoluteSources=this._sources.toArray().map((function(t){return i.computeSourceURL(c,t,e)})),this.sourceRoot=c,this.sourcesContent=u,this._mappings=l,this._sourceMapURL=e,this.file=h}function l(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function h(t,e){var n=t;"string"==typeof t&&(n=i.parseSourceMapInput(t));var r=i.getArg(n,"version"),o=i.getArg(n,"sections");if(r!=this._version)throw new Error("Unsupported version: "+r);this._sources=new s,this._names=new s;var a={line:-1,column:0};this._sections=o.map((function(t){if(t.url)throw new Error("Support for url field in sections not implemented.");var n=i.getArg(t,"offset"),r=i.getArg(n,"line"),s=i.getArg(n,"column");if(r<a.line||r===a.line&&s<a.column)throw new Error("Section offsets must be ordered and non-overlapping.");return a=n,{generatedOffset:{generatedLine:r+1,generatedColumn:s+1},consumer:new c(i.getArg(t,"map"),e)}}))}c.fromSourceMap=function(t,e){return u.fromSourceMap(t,e)},c.prototype._version=3,c.prototype.__generatedMappings=null,Object.defineProperty(c.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),c.prototype.__originalMappings=null,Object.defineProperty(c.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),c.prototype._charIsMappingSeparator=function(t,e){var n=t.charAt(e);return";"===n||","===n},c.prototype._parseMappings=function(t,e){throw new Error("Subclasses must implement _parseMappings")},c.GENERATED_ORDER=1,c.ORIGINAL_ORDER=2,c.GREATEST_LOWER_BOUND=1,c.LEAST_UPPER_BOUND=2,c.prototype.eachMapping=function(t,e,n){var r,s=e||null;switch(n||c.GENERATED_ORDER){case c.GENERATED_ORDER:r=this._generatedMappings;break;case c.ORIGINAL_ORDER:r=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var o=this.sourceRoot;r.map((function(t){var e=null===t.source?null:this._sources.at(t.source);return{source:e=i.computeSourceURL(o,e,this._sourceMapURL),generatedLine:t.generatedLine,generatedColumn:t.generatedColumn,originalLine:t.originalLine,originalColumn:t.originalColumn,name:null===t.name?null:this._names.at(t.name)}}),this).forEach(t,s)},c.prototype.allGeneratedPositionsFor=function(t){var e=i.getArg(t,"line"),n={source:i.getArg(t,"source"),originalLine:e,originalColumn:i.getArg(t,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var s=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",i.compareByOriginalPositions,r.LEAST_UPPER_BOUND);if(o>=0){var a=this._originalMappings[o];if(void 0===t.column)for(var c=a.originalLine;a&&a.originalLine===c;)s.push({line:i.getArg(a,"generatedLine",null),column:i.getArg(a,"generatedColumn",null),lastColumn:i.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o];else for(var u=a.originalColumn;a&&a.originalLine===e&&a.originalColumn==u;)s.push({line:i.getArg(a,"generatedLine",null),column:i.getArg(a,"generatedColumn",null),lastColumn:i.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o]}return s},e.SourceMapConsumer=c,u.prototype=Object.create(c.prototype),u.prototype.consumer=c,u.prototype._findSourceIndex=function(t){var e,n=t;if(null!=this.sourceRoot&&(n=i.relative(this.sourceRoot,n)),this._sources.has(n))return this._sources.indexOf(n);for(e=0;e<this._absoluteSources.length;++e)if(this._absoluteSources[e]==t)return e;return-1},u.fromSourceMap=function(t,e){var n=Object.create(u.prototype),r=n._names=s.fromArray(t._names.toArray(),!0),o=n._sources=s.fromArray(t._sources.toArray(),!0);n.sourceRoot=t._sourceRoot,n.sourcesContent=t._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=t._file,n._sourceMapURL=e,n._absoluteSources=n._sources.toArray().map((function(t){return i.computeSourceURL(n.sourceRoot,t,e)}));for(var c=t._mappings.toArray().slice(),h=n.__generatedMappings=[],p=n.__originalMappings=[],d=0,f=c.length;d<f;d++){var m=c[d],g=new l;g.generatedLine=m.generatedLine,g.generatedColumn=m.generatedColumn,m.source&&(g.source=o.indexOf(m.source),g.originalLine=m.originalLine,g.originalColumn=m.originalColumn,m.name&&(g.name=r.indexOf(m.name)),p.push(g)),h.push(g)}return a(n.__originalMappings,i.compareByOriginalPositions),n},u.prototype._version=3,Object.defineProperty(u.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),u.prototype._parseMappings=function(t,e){for(var n,r,s,c,u,h=1,p=0,d=0,f=0,m=0,g=0,_=t.length,v=0,y={},w={},b=[],x=[];v<_;)if(";"===t.charAt(v))h++,v++,p=0;else if(","===t.charAt(v))v++;else{for((n=new l).generatedLine=h,c=v;c<_&&!this._charIsMappingSeparator(t,c);c++);if(s=y[r=t.slice(v,c)])v+=r.length;else{for(s=[];v<c;)o.decode(t,v,w),u=w.value,v=w.rest,s.push(u);if(2===s.length)throw new Error("Found a source, but no line and column");if(3===s.length)throw new Error("Found a source and line, but no column");y[r]=s}n.generatedColumn=p+s[0],p=n.generatedColumn,s.length>1&&(n.source=m+s[1],m+=s[1],n.originalLine=d+s[2],d=n.originalLine,n.originalLine+=1,n.originalColumn=f+s[3],f=n.originalColumn,s.length>4&&(n.name=g+s[4],g+=s[4])),x.push(n),"number"==typeof n.originalLine&&b.push(n)}a(x,i.compareByGeneratedPositionsDeflated),this.__generatedMappings=x,a(b,i.compareByOriginalPositions),this.__originalMappings=b},u.prototype._findMapping=function(t,e,n,i,s,o){if(t[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+t[n]);if(t[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+t[i]);return r.search(t,e,s,o)},u.prototype.computeColumnSpans=function(){for(var t=0;t<this._generatedMappings.length;++t){var e=this._generatedMappings[t];if(t+1<this._generatedMappings.length){var n=this._generatedMappings[t+1];if(e.generatedLine===n.generatedLine){e.lastGeneratedColumn=n.generatedColumn-1;continue}}e.lastGeneratedColumn=1/0}},u.prototype.originalPositionFor=function(t){var e={generatedLine:i.getArg(t,"line"),generatedColumn:i.getArg(t,"column")},n=this._findMapping(e,this._generatedMappings,"generatedLine","generatedColumn",i.compareByGeneratedPositionsDeflated,i.getArg(t,"bias",c.GREATEST_LOWER_BOUND));if(n>=0){var r=this._generatedMappings[n];if(r.generatedLine===e.generatedLine){var s=i.getArg(r,"source",null);null!==s&&(s=this._sources.at(s),s=i.computeSourceURL(this.sourceRoot,s,this._sourceMapURL));var o=i.getArg(r,"name",null);return null!==o&&(o=this._names.at(o)),{source:s,line:i.getArg(r,"originalLine",null),column:i.getArg(r,"originalColumn",null),name:o}}}return{source:null,line:null,column:null,name:null}},u.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some((function(t){return null==t}))},u.prototype.sourceContentFor=function(t,e){if(!this.sourcesContent)return null;var n=this._findSourceIndex(t);if(n>=0)return this.sourcesContent[n];var r,s=t;if(null!=this.sourceRoot&&(s=i.relative(this.sourceRoot,s)),null!=this.sourceRoot&&(r=i.urlParse(this.sourceRoot))){var o=s.replace(/^file:\/\//,"");if("file"==r.scheme&&this._sources.has(o))return this.sourcesContent[this._sources.indexOf(o)];if((!r.path||"/"==r.path)&&this._sources.has("/"+s))return this.sourcesContent[this._sources.indexOf("/"+s)]}if(e)return null;throw new Error('"'+s+'" is not in the SourceMap.')},u.prototype.generatedPositionFor=function(t){var e=i.getArg(t,"source");if((e=this._findSourceIndex(e))<0)return{line:null,column:null,lastColumn:null};var n={source:e,originalLine:i.getArg(t,"line"),originalColumn:i.getArg(t,"column")},r=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",i.compareByOriginalPositions,i.getArg(t,"bias",c.GREATEST_LOWER_BOUND));if(r>=0){var s=this._originalMappings[r];if(s.source===n.source)return{line:i.getArg(s,"generatedLine",null),column:i.getArg(s,"generatedColumn",null),lastColumn:i.getArg(s,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},h.prototype=Object.create(c.prototype),h.prototype.constructor=c,h.prototype._version=3,Object.defineProperty(h.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var n=0;n<this._sections[e].consumer.sources.length;n++)t.push(this._sections[e].consumer.sources[n]);return t}}),h.prototype.originalPositionFor=function(t){var e={generatedLine:i.getArg(t,"line"),generatedColumn:i.getArg(t,"column")},n=r.search(e,this._sections,(function(t,e){return t.generatedLine-e.generatedOffset.generatedLine||t.generatedColumn-e.generatedOffset.generatedColumn})),s=this._sections[n];return s?s.consumer.originalPositionFor({line:e.generatedLine-(s.generatedOffset.generatedLine-1),column:e.generatedColumn-(s.generatedOffset.generatedLine===e.generatedLine?s.generatedOffset.generatedColumn-1:0),bias:t.bias}):{source:null,line:null,column:null,name:null}},h.prototype.hasContentsOfAllSources=function(){return this._sections.every((function(t){return t.consumer.hasContentsOfAllSources()}))},h.prototype.sourceContentFor=function(t,e){for(var n=0;n<this._sections.length;n++){var i=this._sections[n].consumer.sourceContentFor(t,!0);if(i)return i}if(e)return null;throw new Error('"'+t+'" is not in the SourceMap.')},h.prototype.generatedPositionFor=function(t){for(var e=0;e<this._sections.length;e++){var n=this._sections[e];if(-1!==n.consumer._findSourceIndex(i.getArg(t,"source"))){var r=n.consumer.generatedPositionFor(t);if(r)return{line:r.line+(n.generatedOffset.generatedLine-1),column:r.column+(n.generatedOffset.generatedLine===r.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},h.prototype._parseMappings=function(t,e){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var r=this._sections[n],s=r.consumer._generatedMappings,o=0;o<s.length;o++){var c=s[o],u=r.consumer._sources.at(c.source);u=i.computeSourceURL(r.consumer.sourceRoot,u,this._sourceMapURL),this._sources.add(u),u=this._sources.indexOf(u);var l=null;c.name&&(l=r.consumer._names.at(c.name),this._names.add(l),l=this._names.indexOf(l));var h={source:u,generatedLine:c.generatedLine+(r.generatedOffset.generatedLine-1),generatedColumn:c.generatedColumn+(r.generatedOffset.generatedLine===c.generatedLine?r.generatedOffset.generatedColumn-1:0),originalLine:c.originalLine,originalColumn:c.originalColumn,name:l};this.__generatedMappings.push(h),"number"==typeof h.originalLine&&this.__originalMappings.push(h)}a(this.__generatedMappings,i.compareByGeneratedPositionsDeflated),a(this.__originalMappings,i.compareByOriginalPositions)}},833:(t,e,n)=>{var i=n(588),r=n(798),s=n(805).I,o=n(293).H;function a(t){t||(t={}),this._file=r.getArg(t,"file",null),this._sourceRoot=r.getArg(t,"sourceRoot",null),this._skipValidation=r.getArg(t,"skipValidation",!1),this._sources=new s,this._names=new s,this._mappings=new o,this._sourcesContents=null}a.prototype._version=3,a.fromSourceMap=function(t){var e=t.sourceRoot,n=new a({file:t.file,sourceRoot:e});return t.eachMapping((function(t){var i={generated:{line:t.generatedLine,column:t.generatedColumn}};null!=t.source&&(i.source=t.source,null!=e&&(i.source=r.relative(e,i.source)),i.original={line:t.originalLine,column:t.originalColumn},null!=t.name&&(i.name=t.name)),n.addMapping(i)})),t.sources.forEach((function(i){var s=i;null!==e&&(s=r.relative(e,i)),n._sources.has(s)||n._sources.add(s);var o=t.sourceContentFor(i);null!=o&&n.setSourceContent(i,o)})),n},a.prototype.addMapping=function(t){var e=r.getArg(t,"generated"),n=r.getArg(t,"original",null),i=r.getArg(t,"source",null),s=r.getArg(t,"name",null);this._skipValidation||this._validateMapping(e,n,i,s),null!=i&&(i=String(i),this._sources.has(i)||this._sources.add(i)),null!=s&&(s=String(s),this._names.has(s)||this._names.add(s)),this._mappings.add({generatedLine:e.line,generatedColumn:e.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:i,name:s})},a.prototype.setSourceContent=function(t,e){var n=t;null!=this._sourceRoot&&(n=r.relative(this._sourceRoot,n)),null!=e?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[r.toSetString(n)]=e):this._sourcesContents&&(delete this._sourcesContents[r.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},a.prototype.applySourceMap=function(t,e,n){var i=e;if(null==e){if(null==t.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');i=t.file}var o=this._sourceRoot;null!=o&&(i=r.relative(o,i));var a=new s,c=new s;this._mappings.unsortedForEach((function(e){if(e.source===i&&null!=e.originalLine){var s=t.originalPositionFor({line:e.originalLine,column:e.originalColumn});null!=s.source&&(e.source=s.source,null!=n&&(e.source=r.join(n,e.source)),null!=o&&(e.source=r.relative(o,e.source)),e.originalLine=s.line,e.originalColumn=s.column,null!=s.name&&(e.name=s.name))}var u=e.source;null==u||a.has(u)||a.add(u);var l=e.name;null==l||c.has(l)||c.add(l)}),this),this._sources=a,this._names=c,t.sources.forEach((function(e){var i=t.sourceContentFor(e);null!=i&&(null!=n&&(e=r.join(n,e)),null!=o&&(e=r.relative(o,e)),this.setSourceContent(e,i))}),this)},a.prototype._validateMapping=function(t,e,n,i){if(e&&"number"!=typeof e.line&&"number"!=typeof e.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(t&&"line"in t&&"column"in t&&t.line>0&&t.column>=0)||e||n||i)&&!(t&&"line"in t&&"column"in t&&e&&"line"in e&&"column"in e&&t.line>0&&t.column>=0&&e.line>0&&e.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:t,source:n,original:e,name:i}))},a.prototype._serializeMappings=function(){for(var t,e,n,s,o=0,a=1,c=0,u=0,l=0,h=0,p="",d=this._mappings.toArray(),f=0,m=d.length;f<m;f++){if(t="",(e=d[f]).generatedLine!==a)for(o=0;e.generatedLine!==a;)t+=";",a++;else if(f>0){if(!r.compareByGeneratedPositionsInflated(e,d[f-1]))continue;t+=","}t+=i.encode(e.generatedColumn-o),o=e.generatedColumn,null!=e.source&&(s=this._sources.indexOf(e.source),t+=i.encode(s-h),h=s,t+=i.encode(e.originalLine-1-u),u=e.originalLine-1,t+=i.encode(e.originalColumn-c),c=e.originalColumn,null!=e.name&&(n=this._names.indexOf(e.name),t+=i.encode(n-l),l=n)),p+=t}return p},a.prototype._generateSourcesContent=function(t,e){return t.map((function(t){if(!this._sourcesContents)return null;null!=e&&(t=r.relative(e,t));var n=r.toSetString(t);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null}),this)},a.prototype.toJSON=function(){var t={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(t.file=this._file),null!=this._sourceRoot&&(t.sourceRoot=this._sourceRoot),this._sourcesContents&&(t.sourcesContent=this._generateSourcesContent(t.sources,t.sourceRoot)),t},a.prototype.toString=function(){return JSON.stringify(this.toJSON())},e.h=a},933:(t,e,n)=>{var i=n(833).h,r=n(798),s=/(\r?\n)/,o="$$$isSourceNode$$$";function a(t,e,n,i,r){this.children=[],this.sourceContents={},this.line=null==t?null:t,this.column=null==e?null:e,this.source=null==n?null:n,this.name=null==r?null:r,this[o]=!0,null!=i&&this.add(i)}a.fromStringWithSourceMap=function(t,e,n){var i=new a,o=t.split(s),c=0,u=function(){return t()+(t()||"");function t(){return c<o.length?o[c++]:void 0}},l=1,h=0,p=null;return e.eachMapping((function(t){if(null!==p){if(!(l<t.generatedLine)){var e=(n=o[c]||"").substr(0,t.generatedColumn-h);return o[c]=n.substr(t.generatedColumn-h),h=t.generatedColumn,d(p,e),void(p=t)}d(p,u()),l++,h=0}for(;l<t.generatedLine;)i.add(u()),l++;if(h<t.generatedColumn){var n=o[c]||"";i.add(n.substr(0,t.generatedColumn)),o[c]=n.substr(t.generatedColumn),h=t.generatedColumn}p=t}),this),c<o.length&&(p&&d(p,u()),i.add(o.splice(c).join(""))),e.sources.forEach((function(t){var s=e.sourceContentFor(t);null!=s&&(null!=n&&(t=r.join(n,t)),i.setSourceContent(t,s))})),i;function d(t,e){if(null===t||void 0===t.source)i.add(e);else{var s=n?r.join(n,t.source):t.source;i.add(new a(t.originalLine,t.originalColumn,s,e,t.name))}}},a.prototype.add=function(t){if(Array.isArray(t))t.forEach((function(t){this.add(t)}),this);else{if(!t[o]&&"string"!=typeof t)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);t&&this.children.push(t)}return this},a.prototype.prepend=function(t){if(Array.isArray(t))for(var e=t.length-1;e>=0;e--)this.prepend(t[e]);else{if(!t[o]&&"string"!=typeof t)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);this.children.unshift(t)}return this},a.prototype.walk=function(t){for(var e,n=0,i=this.children.length;n<i;n++)(e=this.children[n])[o]?e.walk(t):""!==e&&t(e,{source:this.source,line:this.line,column:this.column,name:this.name})},a.prototype.join=function(t){var e,n,i=this.children.length;if(i>0){for(e=[],n=0;n<i-1;n++)e.push(this.children[n]),e.push(t);e.push(this.children[n]),this.children=e}return this},a.prototype.replaceRight=function(t,e){var n=this.children[this.children.length-1];return n[o]?n.replaceRight(t,e):"string"==typeof n?this.children[this.children.length-1]=n.replace(t,e):this.children.push("".replace(t,e)),this},a.prototype.setSourceContent=function(t,e){this.sourceContents[r.toSetString(t)]=e},a.prototype.walkSourceContents=function(t){for(var e=0,n=this.children.length;e<n;e++)this.children[e][o]&&this.children[e].walkSourceContents(t);var i=Object.keys(this.sourceContents);for(e=0,n=i.length;e<n;e++)t(r.fromSetString(i[e]),this.sourceContents[i[e]])},a.prototype.toString=function(){var t="";return this.walk((function(e){t+=e})),t},a.prototype.toStringWithSourceMap=function(t){var e={code:"",line:1,column:0},n=new i(t),r=!1,s=null,o=null,a=null,c=null;return this.walk((function(t,i){e.code+=t,null!==i.source&&null!==i.line&&null!==i.column?(s===i.source&&o===i.line&&a===i.column&&c===i.name||n.addMapping({source:i.source,original:{line:i.line,column:i.column},generated:{line:e.line,column:e.column},name:i.name}),s=i.source,o=i.line,a=i.column,c=i.name,r=!0):r&&(n.addMapping({generated:{line:e.line,column:e.column}}),s=null,r=!1);for(var u=0,l=t.length;u<l;u++)10===t.charCodeAt(u)?(e.line++,e.column=0,u+1===l?(s=null,r=!1):r&&n.addMapping({source:i.source,original:{line:i.line,column:i.column},generated:{line:e.line,column:e.column},name:i.name})):e.column++})),this.walkSourceContents((function(t,e){n.setSourceContent(t,e)})),{code:e.code,map:n}}},798:(t,e)=>{e.getArg=function(t,e,n){if(e in t)return t[e];if(3===arguments.length)return n;throw new Error('"'+e+'" is a required argument.')};var n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,i=/^data:.+\,.+$/;function r(t){var e=t.match(n);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}function s(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}function o(t){var n=t,i=r(t);if(i){if(!i.path)return t;n=i.path}for(var o,a=e.isAbsolute(n),c=n.split(/\/+/),u=0,l=c.length-1;l>=0;l--)"."===(o=c[l])?c.splice(l,1):".."===o?u++:u>0&&(""===o?(c.splice(l+1,u),u=0):(c.splice(l,2),u--));return""===(n=c.join("/"))&&(n=a?"/":"."),i?(i.path=n,s(i)):n}function a(t,e){""===t&&(t="."),""===e&&(e=".");var n=r(e),a=r(t);if(a&&(t=a.path||"/"),n&&!n.scheme)return a&&(n.scheme=a.scheme),s(n);if(n||e.match(i))return e;if(a&&!a.host&&!a.path)return a.host=e,s(a);var c="/"===e.charAt(0)?e:o(t.replace(/\/+$/,"")+"/"+e);return a?(a.path=c,s(a)):c}e.urlParse=r,e.urlGenerate=s,e.normalize=o,e.join=a,e.isAbsolute=function(t){return"/"===t.charAt(0)||n.test(t)},e.relative=function(t,e){""===t&&(t="."),t=t.replace(/\/$/,"");for(var n=0;0!==e.indexOf(t+"/");){var i=t.lastIndexOf("/");if(i<0)return e;if((t=t.slice(0,i)).match(/^([^\/]+:\/)?\/*$/))return e;++n}return Array(n+1).join("../")+e.substr(t.length+1)};var c=!("__proto__"in Object.create(null));function u(t){return t}function l(t){if(!t)return!1;var e=t.length;if(e<9)return!1;if(95!==t.charCodeAt(e-1)||95!==t.charCodeAt(e-2)||111!==t.charCodeAt(e-3)||116!==t.charCodeAt(e-4)||111!==t.charCodeAt(e-5)||114!==t.charCodeAt(e-6)||112!==t.charCodeAt(e-7)||95!==t.charCodeAt(e-8)||95!==t.charCodeAt(e-9))return!1;for(var n=e-10;n>=0;n--)if(36!==t.charCodeAt(n))return!1;return!0}function h(t,e){return t===e?0:null===t?1:null===e?-1:t>e?1:-1}e.toSetString=c?u:function(t){return l(t)?"$"+t:t},e.fromSetString=c?u:function(t){return l(t)?t.slice(1):t},e.compareByOriginalPositions=function(t,e,n){var i=h(t.source,e.source);return 0!==i||0!=(i=t.originalLine-e.originalLine)||0!=(i=t.originalColumn-e.originalColumn)||n||0!=(i=t.generatedColumn-e.generatedColumn)||0!=(i=t.generatedLine-e.generatedLine)?i:h(t.name,e.name)},e.compareByGeneratedPositionsDeflated=function(t,e,n){var i=t.generatedLine-e.generatedLine;return 0!==i||0!=(i=t.generatedColumn-e.generatedColumn)||n||0!==(i=h(t.source,e.source))||0!=(i=t.originalLine-e.originalLine)||0!=(i=t.originalColumn-e.originalColumn)?i:h(t.name,e.name)},e.compareByGeneratedPositionsInflated=function(t,e){var n=t.generatedLine-e.generatedLine;return 0!==n||0!=(n=t.generatedColumn-e.generatedColumn)||0!==(n=h(t.source,e.source))||0!=(n=t.originalLine-e.originalLine)||0!=(n=t.originalColumn-e.originalColumn)?n:h(t.name,e.name)},e.parseSourceMapInput=function(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))},e.computeSourceURL=function(t,e,n){if(e=e||"",t&&("/"!==t[t.length-1]&&"/"!==e[0]&&(t+="/"),e=t+e),n){var i=r(n);if(!i)throw new Error("sourceMapURL could not be parsed");if(i.path){var c=i.path.lastIndexOf("/");c>=0&&(i.path=i.path.substring(0,c+1))}e=a(s(i),e)}return o(e)}},741:(t,e,n)=>{n(833).h,e.SourceMapConsumer=n(965).SourceMapConsumer,n(933)},885:(t,e,n)=>{"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var r=Object,s=n(171),o=n(973),a=n(778),c=n(347),u=n(811).configure({formatter:function(t,e){if(t instanceof Error&&("undefined"==typeof Symbol||!t[Symbol.for("String.ify")])){if(e.state.depth>0)return"<Error: "+t.message+">";var n=e.limit((t.message||"").replace(/\r|\n/g,"").trim(),e.state.maxErrorMessageLength||120),i=new s(t).withSources().asTable().split("\n").map((function(t){return"    "+t})).join("\n"),r="actual"in t&&"expected"in t,c=t.constructor.name||"Error";if(r){var u=e.configure({maxStringLength:Number.MAX_VALUE,maxDepth:8}),l=a("    actual:   ",u(t.actual)),h=a("    expected: ",u(t.expected));return(l.split("\n").length>1||h.split("\n").length>1)&&(l+="\n"),"["+c+"] "+n+"\n\n"+o.red(l)+"\n"+o.green(h)+"\n\n"+i+"\n"}return"["+c+"] "+n+"\n\n"+i+"\n"}}}),l=n(299),h=l.isBlank,p=l.blank,d=c({stringify:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.print||u.configure(e);return t.map((function(t){return"string"==typeof t?t:n(t)}))},trim:function(t,e){var n=e.max,i=void 0===n?void 0:n;return i?t.map((function(t){return u.limit(t,i)})):t},lines:function(t,e){var n,r=e.linebreak,s=void 0===r?"\n":r,o=[[]],a=[],c=!0,u=!1,l=void 0;try{for(var h,d=t[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var f=h.value,m=(n=f.split(s),Array.isArray(n)?n:Array.from(n)),g=m[0],_=m.slice(1);o[o.length-1].push(g),o=[].concat(i(o),i(_.map((function(t){return t?[].concat(a,[t]):[]}))));var v=p(_.length?_[_.length-1]:f);v&&a.push(v)}}catch(t){u=!0,l=t}finally{try{!c&&d.return&&d.return()}finally{if(u)throw l}}return o},concat:function(t,e){var n=e.separator,i=void 0===n?" ":n;return t.map((function(t){return t.join(i)}))},indent:function(t,e){var n=e.level,i=void 0===n?0:n,r=e.pattern,s=void 0===r?"\t":r;return t.map((function(t){return s.repeat(i)+t}))},tag:function(t,e){var n=e.level,i=void 0===n?"":n,r=e.levelColor,s=void 0===r?{info:o.cyan,warn:o.yellow,debug:o.blue,error:o.bright.red}:r;return a((s[i]||function(t){return t})(i.toUpperCase().padStart(6)+"\t"),t)},time:function(t,e){var n=e.when,i=void 0===n?new Date:n,r=e.format,s=void 0===r?"locale":r,c=e.locale,u=void 0===c?[]:c,l=e.options,h=void 0===l?{}:l,p=e.print;return a((void 0===p?function(t){return o.darkGray("iso"===s?t.toISOString():"locale"===s?t.toLocaleString(u,h):"utc"===s?t.toUTCString():t.toString())+"\t"}:p)(i),t)},locate:function(t,e){var n=e.shift,i=void 0===n?0:n,r=e.where,a=void 0===r?(new s).clean().at(1+i):r,c=e.join,u=void 0===c?function(t,e,n){return t&&n?t+e+n:t||n}:c,l=e.print,p=void 0===l?function(t){var e=t.calleeShort,n=t.fileName,i=void 0===n?[]:n,r=t.line,s=void 0===r?[]:r;return o.darkGray("("+u(e," @ ",u(i,":",s))+")")}:l;return function(t,e){for(var n=t.length-1;n>=0;n--)if(0===n||!h(t[n])){t[n]=(i=t[n],u(i," ",p(a)));break}var i;return t}(t)},join:function(t,e){var n=e.linebreak,i=void 0===n?"\n":n;return t.join(i)},render:function(t,e){var n=e.engine,s=void 0===n?"undefined"!=typeof window&&window.window===window&&window.navigator?navigator.userAgent.indexOf("Chrome")>=0?"chrome":"generic":"ansi":n,a=e.engines,c=void 0===a?{}:a,u=e.consoleMethod,l=void 0===u?"log":u,h=e.defaults,p=void 0===h?{ansi:function(t){return console[l](t)},chrome:function(t){var e;return(e=console)[l].apply(e,i(o.parse(t).asChromeConsoleLogArguments))},generic:function(t){return console[l](o.strip(t))}}:h;return t&&r.assign(p,c)[s](t),t},returnValue:function(t,e){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,s=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw s}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(e.initialArguments,1)[0]}}).configure({time:!1,tag:!1}).methods({get noop(){return c({returnValue:function(t){return t[0]}}).methods(this.methods_)},get null(){return this.noop},indent:function(t){return this.configure({indent:{level:t}})},get error(){return this.configure({tag:{level:"error"},render:{consoleMethod:"error"}})},get warn(){return this.configure({tag:{level:"warn"},render:{consoleMethod:"warn"}})},get info(){return this.configure({tag:{level:"info"},render:{consoleMethod:"info"}})},get debug(){return this.configure({tag:{level:"debug"},render:{consoleMethod:"debug"}})},maxArrayLength:function(t){return this.configure({stringify:{maxArrayLength:t}})},maxObjectLength:function(t){return this.configure({stringify:{maxObjectLength:t}})},maxDepth:function(t){return this.configure({stringify:{maxDepth:t}})},maxLength:function(t){return this.configure({stringify:{maxLength:t}})},get unlimited(){return this.configure({stringify:{maxStringLength:Number.MAX_VALUE,maxObjectLength:Number.MAX_VALUE,maxArrayLength:Number.MAX_VALUE,maxDepth:Number.MAX_VALUE,maxErrorMessageLength:Number.MAX_VALUE}})},get noPretty(){return this.configure({stringify:{pretty:!1}})},get noFancy(){return this.configure({stringify:{fancy:!1}})},get noRightAlignKeys(){return this.configure({stringify:{rightAlignKeys:!1}})},get noLocate(){return this.configure({locate:!1})},precision:function(t){return this.configure({stringify:{precision:t}})},get serialize(){return this.before("render")},get deserialize(){return this.from("render")},newline:function(){return this.from("join")([""])},handleNodeErrors:function(){var t=this;return process.on("uncaughtException",(function(e){t.bright.red.error.noLocate(e),process.exit(1)})),process.on("unhandledRejection",(function(e){t.bright.red.error.noLocate(e),process.exit(1)})),this}});o.names.forEach((function(t){var e,n;d.methods((e={},(n={})[t]=n[t]||{},n[t].get=function(){return this.configure({"concat+":function(e){return e.map(o[t])}})},function(t,e){for(var n in e){var i=e[n];i.configurable=i.enumerable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,n,i)}}(e,n),e))})),t.exports=d},455:t=>{"use strict";t.exports=t=>{if("number"!=typeof t)throw new TypeError("Expected a number");const e=t>0?Math.floor:Math.ceil;return{days:e(t/864e5),hours:e(t/36e5)%24,minutes:e(t/6e4)%60,seconds:e(t/1e3)%60,milliseconds:e(t)%1e3,microseconds:e(1e3*t)%1e3,nanoseconds:e(1e6*t)%1e3}}},347:t=>{"use strict";var e=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,s=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw s}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(t,e){for(var n in e)Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n));return t},i=t.exports=function(t,r){var s={},o=Reflect.ownKeys(t),a=Object.assign((function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return o.reduce((function(t,n){return s[n].call(a,t,{initialArguments:e})}),e)}),{configure:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={},n=!0,r=!1,c=void 0;try{for(var u,l=function(){var n=u.value,i=t[n],r=t["+"+n]||function(t){return t},o=t[n+"+"]||function(t){return t},a="boolean"==typeof i?{yes:i}:i||{};e[n]=function(t,e){var c="function"==typeof i?i:s[n],u=Object.assign({},a,e),l=!1===u.yes?function(t){return t}:c;return o.call(this,l.call(this,r.call(this,t,u),u),u)}},h=o[Symbol.iterator]();!(n=(u=h.next()).done);n=!0)l()}catch(t){r=!0,c=t}finally{try{!n&&h.return&&h.return()}finally{if(r)throw c}}return i(e,a).methods(this.methods_)},from:function(t){var e=null,n=!0,r=!1,c=void 0;try{for(var u,l=o[Symbol.iterator]();!(n=(u=l.next()).done);n=!0){var h=u.value;h===t&&(e={takeFirstArgument:function(t){return t[0]}}),e&&(e[h]=s[h])}}catch(t){r=!0,c=t}finally{try{!n&&l.return&&l.return()}finally{if(r)throw c}}return i(e,a)},before:function(t){var e={},n=!0,r=!1,c=void 0;try{for(var u,l=o[Symbol.iterator]();!(n=(u=l.next()).done);n=!0){var h=u.value;if(h===t)break;e[h]=s[h]}}catch(t){r=!0,c=t}finally{try{!n&&l.return&&l.return()}finally{if(r)throw c}}return i(e,a)},methods_:{},methods:function(t){return n(this,n(this.methods_,t))},get impl(){return s},get prev(){return r}}),c=!0,u=!1,l=void 0;try{for(var h,p=function(t){for(var e=[],n=Object.keys(t),i=0;i<n.length;++i)e.push([n[i],t[n[i]]]);return e}(t)[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var d=e(h.value,2),f=d[0],m=d[1];s[f]=m.bind(a)}}catch(t){u=!0,l=t}finally{try{!c&&p.return&&p.return()}finally{if(u)throw l}}return a}},258:(t,e,n)=>{"use strict";const i=n(455);t.exports=(t,e={})=>{if(!Number.isFinite(t))throw new TypeError("Expected a finite number");e.colonNotation&&(e.compact=!1,e.formatSubMilliseconds=!1,e.separateMilliseconds=!1,e.verbose=!1),e.compact&&(e.secondsDecimalDigits=0,e.millisecondsDecimalDigits=0);const n=[],r=(t,i,r,s)=>{if(!(0!==n.length&&e.colonNotation||0!==t||e.colonNotation&&"m"===r))return;let o,a;if(s=(s||t||"0").toString(),e.colonNotation){o=n.length>0?":":"",a="";const t=s.includes(".")?s.split(".")[0].length:s.length,e=n.length>0?2:1;s="0".repeat(Math.max(0,e-t))+s}else o="",a=e.verbose?" "+(c=i,1===t?c:`${c}s`):r;var c;n.push(o+s+a)},s=i(t);if(r(Math.trunc(s.days/365),"year","y"),r(s.days%365,"day","d"),r(s.hours,"hour","h"),r(s.minutes,"minute","m"),e.separateMilliseconds||e.formatSubMilliseconds||!e.colonNotation&&t<1e3)if(r(s.seconds,"second","s"),e.formatSubMilliseconds)r(s.milliseconds,"millisecond","ms"),r(s.microseconds,"microsecond","µs"),r(s.nanoseconds,"nanosecond","ns");else{const t=s.milliseconds+s.microseconds/1e3+s.nanoseconds/1e6,n="number"==typeof e.millisecondsDecimalDigits?e.millisecondsDecimalDigits:0,i=t>=1?Math.round(t):Math.ceil(t),o=n?t.toFixed(n):i;r(Number.parseFloat(o,10),"millisecond","ms",o)}else{const n=((t,e)=>{const n=Math.floor(t*10**e+1e-7);return(Math.round(n)/10**e).toFixed(e)})(t/1e3%60,"number"==typeof e.secondsDecimalDigits?e.secondsDecimalDigits:1),i=e.keepDecimalsOnWholeSeconds?n:n.replace(/\.0+$/,"");r(Number.parseFloat(i,10),"second","s",i)}if(0===n.length)return"0"+(e.verbose?" milliseconds":"ms");if(e.compact)return n[0];if("number"==typeof e.unitCount){const t=e.colonNotation?"":" ";return n.slice(0,Math.max(e.unitCount,1)).join(t)}return e.colonNotation?n.join(""):n.join(" ")}},299:t=>{"use strict";var e=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,s=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw s}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};const n="[][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-PRZcf-nqry=><]",i=new RegExp("(?:"+n+")|[\0-\b\v-­​\u2028\u2029\ufeff︀-️]","g"),r=new RegExp("(?:"+n+")|[\n\0-\b\v-­​\u2028\u2029\ufeff︀-️]","g"),s=new RegExp("((?:"+n+")|[\t\n\0-\b\v-­​\u2028\u2029\ufeff︀-️])?([^\t\n\0-\b\v-­​\u2028\u2029\ufeff︀-️]*)","g");t.exports={zeroWidthCharacters:r,ansiEscapeCodes:new RegExp(n,"g"),strlen:t=>Array.from(t.replace(r,"")).length,isBlank:t=>0===t.replace(r,"").replace(/\s/g,"").length,blank:t=>Array.from(t.replace(i,"")).map((t=>"\t"===t||"\n"===t?t:" ")).join(""),partition(t){for(var e,n=[];s.lastIndex!==t.length&&(e=s.exec(t));)n.push([e[1]||"",e[2]]);return s.lastIndex=0,n},first(n,i){let r="",s=0;for(const a of t.exports.partition(n)){var o=e(a,2);const t=o[0],n=o[1],c=Array.from(n).slice(0,i-s);r+=t+c.join(""),s+=c.length}return r}}},490:t=>{"use strict";t.exports=(t,e)=>{const n=t||[],i=[];let r={label:void 0,items:[n.first]};return n.forEach((t=>{const n=e(t);r.label!==n&&r.items.length?i.push(r={label:n,items:[t]}):r.items.push(t)})),i}},171:(t,e,n)=>{"use strict";t=n.nmd(t);const i=Object,r="undefined"!=typeof window&&window.window===window&&window.navigator,s=r?null:t.require,o=t=>t[t.length-1],a=n(144),c=n(490),u=n(369),l=t=>t.replace(/\\/g,"/"),h=r?window.location.href:l(process.cwd())+"/";class p{constructor(t,e){const n=t,i=t&&t instanceof SyntaxError&&!r;if(t||(t=new Error,e=void 0===e?1:e),t instanceof Error&&(t=t.stack||""),"string"==typeof t&&(t=this.rawParse(t).slice(e).map((t=>this.extractEntryMetadata(t)))),Array.isArray(t)){if(i){const e=s("util").inspect(n).split("\n"),i=e[0].split(":"),r=i.pop(),o=i.join(":");o&&t.unshift({file:l(o),line:r,column:(e[2]||"").indexOf("^")+1,sourceLine:e[1],callee:"(syntax error)",syntaxError:!0})}this.items=t}else this.items=[]}extractEntryMetadata(t){const e=this.decomposePath(t.file||""),n=e[0],r=e[1];return i.assign(t,{calleeShort:t.calleeShort||o((t.callee||"").split(".")),fileRelative:n,fileShort:this.shortenPath(n),fileName:o((t.file||"").split("/")),thirdParty:this.isThirdParty(n,r)&&!t.index,externalDomain:r})}shortenPath(t){return t.replace(/^node_modules\//,"").replace(/^webpack\/bootstrap\//,"").replace(/^__parcel_source_root\//,"")}decomposePath(t){let e=t;r&&(e=e.replace(h,""));const n=e.match(/^(http|https)\:\/\/?([^\/]+)\/(.*)/),i=n?n[2]:void 0;return e=n?n[3]:e,r||(e=s("path").relative(h,e)),[l(e).replace(/^.*\:\/\/?\/?/,""),i]}isThirdParty(t,e){return e||"~"===t[0]||"/"===t[0]||0===t.indexOf("node_modules")||0===t.indexOf("webpack/bootstrap")}rawParse(t){return(t||"").split("\n").map((t=>{let e,n,i,s,o=[];if((i=(t=t.trim()).match(/at (.+) \(eval at .+ \((.+)\), .+\)/))||(i=t.match(/at (.+) \((.+)\)/))||"at "!==t.slice(0,3)&&(i=t.match(/(.*)@(.*)/)))e=i[1],n="native"===i[2],o=(i[2].match(/(.*):(\d+):(\d+)/)||i[2].match(/(.*):(\d+)/)||[]).slice(1);else{if(!(s=t.match(/^(at\s+)*(.+):(\d+):(\d+)/)))return;o=s.slice(2)}return e&&!o[0]&&"Array"===e.split(".")[0]&&(n=!0),{beforeParse:t,callee:e||"",index:r&&o[0]===window.location.href,native:n||!1,file:l(o[0]||""),line:parseInt(o[1]||"",10)||void 0,column:parseInt(o[2]||"",10)||void 0}})).filter((t=>void 0!==t))}withSourceAt(t){return this.items[t]&&this.withSource(this.items[t])}withSourceAsyncAt(t){return this.items[t]&&this.withSourceAsync(this.items[t])}withSource(t){if(this.shouldSkipResolving(t))return t;{let e=a(t.file||"").resolve(t);return e.sourceFile?this.withSourceResolved(t,e):t}}withSourceAsync(t){return this.shouldSkipResolving(t)?Promise.resolve(t):a.async(t.file||"").then((e=>e.resolve(t))).then((e=>this.withSourceResolved(t,e))).catch((e=>this.withSourceResolved(t,{error:e,sourceLine:""})))}shouldSkipResolving(t){return t.sourceFile||t.error||t.file&&t.file.indexOf("<")>=0}withSourceResolved(t,e){return e.sourceFile&&!e.sourceFile.error&&(e.file=l(e.sourceFile.path),e=this.extractEntryMetadata(e)),e.sourceLine.includes("// @hide")&&(e.sourceLine=e.sourceLine.replace("// @hide",""),e.hide=!0),(e.sourceLine.includes("__webpack_require__")||e.sourceLine.includes("/******/ ({"))&&(e.thirdParty=!0),i.assign({sourceLine:""},t,e)}withSources(){return this.map((t=>this.withSource(t)))}withSourcesAsync(){return Promise.all(this.items.map((t=>this.withSourceAsync(t)))).then((t=>new p(t)))}mergeRepeatedLines(){return new p(c(this.items,(t=>t.file+t.line)).map((t=>t.items.slice(1).reduce(((t,e)=>(t.callee=(t.callee||"<anonymous>")+" → "+(e.callee||"<anonymous>"),t.calleeShort=(t.calleeShort||"<anonymous>")+" → "+(e.calleeShort||"<anonymous>"),t)),i.assign({},t.items[0])))))}clean(){const t=this.withSources().mergeRepeatedLines();return t.filter(t.isClean.bind(t))}cleanAsync(){return this.withSourcesAsync().then((t=>(t=t.mergeRepeatedLines()).filter(t.isClean.bind(t))))}isClean(t,e){return 0===e||!(t.thirdParty||t.hide||t.native)}at(t){return i.assign({beforeParse:"",callee:"<???>",index:!1,native:!1,file:"<???>",line:0,column:0},this.items[t])}asTable(t){const e=t&&t.maxColumnWidths||this.maxColumnWidths(),n=(t,e)=>t&&(t.length>e?t.slice(0,e-1)+"…":t),i=this.map((t=>{return["at "+n(t.calleeShort,e.callee),(i=t.fileShort&&t.fileShort+":"+t.line||"",r=e.file,i&&(i.length>r?"…"+i.slice(-(r-1)):i)),n((t.sourceLine||"").trim()||"",e.sourceLine)];var i,r}));return u(i.items)}maxColumnWidths(){return{callee:30,file:60,sourceLine:80}}static resetCache(){a.resetCache(),a.async.resetCache()}static locationsEqual(t,e){return t.file===e.file&&t.line===e.line&&t.column===e.column}}["map","filter","slice","concat"].forEach((t=>{p.prototype[t]=function(){return new p(this.items[t].apply(this.items,arguments))}})),t.exports=p},778:(t,e,n)=>{"use strict";const{blank:i}=n(299);t.exports=(t,e)=>{const n=Array.isArray(e),r=n?e:e.split("\n"),s=i(t),o=r.map(((e,n)=>0===n?t+e:s+e));return n?o:o.join("\n")}},811:(t,e,n)=>{"use strict";const i=n(778),r="undefined"!=typeof window&&window.window===window&&window.navigator,s=(t,e)=>t.reduce(((t,n)=>Math.max(t,e?e(n):n)),0),o=Number.isInteger||(t=>"number"==typeof t&&isFinite(t)&&Math.floor(t)===t),a=t=>t.replace(/\n/g,"\\n").replace(/\'/g,"\\'").replace(/\"/g,'\\"'),{first:c,strlen:u}=n(299),l=(t,e)=>t&&(u(t)<=e?t:c(t,e-1)+"…"),h=t=>{const e=i=>{const s=Object.assign({parents:new Set,siblings:new Map},t);if("auto"===t.pretty){const n=e.configure({pretty:!1,siblings:new Map})(i);return n.length<=t.maxLength?n:e.configure({pretty:!0,siblings:new Map})(i)}var c=t.formatter&&t.formatter(i,e);if("string"==typeof c)return c;if("undefined"!=typeof jQuery&&i instanceof jQuery?i=i.toArray():(t=>t instanceof Float32Array||t instanceof Float64Array||t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Int32Array||t instanceof Uint32Array)(i)?i=Array.from(i):(t=>"undefined"!=typeof URL&&t instanceof URL)(i)&&(i=i.toString()),r&&i===window)return"window";if(r||void 0===n.g||i!==n.g){if(null===i)return"null";if(i instanceof Date)return s.pure?i.getTime():"📅  "+i.toString();if(i instanceof RegExp)return s.json?'"'+i.toString()+'"':i.toString();if(s.parents.has(i))return s.pure?void 0:"<cyclic>";if(!s.pure&&s.siblings.has(i))return"<ref:"+s.siblings.get(i)+">";if(i&&"undefined"!=typeof Symbol&&(c=i[Symbol.for("String.ify")])&&"function"==typeof c&&"string"==typeof(c=c.call(i,e.configure(s))))return c;if("function"==typeof i)return t.pure?i.toString():i.name?"<function:"+i.name+">":"<function>";if("string"==typeof i)return'"'+a(l(i,t.pure?Number.MAX_SAFE_INTEGER:t.maxStringLength))+'"';if(i instanceof Promise&&!s.pure)return"<Promise>";if("object"==typeof i){s.parents.add(i),s.siblings.set(i,s.siblings.size);const t=e.configure(Object.assign({},s,{pretty:!1!==s.pretty&&"auto",depth:s.depth+1})).object(i);return s.parents.delete(i),t}return"number"==typeof i&&!o(i)&&t.precision>0?i.toFixed(t.precision):String(i)}return"global"};return((t,e)=>{for(const n in e)Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})(e,{state:t,configure:e=>h(Object.assign({},t,e)),get pretty(){return e.configure({pretty:!0})},get noPretty(){return e.configure({pretty:!1})},get noFancy(){return e.configure({fancy:!1})},get noRightAlignKeys(){return e.configure({rightAlignKeys:!1})},get json(){return e.configure({json:!0,pure:!0})},get pure(){return e.configure({pure:!0})},maxStringLength:(t=Number.MAX_SAFE_INTEGER)=>e.configure({maxStringLength:t}),maxArrayLength:(t=Number.MAX_SAFE_INTEGER)=>e.configure({maxArrayLength:t}),maxObjectLength:(t=Number.MAX_SAFE_INTEGER)=>e.configure({maxObjectLength:t}),maxDepth:(t=Number.MAX_SAFE_INTEGER)=>e.configure({maxDepth:t}),maxLength:(t=Number.MAX_SAFE_INTEGER)=>e.configure({maxLength:t}),indentation:t=>e.configure({indentation:t}),precision:t=>e.configure({precision:t}),formatter:t=>e.configure({formatter:t}),limit:l,rightAlign:t=>{var e=s(t,(t=>t.length));return t.map((t=>" ".repeat(e-t.length)+t))},object:n=>{n instanceof Set?n=Array.from(n.values()):n instanceof Map&&(n=Array.from(n.entries()));const o=Array.isArray(n);if(r){if(n instanceof Element)return"<"+(n.tagName.toLowerCase()+(n.id&&"#"+n.id||"")+(n.className&&"."+n.className||""))+">";if(n instanceof Text)return"@"+e.limit(n.wholeText,20)}const c=function(t){for(var e=[],n=Object.keys(t),i=0;i<n.length;++i)e.push([n[i],t[n[i]]]);return e}(n),u=t.depth>t.maxDepth,l=o?c.length>t.maxArrayLength:c.length>t.maxObjectLength;if(!t.pure&&(u||l))return"<"+(o?"array":"object")+"["+c.length+"]>";const h=t.json?t=>'"'+a(t)+'"':t=>/^[A-z][A-z0-9]*$/.test(t)?t:"'"+a(t)+"'";if(t.pretty){const r=function(t){for(var e=[],n=Object.keys(t),i=0;i<n.length;++i)e.push(t[n[i]]);return e}(n),a=t.rightAlignKeys&&t.fancy,c=(a?e.rightAlign:t=>t)(Object.keys(n).map((t=>h(t)+": "))),u=r.map(e),l=o?"[":"{",p=o?"]":"}";if(t.fancy){const t=u.map(((t,e)=>a?"["===t[0]||"{"===t[0]?3:"string"==typeof r[e]?1:0:0)),e=s(t),n=t.map(((t,n)=>{const r=" ".repeat(e-t)+u[n];return o?r:i(c[n],r)})),h=i(l+" ",n.join(",\n")),d=h.split("\n"),f=d[d.length-1];return h+(" ".repeat(s(d,(t=>t.length))-f.length)+" ")+p}{const e=t.indentation.repeat(t.depth);return l+"\n"+u.map(((t,n)=>e+(o?t:c[n]+t))).join(",\n")+"\n"+t.indentation.repeat(t.depth-1)+p}}{const t=c.map((t=>(o?"":h(t[0])+": ")+e(t[1]))).join(", ");return o?"["+t+"]":"{ "+t+" }"}}}),e};t.exports=h({depth:0,pure:!1,json:!1,maxDepth:5,maxLength:50,maxArrayLength:60,maxObjectLength:200,maxStringLength:60,precision:void 0,formatter:void 0,pretty:"auto",rightAlignKeys:!0,fancy:!0,indentation:"    "})},820:(t,e,n)=>{"use strict";var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function r(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};var o,a,c=function(){function t(){this._components=[]}return Object.defineProperty(t.prototype,"Components",{get:function(){return this._components},enumerable:!1,configurable:!0}),t.prototype.AddComponent=function(t){this._components.push(t),t.Entity=this},t.prototype.GetComponent=function(t){for(var e=0,n=this._components;e<n.length;e++){var i=n[e];if(i instanceof t)return i}throw new Error("Component "+t.name+" not found on Entity "+this.constructor.name)},t.prototype.RemoveComponent=function(t){for(var e,n,i=0;i<this._components.length;i++){var r=this._components[i];if(r instanceof t){e=r,n=i;break}}e&&n&&(e.Entity=null,this._components.splice(n,1))},t.prototype.HasComponent=function(t){for(var e=0,n=this._components;e<n.length;e++)if(n[e]instanceof t)return!0;return!1},t.prototype.Awake=function(){for(var t=0,e=this._components;t<e.length;t++)e[t].Awake()},t.prototype.Update=function(t){for(var e=0,n=this._components;e<n.length;e++)n[e].Update(t)},t}(),u=function(){function t(e,n,i,r){if(!t.IsValidChannel(e))throw new Error("Provided incorrect value for Red channel");if(!t.IsValidChannel(n))throw new Error("Provided incorrect value for Green channel");if(!t.IsValidChannel(i))throw new Error("Provided incorrect value for Blue channel");if(!t.IsValidChannel(r,!0))throw new Error("Provided incorrect value for Alpha channel");this.R=e,this.G=n,this.B=i,this.A=r}return t.IsValidChannel=function(t,e){return void 0===e&&(e=!1),!(t<0||t>(e?1:255)||!e&&t%1!=0)},t.FromString=function(e){var n=e.replace(new RegExp(/\(|\)|[A-Za-z]/g),"").split(","),i=Number(n[0]),r=Number(n[1]),s=Number(n[2]),o=Number(n[3]);if(isNaN(i)||isNaN(r)||isNaN(s)||isNaN(o))throw new Error("Invalid string");return new t(i,r,s,o)},t.prototype.AsString=function(){return"rgba("+this.R+", "+this.G+", "+this.B+", "+this.A+")"},t}(),l=function(){function t(){}return Object.defineProperty(t,"nodeSize",{get:function(){var t,e,n=(t=document.body,e=document.documentElement,{height:Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight),width:Math.max(t.scrollWidth,t.offsetWidth,e.clientWidth,e.scrollWidth,e.offsetWidth)}),i=n.height,r=n.width;return(Math.max(720,Math.min(i,r))-this.nodeOffset*this.dimension*1.5)/this.dimension},enumerable:!1,configurable:!0}),t.dimension=16,t.nodeOffset=10,t.color=new u(245,245,245,1),t}();!function(t){t[t.DEV=0]="DEV",t[t.PROD=1]="PROD"}(o||(o={})),function(t){t[t.SANDBOX=240]="SANDBOX",t[t.EASY=120]="EASY",t[t.MEDIUM=60]="MEDIUM",t[t.HARD=30]="HARD"}(a||(a={}));var h=new(function(){function t(){this.grid=l,this.snake={speed:a.EASY},this.env=o.PROD}return Object.defineProperty(t.prototype,"isDev",{get:function(){return this.env===o.DEV},enumerable:!1,configurable:!0}),t}());window.gameSettings=h,window.gameDebug=function(){h.env=o.DEV};var p=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},t.prototype.Clone=function(){return new t(this.x,this.y)},t.prototype.Sub=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.Module=function(){return Math.sqrt(this.x^2+this.y^2)},t.prototype.Add=function(e){return new t(this.x+e.x,this.y+e.y)},t.Resize=function(e,n,i,r){if(!(e<=1)){for(var s=0;s<Math.min(e-1,16);s++){var o=n,a=o.x/8/8,c=o.y/8/8;i=i.Add(new t(a,c)),r=r.Add(new t(-a,-c))}return{Start:i,End:r}}},Object.defineProperty(t,"Origin",{get:function(){return new t(0,0)},enumerable:!1,configurable:!0}),t.NodeArgsFromIndex=function(e,n){var i=void 0===n?{}:n,r=i.size,s=void 0===r?new t(h.grid.nodeSize,h.grid.nodeSize):r,o=i.offset,a=void 0===o?h.grid.nodeOffset:o,c=e.x,u=e.y,l=new t(c*(s.x+a)+a,u*(s.y+a)+a);return{Start:l,End:new t(l.x+s.x,l.y+s.y),Index:e}},t}(),d=function(){function t(t,e,n){this.root=t,this.Size=e,this.name=n}return t.prototype.Awake=function(){var t=document.createElement("canvas");t.id=this.name,t.setAttribute("width",this.Size.x+"px"),t.setAttribute("height",this.Size.y+"px"),this._elm=t,this.root.AddElement(t);var e=this._elm.getContext("2d");if(!e)throw new Error("Context `2d` identifier is not supported");this._ctx=e},t.prototype.Rotate=function(t){return this._rotateArg=t,this},t.prototype._rotate=function(t,e){if(this._rotateArg){var n=t.x+e.x/2,i=t.y+e.y/2;this._ctx.translate(n,i),this._ctx.rotate(this._rotateArg),this._ctx.translate(-n,-i)}},t.prototype._clearRotation=function(){this._rotateArg&&(this._rotateArg=void 0,this._ctx.setTransform(1,0,0,1,0,0))},t.prototype.FillRect=function(t,e,n){this._rotate(t,e),this._ctx.beginPath(),this._ctx.fillStyle=n.AsString(),this._ctx.rect(t.x,t.y,e.x,e.y),this._ctx.fill(),this._clearRotation()},t.prototype.ClearRect=function(t,e){this._ctx.clearRect(t.x,t.y,e.x,e.y),this._clearRotation()},t.prototype.FillCircle=function(t,e,n){this._ctx.beginPath(),this._ctx.arc(t.x,t.y,e,0,2*Math.PI),this._ctx.fillStyle=n.AsString(),this._ctx.fill(),this._clearRotation()},t.prototype.RenderImage=function(t,e,n){window.__DEV__||(this._rotate(t,e),this._ctx.drawImage(n,t.x,t.y,e.x,e.y)),this._clearRotation()},Object.defineProperty(t.prototype,"Element",{get:function(){return this._elm},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Context",{get:function(){return this._ctx},enumerable:!1,configurable:!0}),t.prototype.hasSameSize=function(t){return this.Size.equals(t)},t.prototype.Resize=function(t){this.Size=t;var e=this._elm,n=this._ctx.font;e.setAttribute("width",this.Size.x+"px"),e.setAttribute("height",this.Size.y+"px");var i=e.getContext("2d");i&&(i.font=n,this._ctx=i)},Object.defineProperty(t.prototype,"FontSize",{get:function(){return this.Size.x/30},enumerable:!1,configurable:!0}),t}(),f=function(){function t(t){this.Size=t}return Object.defineProperty(t.prototype,"Elm",{get:function(){return this._elm},enumerable:!1,configurable:!0}),t.prototype.Awake=function(){var t=document.createElement("div");t.id="root-elm",document.body.style.height="100%",document.body.style.minHeight="100%",document.body.style.width="100%",document.body.style.minWidth="100%",t.style.height="100%",t.style.minHeight="100%",t.style.width="100%",t.style.minWidth="100%",document.body.appendChild(t),this._elm=t},t.prototype.AddElement=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach((function(e){return t._elm.appendChild(e)}))},t}(),m=function(){function t(){}return t.ensureSize=function(){this.checkAndResize(this.Background),this.checkAndResize(this.Foreground)},t.checkAndResize=function(t){t.hasSameSize(this.Size)||t.Resize(this.Size)},Object.defineProperty(t,"Root",{get:function(){if(!this._root){var t=new f(this.Size);t.Awake(),this._root=t}return this._root},enumerable:!1,configurable:!0}),Object.defineProperty(t,"Background",{get:function(){return this._background||(this._background=this.InitCanvas("Background")),this._background},enumerable:!1,configurable:!0}),Object.defineProperty(t,"Foreground",{get:function(){return this._foreground||(this._foreground=this.InitCanvas("Foreground")),this._foreground},enumerable:!1,configurable:!0}),Object.defineProperty(t,"Size",{get:function(){var t=(h.grid.nodeSize+h.grid.nodeOffset)*h.grid.dimension+h.grid.nodeOffset;return new p(t,t)},enumerable:!1,configurable:!0}),t.InitCanvas=function(t){var e=new d(this.Root,this.Size,t);return e.Awake(),e},t}(),g=function(){function t(t){void 0===t&&(t=m.Background),this.Canvas=t}return t.prototype.Awake=function(){this.Clear()},t.prototype.Update=function(t){this.Clear(),this.Entity.AdjustSize(),this.Draw()},t.prototype.Draw=function(){this.Canvas.FillRect(this.Entity.Start,this.Entity.Size,this.Entity.color)},t.prototype.Clear=function(){this.Canvas.ClearRect(this.Entity.Start,this.Entity.Size)},t}(),_=function(t){function e(e,n,i,r,s){void 0===r&&(r=h.grid.color);var o=t.call(this)||this;return o.Start=e,o.End=n,o.Index=i,o.color=r,o.canvas=s,o}return r(e,t),e.prototype.AdjustSize=function(){if(this.Size.x!=h.grid.nodeSize){var t=p.NodeArgsFromIndex(this.Index),e=t.Start,n=t.End,i=t.Index;this.Start=e,this.End=n,this.Index=i}},e.prototype.Update=function(e){t.prototype.Update.call(this,e)},e.prototype.Awake=function(){this.AddComponent(new g(this.canvas)),t.prototype.Awake.call(this)},Object.defineProperty(e.prototype,"Size",{get:function(){return new p(this.End.x-this.Start.x,this.End.y-this.Start.y)},enumerable:!1,configurable:!0}),e}(c),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._nodes=[],e}return r(e,t),Object.defineProperty(e.prototype,"Nodes",{get:function(){return this._nodes},enumerable:!1,configurable:!0}),e.prototype.Awake=function(){t.prototype.Awake.call(this),this.InitNodes();for(var e=0,n=this._nodes;e<n.length;e++)n[e].Awake()},e.prototype.Update=function(e){t.prototype.Update.call(this,e);for(var n=0,i=this._nodes;n<i.length;n++)i[n].Update(e)},e.prototype.InitNodes=function(){for(var t=h.grid.nodeSize,e=h.grid.nodeOffset,n=0;n<h.grid.dimension;n++)for(var i=0;i<h.grid.dimension;i++){var r=new p(i*(t+e)+e,n*(t+e)+e),s=new p(r.x+t,r.y+t),o=new p(i,n),a=new _(r,s,o);this._nodes.push(a)}},e}(c),y=n(258),w=n.n(y),b=function(){function t(){var t=document.createElement("div");this.applyStyleObject(t,this.divStyle());var e=document.createElement("div");this.applyStyleObject(e,this.divStyle("5%"));var n=document.createElement("div");this.applyStyleObject(n,this.divStyle("7%")),this._scoreElm=t,this._timeElm=e,this._fpsElm=n,m.Root.AddElement(this.createMenuWrapperElm(),t,e,n)}return t.prototype.restartButtonElm=function(){var t=this,e=document.createElement("button");return this.applyStyleObject(e,this.buttonStyle(!0)),e.innerText="Restart",this._restartButtonElm=e,e.onclick=function(){return t.Entity.Restart()},e},t.prototype.resumeButtonElm=function(){var t=this,e=document.createElement("button");return this.applyStyleObject(e,this.buttonStyle(!0)),e.innerText="Resume",this._resumeButtonElm=e,e.onclick=function(){return t.Entity.Resume()},e},t.prototype.loadButtonElm=function(){var t=this,e=document.createElement("button");return this.applyStyleObject(e,this.buttonStyle(!0)),e.innerText="Load",e.disabled=!0,this._loadButtonElm=e,e.onclick=function(){return t.Entity.Load()},e},t.prototype.buttonStyle=function(t){return void 0===t&&(t=!1),{fontSize:"1rem",height:"2rem",width:"50%",margin:"1rem",borderRadius:"4px",backgroundColor:t?"rgba(255, 204, 153, 1)":"",boxShadow:t?"0 0 1px grey":""}},t.prototype.saveButtonElm=function(){var t=this,e=document.createElement("button");return this.applyStyleObject(e,this.buttonStyle(!0)),e.innerText="Save",this._saveButtonElm=e,e.onclick=function(){return t.Entity.Save()},e},t.prototype.maxScoreElm=function(){var t=document.createElement("div");return this.applyStyleObject(t,s(s({},this.buttonStyle()),{fontSize:"1.5rem",textAlign:"center"})),this._maxScoreElm=t,t},t.prototype.savedDataElm=function(){var t=document.createElement("div");return this.applyStyleObject(t,s(s({},this.buttonStyle()),{textAlign:"center"})),this._savedDataElm=t,t},t.prototype.createMenuElm=function(){var t=document.createElement("div");return this.applyStyleObject(t,{display:"flex",flexDirection:"column",borderRadius:"4px",border:"1px solid grey",zIndex:"4",height:"50%",width:"50%",boxShadow:"0 0 4px grey",background:"white",alignItems:"center"}),this._menuElm=t,t.appendChild(this.maxScoreElm()),t.appendChild(this.resumeButtonElm()),t.appendChild(this.saveButtonElm()),t.appendChild(this.savedDataElm()),t.appendChild(this.loadButtonElm()),t.appendChild(this.restartButtonElm()),t.onclick=function(t){return t.stopPropagation()},t},t.prototype.onWrapperPress=function(){this.Entity.isPaused?this.Entity.Resume():this.Entity.Pause()},t.prototype.createMenuWrapperElm=function(){var t=document.createElement("div");return t.style.position="absolute",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.height="100%",t.style.width="100%",t.appendChild(this.createMenuElm()),this._menuWrapperElm=t,t.onclick=this.onWrapperPress.bind(this),t},t.prototype.applyStyleObject=function(t,e){Object.entries(e).forEach((function(e){var n=e[0],i=e[1];return t.style[n]=i}))},t.prototype.divStyle=function(t){return void 0===t&&(t="3%"),{fontSize:"1rem",fontWeight:"bold",zIndex:"100",marginLeft:"10%",marginTop:t,position:"absolute",borderRadius:"4px",border:"1px solid grey",background:"rgba(255, 204, 153, 1)",padding:"0.2% 0.6%",width:"8%",boxShadow:"0 0 4px grey"}},t.prototype.Awake=function(){this.Clear()},t.prototype.Update=function(t){this.Clear(),this._scoreElm.innerText="SCORE: "+this.Entity.Score,this._timeElm.innerText="TIME: "+w()(this.Entity.GameTime,{secondsDecimalDigits:2}),this._fpsElm.innerText="FPS: "+this.Entity.FPS.toFixed(2),this.Entity.isPaused?this._menuElm.style.display="flex":this._menuElm.style.display="none";var e=this.Entity.SavedData;e?(this._loadButtonElm.disabled=!1,this._savedDataElm.innerText="Score: "+e.gameData.score+", Time: "+w()(e.gameData.matchTime,{secondsDecimalDigits:2})):(this._loadButtonElm.disabled=!0,this._savedDataElm.innerText="No saved data"),this._maxScoreElm.innerText="Highest Score: "+this.Entity.HighestScore},t.prototype.Clear=function(){},t}(),x=function(t){function e(e){var n=t.call(this)||this;return n.gameState=e,n}return r(e,t),e.prototype.Awake=function(){this.AddComponent(new b),t.prototype.Awake.call(this)},e.prototype.Update=function(e){t.prototype.Update.call(this,e)},Object.defineProperty(e.prototype,"GameTime",{get:function(){return this.gameState.MatchTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Score",{get:function(){return this.gameState.Score},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"FPS",{get:function(){return this.gameState.FPS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPaused",{get:function(){return this.gameState.isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HighestScore",{get:function(){return this.gameState.HighestScore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SavedData",{get:function(){return this.gameState.GameSave},enumerable:!1,configurable:!0}),e.prototype.Save=function(){this.gameState.Save()},e.prototype.Load=function(){this.gameState.Load()},e.prototype.Restart=function(){this.gameState.Restart()},e.prototype.Resume=function(){this.gameState.Start()},e.prototype.Pause=function(){this.gameState.Pause()},e}(c),S={HEAD:n(788),TAIL:n(948)},A=function(){function t(t,e,n){void 0===e&&(e=1),void 0===n&&(n=m.Foreground),this.Image=t,this.sizeFactor=e,this.Canvas=n,this._lastDeltaTime=0}return t.prototype.Awake=function(){this._start=this.Entity.Start.Clone(),this.Clear()},t.prototype.Update=function(t){var e=this;this.Clear(),this.Entity.AdjustSize((function(){e._start=e.Entity.Start.Clone()})),this._start.equals(this.Entity.Start)||this._updateStart(t),this._lastDeltaTime=t,this.Draw()},t.prototype.calcIncFromDeltaTime=function(t){var e=Math.abs(t-this._lastDeltaTime),n=e/150;return Math.round(e>0?this.Entity.Size.x*n:this.Entity.Size.x/15)},t.prototype._updateStart=function(t){var e=this.calcIncFromDeltaTime(t);this._start.x>this.Canvas.Size.x||this._start.x>this.Canvas.Size.y||this._start.x<0||this._start.y<0||this._start.Sub(this.Entity.Start).Module()<e/2?this._start=this.Entity.Start.Clone():(this._start.x>this.Entity.Start.x?this._start.x-=e:this._start.x<this.Entity.Start.x&&(this._start.x+=e),this._start.y>this.Entity.Start.y?this._start.y-=e:this._start.y<this.Entity.Start.y&&(this._start.y+=e))},t.prototype.Draw=function(){var t=p.Resize(this.sizeFactor,this.Entity.Size,this._start,this._start.Add(this.Entity.Size));t?this.Canvas.Rotate(this.Entity.RotateAngle).RenderImage(t.Start,t.End.Sub(t.Start),this.Image):this.Canvas.Rotate(this.Entity.RotateAngle).RenderImage(this._start,this.Entity.Size,this.Image)},t.prototype.Clear=function(){this.Canvas.ClearRect(this._start,this.Entity.Size)},t}(),T=new Image;T.src=S.TAIL;var C,E=new Image;E.src=S.HEAD,function(t){t[t.HEAD=0]="HEAD",t[t.TAIL=1]="TAIL"}(C||(C={}));var O=function(t){function e(e,n,i,r,s,o){void 0===s&&(s=1),void 0===o&&(o=0);var a=t.call(this)||this;return a.part=e,a.Start=n,a.End=i,a.Index=r,a.factor=s,a.RotateAngle=o,a}return r(e,t),e.prototype.Awake=function(){this.AddComponent(new A(this.part===C.HEAD?E:T,this.factor)),t.prototype.Awake.call(this)},Object.defineProperty(e.prototype,"Size",{get:function(){return new p(this.End.x-this.Start.x,this.End.y-this.Start.y)},enumerable:!1,configurable:!0}),e.prototype.hadAbruptChange=function(t){return 0==this.Index.x&&t.x==h.grid.dimension-1||this.Index.x==h.grid.dimension-1&&0==t.x||0==this.Index.y&&t.y==h.grid.dimension-1||this.Index.y==h.grid.dimension-1&&0==t.y},e.prototype.Move=function(t){var e=p.NodeArgsFromIndex(t),n=e.Start,i=e.End,r=e.Index;this.Start=n,this.End=i;var s=this.hadAbruptChange(t);this.Index=r,s&&(this.Clear(),this.GetComponent(A).Awake())},e.prototype.AdjustSize=function(t){if(this.Size.x!=h.grid.nodeSize){var e=p.NodeArgsFromIndex(this.Index),n=e.Start,i=e.End,r=e.Index;this.Start=n,this.End=i,this.Index=r,t()}},e.prototype.Update=function(e){t.prototype.Update.call(this,e)},e.prototype.Clear=function(){this.GetComponent(A).Clear()},e.prototype.Clone=function(){return new e(this.part,this.Start.Clone(),this.End.Clone(),this.Index.Clone(),this.factor,this.RotateAngle)},e.Load=function(t){var n=p.NodeArgsFromIndex(t.index),i=n.Start,r=n.Index,s=n.End;return new e(t.part,i,s,r,t.factor,t.rotateAngle)},e.prototype.Save=function(){return{part:this.part,index:this.Index.Clone(),factor:this.factor,rotateAngle:this.RotateAngle}},e}(c);var k=n(382);const M=new WeakSet,I=new WeakMap,R=new WeakMap,D=new WeakMap,P=new WeakMap,N=new WeakMap,L=new WeakMap,V=new WeakMap,j=new WeakMap,F=new WeakMap,q={construct:()=>q},U=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,B=(t,e)=>{const n=[];let i=t.replace(/^[\s]+/,""),r=i.match(U);for(;null!==r;){const t=r[1].slice(1,-1),s=r[0].replace(/([\s]+)?;?$/,"").replace(t,new URL(t,e).toString());n.push(s),i=i.slice(r[0].length).replace(/^[\s]+/,""),r=i.match(U)}return[n.join(";"),i]},W=t=>{if(void 0!==t&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},z=t=>{if(!(t=>{try{new new Proxy(t,q)}catch{return!1}return!0})(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!=typeof t.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},G=(t,e)=>{const n=t.get(e);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},H=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[i]=n;return t.delete(i),i},X=(t,e,n,i)=>{const r=G(t,e),s=H(r,(t=>t[0]===n&&t[1]===i));return 0===r.size&&t.delete(e),s},Y=t=>G(L,t),Z=t=>{if(M.has(t))throw new Error("The AudioNode is already stored.");M.add(t),Y(t).forEach((t=>t(!0)))},$=t=>"port"in t,Q=t=>{if(!M.has(t))throw new Error("The AudioNode is not stored.");M.delete(t),Y(t).forEach((t=>t(!1)))},K=(t,e)=>{!$(t)&&e.every((t=>0===t.size))&&Q(t)},J={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},tt=(t,e)=>t.context===e,et=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},nt=()=>new DOMException("","IndexSizeError"),it=t=>{var e;t.getChannelData=(e=t.getChannelData,n=>{try{return e.call(t,n)}catch(t){if(12===t.code)throw nt();throw t}})},rt={numberOfChannels:1},st=-34028234663852886e22,ot=-st,at=t=>M.has(t),ct={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},ut=t=>G(I,t),lt=t=>G(D,t),ht=(t,e)=>{const{activeInputs:n}=ut(t);n.forEach((n=>n.forEach((([n])=>{e.includes(t)||ht(n,[...e,t])}))));const i=(t=>"playbackRate"in t)(t)?[t.playbackRate]:$(t)?Array.from(t.parameters.values()):(t=>"frequency"in t&&"gain"in t)(t)?[t.Q,t.detune,t.frequency,t.gain]:(t=>"offset"in t)(t)?[t.offset]:(t=>!("frequency"in t)&&"gain"in t)(t)?[t.gain]:(t=>"detune"in t&&"frequency"in t)(t)?[t.detune,t.frequency]:(t=>"pan"in t)(t)?[t.pan]:[];for(const t of i){const n=lt(t);void 0!==n&&n.activeInputs.forEach((([t])=>ht(t,e)))}at(t)&&Q(t)},pt=t=>{ht(t.destination,[])},dt=t=>"context"in t,ft=t=>dt(t[0]),mt=(t,e,n,i)=>{for(const e of t)if(n(e)){if(i)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},gt=(t,e,[n,i],r)=>{mt(t,[e,n,i],(t=>t[0]===e&&t[1]===n),r)},_t=(t,[e,n,i],r)=>{const s=t.get(e);void 0===s?t.set(e,new Set([[n,i]])):mt(s,[n,i],(t=>t[0]===n),r)},vt=t=>"inputs"in t,yt=(t,e,n,i)=>{if(vt(e)){const r=e.inputs[i];return t.connect(r,n,0),[r,n,0]}return t.connect(e,n,i),[e,n,i]},wt=(t,e,n)=>{for(const i of t)if(i[0]===e&&i[1]===n)return t.delete(i),i;return null},bt=(t,e)=>{if(!Y(t).delete(e))throw new Error("Missing the expected event listener.")},xt=(t,e,n)=>{const i=G(t,e),r=H(i,(t=>t[0]===n));return 0===i.size&&t.delete(e),r},St=(t,e,n,i)=>{vt(e)?t.disconnect(e.inputs[i],n,0):t.disconnect(e,n,i)},At=t=>G(R,t),Tt=t=>G(P,t),Ct=t=>V.has(t),Et=t=>!M.has(t),Ot=t=>new Promise((e=>{const n=t.createScriptProcessor(256,1,1),i=t.createGain(),r=t.createBuffer(1,2,44100),s=r.getChannelData(0);s[0]=1,s[1]=1;const o=t.createBufferSource();o.buffer=r,o.loop=!0,o.connect(n).connect(t.destination),o.connect(i),o.disconnect(i),n.onaudioprocess=i=>{const r=i.inputBuffer.getChannelData(0);Array.prototype.some.call(r,(t=>1===t))?e(!0):e(!1),o.stop(),n.onaudioprocess=null,o.disconnect(n),n.disconnect(t.destination)},o.start()})),kt=(t,e)=>{const n=new Map;for(const e of t)for(const t of e){const e=n.get(t);n.set(t,void 0===e?1:e+1)}n.forEach(((t,n)=>e(n,t)))},Mt=t=>"context"in t,It=t=>{const e=new Map;var n,i;t.connect=(i=t.connect.bind(t),(t,n=0,r=0)=>{const s=Mt(t)?i(t,n,r):i(t,n),o=e.get(t);return void 0===o?e.set(t,[{input:r,output:n}]):o.every((t=>t.input!==r||t.output!==n))&&o.push({input:r,output:n}),s}),t.disconnect=(n=t.disconnect,(i,r,s)=>{if(n.apply(t),void 0===i)e.clear();else if("number"==typeof i)for(const[t,n]of e){const r=n.filter((t=>t.output!==i));0===r.length?e.delete(t):e.set(t,r)}else if(e.has(i))if(void 0===r)e.delete(i);else{const t=e.get(i);if(void 0!==t){const n=t.filter((t=>t.output!==r&&(t.input!==s||void 0===s)));0===n.length?e.delete(i):e.set(i,n)}}for(const[n,i]of e)i.forEach((e=>{Mt(n)?t.connect(n,e.output,e.input):t.connect(n,e.output)}))})},Rt=(t,e,n,i,r)=>{const[s,o]=((t,e,n,i)=>{const{activeInputs:r,passiveInputs:s}=ut(e),o=wt(r[i],t,n);return null===o?[X(s,t,n,i)[2],!1]:[o[2],!0]})(t,n,i,r);if(null!==s&&(bt(t,s),!o||e||Ct(t)||St(At(t),At(n),i,r)),at(n)){const{activeInputs:t}=ut(n);K(n,t)}},Dt=(t,e,n,i)=>{const[r,s]=((t,e,n)=>{const{activeInputs:i,passiveInputs:r}=lt(e),s=wt(i,t,n);return null===s?[xt(r,t,n)[1],!1]:[s[2],!0]})(t,n,i);null!==r&&(bt(t,r),!s||e||Ct(t)||At(t).disconnect(Tt(n),i))};class Pt{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach(((n,i)=>t.call(e,n,i,this)))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const Nt={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function Lt(t,e,n,i,r){if("function"==typeof t.copyFromChannel)0===e[n].byteLength&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],i,r);else{const s=t.getChannelData(i);if(0===e[n].byteLength)e[n]=s.slice(r,r+128);else{const t=new Float32Array(s.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(t)}}}const Vt=(t,e,n,i,r)=>{"function"==typeof t.copyToChannel?0!==e[n].byteLength&&t.copyToChannel(e[n],i,r):0!==e[n].byteLength&&t.getChannelData(i).set(e[n],r)},jt=(t,e)=>{const n=[];for(let i=0;i<t;i+=1){const t=[],r="number"==typeof e?e:e[i];for(let e=0;e<r;e+=1)t.push(new Float32Array(128));n.push(t)}return n},Ft=async(t,e,n,i,r,s,o)=>{const a=null===e?128*Math.ceil(t.context.length/128):e.length,c=i.channelCount*i.numberOfInputs,u=r.reduce(((t,e)=>t+e),0),l=0===u?null:n.createBuffer(u,a,n.sampleRate);if(void 0===s)throw new Error("Missing the processor constructor.");const h=ut(t),p=await((t,e)=>{const n=G(F,t),i=At(e);return G(n,i)})(n,t),d=jt(i.numberOfInputs,i.channelCount),f=jt(i.numberOfOutputs,r),m=Array.from(t.parameters.keys()).reduce(((t,e)=>({...t,[e]:new Float32Array(128)})),{});for(let u=0;u<a;u+=128){if(i.numberOfInputs>0&&null!==e)for(let t=0;t<i.numberOfInputs;t+=1)for(let n=0;n<i.channelCount;n+=1)Lt(e,d[t],n,n,u);void 0!==s.parameterDescriptors&&null!==e&&s.parameterDescriptors.forEach((({name:t},n)=>{Lt(e,m,t,c+n,u)}));for(let t=0;t<i.numberOfInputs;t+=1)for(let e=0;e<r[t];e+=1)0===f[t][e].byteLength&&(f[t][e]=new Float32Array(128));try{const t=d.map(((t,e)=>0===h.activeInputs[e].size?[]:t)),e=o(u/n.sampleRate,n.sampleRate,(()=>p.process(t,f,m)));if(null!==l)for(let t=0,e=0;t<i.numberOfOutputs;t+=1){for(let n=0;n<r[t];n+=1)Vt(l,f[t],n,e+n,u);e+=r[t]}if(!e)break}catch(e){t.dispatchEvent(new ErrorEvent("processorerror",{colno:e.colno,filename:e.filename,lineno:e.lineno,message:e.message}));break}}return l},qt={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Ut={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Bt={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Wt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},zt={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Gt=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise((i=>{const r=()=>{n.onmessage=null,e.close(),n.close(),i()};n.onmessage=()=>r();try{e.postMessage(t,[t])}finally{r()}}))},Ht={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Xt=(t,e,n)=>{const i=e[n];if(void 0===i)throw t();return i},Yt={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Zt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},$t=()=>new DOMException("","InvalidStateError"),Qt=()=>new DOMException("","InvalidAccessError"),Kt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Jt=(t,e,n,i,r,s,o,a,c,u,l)=>{const h=u.length;let p=a;for(let a=0;a<h;a+=1){let h=n[0]*u[a];for(let e=1;e<r;e+=1){const i=p-e&c-1;h+=n[e]*s[i],h-=t[e]*o[i]}for(let t=r;t<i;t+=1)h+=n[t]*s[p-t&c-1];for(let n=r;n<e;n+=1)h-=t[n]*o[p-n&c-1];s[p]=u[a],o[p]=h,p=p+1&c-1,l[a]=h}return p},te={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},ee=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,(()=>{}));return void 0!==n&&(n.catch((()=>{})),!0)}catch{}return!1},ne=(t,e,n)=>{const i=e[n];void 0!==i&&i!==t[n]&&(t[n]=i)},ie=(t,e)=>{ne(t,e,"channelCount"),ne(t,e,"channelCountMode"),ne(t,e,"channelInterpretation")},re=t=>"function"==typeof t.getFloatTimeDomainData,se=(t,e,n)=>{const i=e[n];void 0!==i&&i!==t[n].value&&(t[n].value=i)},oe=t=>{var e;t.start=(e=t.start,(n=0,i=0,r)=>{if("number"==typeof r&&r<0||i<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,i,r)})},ae=t=>{var e;t.stop=(e=t.stop,(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})},ce=(t,e)=>null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),ue=(t,e)=>{const n=t.createBiquadFilter();return ie(n,e),se(n,e,"Q"),se(n,e,"detune"),se(n,e,"frequency"),se(n,e,"gain"),ne(n,e,"type"),n},le=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return ie(n,e),(t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw $t()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:t=>{if("explicit"!==t)throw $t()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:t=>{if("discrete"!==t)throw $t()}})})(n),n},he=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),pe=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return ie(n,e),se(n,e,"delayTime"),n},de=(t,e)=>{const n=t.createGain();return ie(n,e),se(n,e,"gain"),n};function fe(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function me(t,e){let n=[0,0];for(let s=t.length-1;s>=0;s-=1)r=e,n=[(i=n)[0]*r[0]-i[1]*r[1],i[0]*r[1]+i[1]*r[0]],n[0]+=t[s];var i,r;return n}const ge=(t,e,n,i)=>t.createScriptProcessor(e,n,i),_e=()=>new DOMException("","NotSupportedError"),ve={numberOfChannels:1},ye={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},we={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},be={disableNormalization:!1},xe={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Se=()=>new DOMException("","UnknownError"),Ae={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Te=(t,e,n)=>void 0===t.copyFromChannel?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),Ce=t=>{if(null===t)return!1;const e=t.length;return e%2!=0?0!==t[Math.floor(e/2)]:t[e/2-1]+t[e/2]!==0},Ee=(t,e,n,i)=>{let r=t;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:s,set:o}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(t,e,{get:n(s),set:i(o)})},Oe=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(i){if(9!==i.code)throw i;Oe(t,e,n+1e-7)}},ke=t=>{const e=t.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},Me=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},Ie=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},Re=(t,e)=>{const n=e.createGain();t.connect(n);const i=(r=t.disconnect,()=>{r.call(t,n),t.removeEventListener("ended",i)});var r;t.addEventListener("ended",i),he(t,n),t.stop=(e=>{let i=!1;return(r=0)=>{if(i)try{e.call(t,r)}catch{n.gain.setValueAtTime(0,r)}else e.call(t,r),i=!0}})(t.stop)},De=(t,e)=>n=>{const i={value:t};return Object.defineProperties(n,{currentTarget:i,target:i}),"function"==typeof e?e.call(t,n):e.handleEvent.call(t,n)},Pe=(t=>(e,n,[i,r,s],o)=>{t(e[r],[n,i,s],(t=>t[0]===n&&t[1]===i),o)})(mt),Ne=(t=>(e,n,[i,r,s],o)=>{const a=e.get(i);void 0===a?e.set(i,new Set([[r,n,s]])):t(a,[r,n,s],(t=>t[0]===r&&t[1]===n),o)})(mt),Le=(t=>(e,n,i,r)=>t(e[r],(t=>t[0]===n&&t[1]===i)))(H),Ve=new WeakMap,je=(t=>e=>{var n;return null!==(n=t.get(e))&&void 0!==n?n:0})(Ve),Fe=(qe=new Map,Ue=new WeakMap,(t,e)=>{const n=Ue.get(t);if(void 0!==n)return n;const i=qe.get(t);if(void 0!==i)return i;try{const n=e();return n instanceof Promise?(qe.set(t,n),n.catch((()=>!1)).then((e=>(qe.delete(t),Ue.set(t,e),e)))):(Ue.set(t,n),n)}catch{return Ue.set(t,!1),!1}});var qe,Ue;const Be="undefined"==typeof window?null:window,We=((t,e)=>(n,i)=>{const r=n.createAnalyser();if(ie(r,i),!(i.maxDecibels>i.minDecibels))throw e();return ne(r,i,"fftSize"),ne(r,i,"maxDecibels"),ne(r,i,"minDecibels"),ne(r,i,"smoothingTimeConstant"),t(re,(()=>re(r)))||(t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const i=Math.max(n.length,t.fftSize);for(let t=0;t<i;t+=1)e[t]=.0078125*(n[t]-128);return e}})(r),r})(Fe,nt),ze=(t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer})(ut),Ge=((t,e,n)=>async(i,r,s,o)=>{const a=t(i),c=[...o,i];await Promise.all(a.activeInputs.map(((t,o)=>Array.from(t).filter((([t])=>!c.includes(t))).map((async([t,a])=>{const u=e(t),l=await u.render(t,r,c),h=i.context.destination;n(t)||i===h&&n(i)||l.connect(s,a,o)})))).reduce(((t,e)=>[...t,...e]),[]))})(ut,ze,Ct),He=((t,e,n)=>()=>{const i=new WeakMap;return{render(r,s,o){const a=i.get(s);return void 0!==a?Promise.resolve(a):(async(r,s,o)=>{let a=e(r);if(!tt(a,s)){const e={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(s,e)}return i.set(s,a),await n(r,s,a,o),a})(r,s,o)}}})(We,At,Ge),Xe=(Ye=N,t=>{const e=Ye.get(t);if(void 0===e)throw $t();return e});var Ye;const Ze=(t=>null===t?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null)(Be),$e=(t=>e=>null!==t&&e instanceof t)(Ze),Qe=new WeakMap,Ke=(t=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(e,n,i){if(null!==n){let r=this._listeners.get(n);void 0===r&&(r=t(this,n),"function"==typeof n&&this._listeners.set(n,r)),this._nativeEventTarget.addEventListener(e,r,i)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,e,n){const i=null===e?void 0:this._listeners.get(e);this._nativeEventTarget.removeEventListener(t,void 0===i?null:i,n)}})(De),Je=(t=>null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null)(Be),tn=(t=>e=>null!==t&&e instanceof t)(Je),en=(t=>e=>null!==t&&"function"==typeof t.AudioNode&&e instanceof t.AudioNode)(Be),nn=(t=>e=>null!==t&&"function"==typeof t.AudioParam&&e instanceof t.AudioParam)(Be),rn=((t,e,n,i,r,s,o,a,c,u,l,h,p,d,f)=>class extends u{constructor(e,i,r,s){super(r),this._context=e,this._nativeAudioNode=r;const o=l(e);h(o)&&!0!==n(Ot,(()=>Ot(o)))&&It(r),R.set(this,r),L.set(this,new Set),"closed"!==e.state&&i&&Z(this),t(this,s,r)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(t){this._nativeAudioNode.channelCount=t}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(t){this._nativeAudioNode.channelCountMode=t}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(t){this._nativeAudioNode.channelInterpretation=t}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(t,n=0,a=0){if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw r();const u=l(this._context),h=f(u);if(p(t)||d(t))throw s();if(dt(t)){const r=At(t);try{const e=yt(this._nativeAudioNode,r,n,a),i=Et(this);(h||i)&&this._nativeAudioNode.disconnect(...e),"closed"!==this.context.state&&!i&&Et(t)&&Z(t)}catch(t){if(12===t.code)throw s();throw t}if(e(this,t,n,a,h)){const e=c([this],t);kt(e,i(h))}return t}const m=Tt(t);if("playbackRate"===m.name&&1024===m.maxValue)throw o();try{this._nativeAudioNode.connect(m,n),(h||Et(this))&&this._nativeAudioNode.disconnect(m,n)}catch(t){if(12===t.code)throw s();throw t}if(((t,e,n,i)=>{const{activeInputs:r,passiveInputs:s}=lt(e),{outputs:o}=ut(t),a=Y(t),c=o=>{const a=At(t),c=Tt(e);if(o){const e=xt(s,t,n);gt(r,t,e,!1),i||Ct(t)||a.connect(c,n)}else{const e=((t,e,n)=>H(t,(t=>t[0]===e&&t[1]===n)))(r,t,n);_t(s,e,!1),i||Ct(t)||a.disconnect(c,n)}};return!!mt(o,[e,n],(t=>t[0]===e&&t[1]===n),!0)&&(a.add(c),at(t)?gt(r,t,[n,c],!0):_t(s,[t,n,c],!0),!0)})(this,t,n,h)){const e=c([this],t);kt(e,i(h))}}disconnect(t,e,n){let i;const o=l(this._context),u=f(o);if(void 0===t)i=((t,e)=>{const n=ut(t),i=[];for(const r of n.outputs)ft(r)?Rt(t,e,...r):Dt(t,e,...r),i.push(r[0]);return n.outputs.clear(),i})(this,u);else if("number"==typeof t){if(t<0||t>=this.numberOfOutputs)throw r();i=((t,e,n)=>{const i=ut(t),r=[];for(const s of i.outputs)s[1]===n&&(ft(s)?Rt(t,e,...s):Dt(t,e,...s),r.push(s[0]),i.outputs.delete(s));return r})(this,u,t)}else{if(void 0!==e&&(e<0||e>=this.numberOfOutputs))throw r();if(dt(t)&&void 0!==n&&(n<0||n>=t.numberOfInputs))throw r();if(i=((t,e,n,i,r)=>{const s=ut(t);return Array.from(s.outputs).filter((t=>!(t[0]!==n||void 0!==i&&t[1]!==i||void 0!==r&&t[2]!==r))).map((n=>(ft(n)?Rt(t,e,...n):Dt(t,e,...n),s.outputs.delete(n),n[0])))})(this,u,t,e,n),0===i.length)throw s()}for(const t of i){const e=c([this],t);kt(e,a)}}})((sn=I,(t,e,n)=>{const i=[];for(let t=0;t<n.numberOfInputs;t+=1)i.push(new Set);sn.set(t,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:e})}),((t,e,n,i,r,s,o,a,c,u,l,h,p)=>{const d=new WeakMap;return(f,m,g,_,v)=>{const{activeInputs:y,passiveInputs:w}=s(m),{outputs:b}=s(f),x=a(f),S=s=>{const a=c(m),u=c(f);if(s){const e=X(w,f,g,_);t(y,f,e,!1),v||h(f)||n(u,a,g,_),p(m)&&Z(m)}else{const t=i(y,f,g,_);e(w,_,t,!1),v||h(f)||r(u,a,g,_);const n=o(m);if(0===n)l(m)&&K(m,y);else{const t=d.get(m);void 0!==t&&clearTimeout(t),d.set(m,setTimeout((()=>{l(m)&&K(m,y)}),1e3*n))}}};return!!u(b,[m,g,_],(t=>t[0]===m&&t[1]===g&&t[2]===_),!0)&&(x.add(S),l(f)?t(y,f,[g,_,S],!0):e(w,_,[f,g,S],!0),!0)}})(Pe,Ne,yt,Le,St,ut,je,Y,At,mt,at,Ct,Et),Fe,((t,e,n,i,r,s)=>o=>(a,c)=>{const u=t.get(a);if(void 0===u){if(!o&&s(a)){const t=i(a),{outputs:s}=n(a);for(const n of s)if(ft(n)){const r=i(n[0]);e(t,r,n[1],n[2])}else{const e=r(n[0]);t.disconnect(e,n[1])}}t.set(a,c)}else t.set(a,u+c)})(V,St,ut,At,Tt,at),nt,Qt,_e,((t,e,n,i,r,s,o,a)=>(c,u)=>{const l=e.get(c);if(void 0===l)throw new Error("Missing the expected cycle count.");const h=s(c.context),p=a(h);if(l===u){if(e.delete(c),!p&&o(c)){const e=i(c),{outputs:s}=n(c);for(const n of s)if(ft(n)){const r=i(n[0]);t(e,r,n[1],n[2])}else{const t=r(n[0]);e.connect(t,n[1])}}}else e.set(c,l-u)})(yt,V,ut,At,Tt,Xe,at,$e),((t,e,n)=>function i(r,s){const o=dt(s)?s:n(t,s);if((t=>"delayTime"in t)(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map((t=>i([...r,o],t[0]))).reduce(((t,e)=>t.concat(e)),[])})(Qe,ut,G),Ke,Xe,tn,en,nn,$e);var sn;const on=((t,e,n,i,r,s)=>class extends t{constructor(t,n){const o=r(t),a={...J,...n},c=i(o,a);super(t,!1,c,s(o)?e():null),this._nativeAnalyserNode=c}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(t){this._nativeAnalyserNode.fftSize=t}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(t){const e=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=e,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(t){const e=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=e,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(t){this._nativeAnalyserNode.smoothingTimeConstant=t}getByteFrequencyData(t){this._nativeAnalyserNode.getByteFrequencyData(t)}getByteTimeDomainData(t){this._nativeAnalyserNode.getByteTimeDomainData(t)}getFloatFrequencyData(t){this._nativeAnalyserNode.getFloatFrequencyData(t)}getFloatTimeDomainData(t){this._nativeAnalyserNode.getFloatTimeDomainData(t)}})(rn,He,nt,We,Xe,$e),an=new WeakSet,cn=(t=>null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null)(Be),un=(ln=new Uint32Array(1),t=>(ln[0]=t,ln[0]));var ln;const hn=((t,e)=>n=>{n.copyFromChannel=(i,r,s=0)=>{const o=t(s),a=t(r);if(a>=n.numberOfChannels)throw e();const c=n.length,u=n.getChannelData(a),l=i.length;for(let t=o<0?-o:0;t+o<c&&t<l;t+=1)i[t]=u[t+o]},n.copyToChannel=(i,r,s=0)=>{const o=t(s),a=t(r);if(a>=n.numberOfChannels)throw e();const c=n.length,u=n.getChannelData(a),l=i.length;for(let t=o<0?-o:0;t+o<c&&t<l;t+=1)u[t+o]=i[t]}})(un,nt),pn=(t=>e=>{e.copyFromChannel=(n=>(i,r,s=0)=>{const o=t(s),a=t(r);if(o<e.length)return n.call(e,i,a,o)})(e.copyFromChannel),e.copyToChannel=(n=>(i,r,s=0)=>{const o=t(s),a=t(r);if(o<e.length)return n.call(e,i,a,o)})(e.copyToChannel)})(un),dn=((t,e,n,i,r,s,o,a)=>{let c=null;return class u{constructor(u){if(null===r)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:l,numberOfChannels:h,sampleRate:p}={...rt,...u};null===c&&(c=new r(1,1,44100));const d=null!==i&&e(s,s)?new i({length:l,numberOfChannels:h,sampleRate:p}):c.createBuffer(h,l,p);if(0===d.numberOfChannels)throw n();return"function"!=typeof d.copyFromChannel?(o(d),it(d)):e(et,(()=>et(d)))||a(d),t.add(d),d}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===u.prototype||t.has(e)}}})(an,Fe,_e,cn,Ze,(t=>()=>{if(null===t)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0})(cn),hn,pn),fn=(t=>(e,n)=>{const i=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(i).connect(e.destination);const r=()=>{n.removeEventListener("ended",r),n.disconnect(i),i.disconnect()};n.addEventListener("ended",r)})(de),mn=((t,e,n)=>async(i,r,s,o)=>{const a=e(i);await Promise.all(Array.from(a.activeInputs).map((async([e,i])=>{const a=t(e),c=await a.render(e,r,o);n(e)||c.connect(s,i)})))})(ze,lt,Ct),gn=(t=>(e,n,i,r)=>t(n,e,i,r))(mn),_n=((t,e,n,i,r,s,o,a,c,u,l)=>(c,h)=>{const p=c.createBufferSource();return ie(p,h),se(p,h,"playbackRate"),ne(p,h,"buffer"),ne(p,h,"loop"),ne(p,h,"loopEnd"),ne(p,h,"loopStart"),e(n,(()=>n(c)))||(t=>{t.start=(e=>{let n=!1;return(i=0,r=0,s)=>{if(n)throw $t();e.call(t,i,r,s),n=!0}})(t.start)})(p),e(i,(()=>i(c)))||(t=>{t.start=(e=t.start,(n=0,i=0,r)=>{const s=t.buffer,o=null===s?i:Math.min(s.duration,i);null!==s&&o>s.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,r)});var e})(p),e(r,(()=>r(c)))||u(p,c),e(s,(()=>s(c)))||oe(p),e(o,(()=>o(c)))||l(p,c),e(a,(()=>a(c)))||ae(p),t(c,p),p})(fn,Fe,(t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1}),(t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0}),(t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0}),ke,Me,Ie,0,(t=>(e,n)=>{const i=n.createBuffer(1,1,44100);null===e.buffer&&(e.buffer=i),t(e,"buffer",(t=>()=>{const n=t.call(e);return n===i?null:n}),(t=>n=>t.call(e,null===n?i:n)))})(Ee),Re),vn=((t,e)=>(n,i,r,s)=>(t(i).replay(r),e(i,n,r,s)))((t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})(lt),mn),yn=((t,e,n,i,r)=>()=>{const s=new WeakMap;let o=null,a=null;return{set start(t){o=t},set stop(t){a=t},render(c,u,l){const h=s.get(u);return void 0!==h?Promise.resolve(h):(async(c,u,l)=>{let h=n(c);const p=tt(h,u);if(!p){const t={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(u,t),null!==o&&h.start(...o),null!==a&&h.stop(a)}return s.set(u,h),p?await t(u,c.playbackRate,h.playbackRate,l):await i(u,c.playbackRate,h.playbackRate,l),await r(c,u,h,l),h})(c,u,l)}}})(gn,_n,At,vn,Ge),wn=((t,e,n,i,r,s,o,a,c,u,l,h,p)=>(i,d,f,m=null,g=null)=>{const _=new k.AutomationEventList(f.defaultValue),v=d?(t=>({replay(e){for(const n of t)if("exponentialRampToValue"===n.type){const{endTime:t,value:i}=n;e.exponentialRampToValueAtTime(i,t)}else if("linearRampToValue"===n.type){const{endTime:t,value:i}=n;e.linearRampToValueAtTime(i,t)}else if("setTarget"===n.type){const{startTime:t,target:i,timeConstant:r}=n;e.setTargetAtTime(i,t,r)}else if("setValue"===n.type){const{startTime:t,value:i}=n;e.setValueAtTime(i,t)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:t,startTime:i,values:r}=n;e.setValueCurveAtTime(r,i,t)}}}}))(_):null,y={get defaultValue(){return f.defaultValue},get maxValue(){return null===m?f.maxValue:m},get minValue(){return null===g?f.minValue:g},get value(){return f.value},set value(t){f.value=t,y.setValueAtTime(t,i.context.currentTime)},cancelAndHoldAtTime(t){if("function"==typeof f.cancelAndHoldAtTime)null===v&&_.flush(i.context.currentTime),_.add(r(t)),f.cancelAndHoldAtTime(t);else{const e=Array.from(_).pop();null===v&&_.flush(i.context.currentTime),_.add(r(t));const n=Array.from(_).pop();f.cancelScheduledValues(t),e!==n&&void 0!==n&&("exponentialRampToValue"===n.type?f.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?f.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?f.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&f.setValueCurveAtTime(n.values,n.startTime,n.duration))}return y},cancelScheduledValues:t=>(null===v&&_.flush(i.context.currentTime),_.add(s(t)),f.cancelScheduledValues(t),y),exponentialRampToValueAtTime(t,e){if(0===t)throw new RangeError;if(!Number.isFinite(e)||e<0)throw new RangeError;return null===v&&_.flush(i.context.currentTime),_.add(o(t,e)),f.exponentialRampToValueAtTime(t,e),y},linearRampToValueAtTime:(t,e)=>(null===v&&_.flush(i.context.currentTime),_.add(a(t,e)),f.linearRampToValueAtTime(t,e),y),setTargetAtTime:(t,e,n)=>(null===v&&_.flush(i.context.currentTime),_.add(c(t,e,n)),f.setTargetAtTime(t,e,n),y),setValueAtTime:(t,e)=>(null===v&&_.flush(i.context.currentTime),_.add(u(t,e)),f.setValueAtTime(t,e),y),setValueCurveAtTime(t,e,n){const r=t instanceof Float32Array?t:new Float32Array(t);if(null!==h&&"webkitAudioContext"===h.name){const t=e+n,s=i.context.sampleRate,o=Math.ceil(e*s),a=Math.floor(t*s),c=a-o,u=new Float32Array(c);for(let t=0;t<c;t+=1){const i=(r.length-1)/n*((o+t)/s-e),a=Math.floor(i),c=Math.ceil(i);u[t]=a===c?r[a]:(1-(i-a))*r[a]+(1-(c-i))*r[c]}null===v&&_.flush(i.context.currentTime),_.add(l(u,e,n)),f.setValueCurveAtTime(u,e,n);const h=a/s;h<t&&p(y,u[u.length-1],h),p(y,r[r.length-1],t)}else null===v&&_.flush(i.context.currentTime),_.add(l(r,e,n)),f.setValueCurveAtTime(r,e,n);return y}};return n.set(y,f),e.set(y,i),t(y,v),y})((bn=D,(t,e)=>{bn.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})}),Qe,P,0,k.createCancelAndHoldAutomationEvent,k.createCancelScheduledValuesAutomationEvent,k.createExponentialRampToValueAutomationEvent,k.createLinearRampToValueAutomationEvent,k.createSetTargetAutomationEvent,k.createSetValueAutomationEvent,k.createSetValueCurveAutomationEvent,Je,Oe);var bn;const xn=((t,e,n,i,r,s,o,a)=>class extends t{constructor(t,i){const a=s(t),c={...ct,...i},u=r(a,c),l=o(a),h=l?e():null;super(t,!1,u,h),this._audioBufferSourceNodeRenderer=h,this._isBufferNullified=!1,this._isBufferSet=null!==c.buffer,this._nativeAudioBufferSourceNode=u,this._onended=null,this._playbackRate=n(this,l,u.playbackRate,ot,st)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(t){if(this._nativeAudioBufferSourceNode.buffer=t,null!==t){if(this._isBufferSet)throw i();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(t){this._nativeAudioBufferSourceNode.loop=t}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(t){this._nativeAudioBufferSourceNode.loopEnd=t}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(t){this._nativeAudioBufferSourceNode.loopStart=t}get onended(){return this._onended}set onended(t){const e="function"==typeof t?a(this,t):null;this._nativeAudioBufferSourceNode.onended=e;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===e?t:n}get playbackRate(){return this._playbackRate}start(t=0,e=0,n){if(this._nativeAudioBufferSourceNode.start(t,e,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[t,e]:[t,e,n]),"closed"!==this.context.state){Z(this);const t=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",t),at(this)&&Q(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t)}})(rn,yn,wn,$t,_n,Xe,$e,De),Sn=((t,e,n,i,r,s,o,a)=>class extends t{constructor(t,e){const n=s(t),i=o(n),c=r(n,e,i);super(t,!1,c,i?(t=>{let e=null;return{render:(n,i,r)=>(null===e&&(e=(async(e,n,i)=>{const r=n.destination;return await t(e,n,r,i),r})(n,i,r)),e)}})(a):null),this._isNodeOfNativeOfflineAudioContext=i,this._nativeAudioDestinationNode=c}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(t){if(this._isNodeOfNativeOfflineAudioContext)throw i();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(t){if(this._isNodeOfNativeOfflineAudioContext)throw i();this._nativeAudioDestinationNode.channelCountMode=t}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(rn,0,nt,$t,((t,e)=>(n,i,r)=>{const s=n.destination;if(s.channelCount!==i)try{s.channelCount=i}catch{}r&&"explicit"!==s.channelCountMode&&(s.channelCountMode="explicit"),0===s.maxChannelCount&&Object.defineProperty(s,"maxChannelCount",{value:i});const o=t(n,{channelCount:i,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,gain:1});return e(o,"channelCount",(t=>()=>t.call(o)),(t=>e=>{t.call(o,e);try{s.channelCount=e}catch(t){if(e>s.maxChannelCount)throw t}})),e(o,"channelCountMode",(t=>()=>t.call(o)),(t=>e=>{t.call(o,e),s.channelCountMode=e})),e(o,"channelInterpretation",(t=>()=>t.call(o)),(t=>e=>{t.call(o,e),s.channelInterpretation=e})),Object.defineProperty(o,"maxChannelCount",{get:()=>s.maxChannelCount}),o.connect(s),o})(de,Ee),Xe,$e,Ge),An=((t,e,n,i,r)=>()=>{const s=new WeakMap;return{render(o,a,c){const u=s.get(a);return void 0!==u?Promise.resolve(u):(async(o,a,c)=>{let u=n(o);const l=tt(u,a);if(!l){const t={Q:u.Q.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,gain:u.gain.value,type:u.type};u=e(a,t)}return s.set(a,u),l?(await t(a,o.Q,u.Q,c),await t(a,o.detune,u.detune,c),await t(a,o.frequency,u.frequency,c),await t(a,o.gain,u.gain,c)):(await i(a,o.Q,u.Q,c),await i(a,o.detune,u.detune,c),await i(a,o.frequency,u.frequency,c),await i(a,o.gain,u.gain,c)),await r(o,a,u,c),u})(o,a,c)}}})(gn,ue,At,vn,Ge),Tn=(t=>(e,n)=>t.set(e,n))(Ve),Cn=((t,e,n,i,r,s,o,a)=>class extends t{constructor(t,i){const c=s(t),u={...qt,...i},l=r(c,u),h=o(c);super(t,!1,l,h?n():null),this._Q=e(this,h,l.Q,ot,st),this._detune=e(this,h,l.detune,1200*Math.log2(ot),-1200*Math.log2(ot)),this._frequency=e(this,h,l.frequency,t.sampleRate/2,0),this._gain=e(this,h,l.gain,40*Math.log10(ot),st),this._nativeBiquadFilterNode=l,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(t){this._nativeBiquadFilterNode.type=t}getFrequencyResponse(t,e,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(t,e,n)}catch(t){if(11===t.code)throw i();throw t}if(t.length!==e.length||e.length!==n.length)throw i()}})(rn,wn,An,Qt,ue,Xe,$e,Tn),En=((t,e)=>(n,i,r)=>{const s=new Set;return n.connect=(a=n.connect,(r,o=0,c=0)=>{const u=0===s.size;if(e(r))return a.call(n,r,o,c),t(s,[r,o,c],(t=>t[0]===r&&t[1]===o&&t[2]===c),!0),u&&i(),r;a.call(n,r,o),t(s,[r,o],(t=>t[0]===r&&t[1]===o),!0),u&&i()}),n.disconnect=(o=n.disconnect,(t,i,a)=>{const c=s.size>0;if(void 0===t)o.apply(n),s.clear();else if("number"==typeof t){o.call(n,t);for(const e of s)e[1]===t&&s.delete(e)}else{e(t)?o.call(n,t,i,a):o.call(n,t,i);for(const e of s)e[0]!==t||void 0!==i&&e[1]!==i||void 0!==a&&e[2]!==a||s.delete(e)}const u=0===s.size;c&&u&&r()}),n;var o,a})(mt,en),On=((t,e)=>(n,i)=>{const r=n.createChannelMerger(i.numberOfInputs);return null!==t&&"webkitAudioContext"===t.name&&e(n,r),ie(r,i),r})(Je,((t,e)=>(n,i)=>{i.channelCount=1,i.channelCountMode="explicit",Object.defineProperty(i,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const r=n.createBufferSource();e(i,(()=>{const t=i.numberOfInputs;for(let e=0;e<t;e+=1)r.connect(i,0,e)}),(()=>r.disconnect(i)))})($t,En)),kn=((t,e,n,i,r)=>class extends t{constructor(t,s){const o=i(t),a={...Ut,...s};super(t,!1,n(o,a),r(o)?e():null)}})(rn,((t,e,n)=>()=>{const i=new WeakMap;return{render(r,s,o){const a=i.get(s);return void 0!==a?Promise.resolve(a):(async(r,s,o)=>{let a=e(r);if(!tt(a,s)){const e={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(s,e)}return i.set(s,a),await n(r,s,a,o),a})(r,s,o)}}})(On,At,Ge),On,Xe,$e),Mn=((t,e,n,i,r,s)=>class extends t{constructor(t,s){const o=i(t),a=(t=>({...t,channelCount:t.numberOfOutputs}))({...Bt,...s});super(t,!1,n(o,a),r(o)?e():null)}})(rn,((t,e,n)=>()=>{const i=new WeakMap;return{render(r,s,o){const a=i.get(s);return void 0!==a?Promise.resolve(a):(async(r,s,o)=>{let a=e(r);if(!tt(a,s)){const e={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(s,e)}return i.set(s,a),await n(r,s,a,o),a})(r,s,o)}}})(le,At,Ge),le,Xe,$e),In=((t,e,n,i)=>(r,{offset:s,...o})=>{const a=r.createBuffer(1,2,44100),c=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),u=n(r,{...o,gain:s}),l=a.getChannelData(0);l[0]=1,l[1]=1,c.buffer=a,c.loop=!0;const h={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(t){u.channelCount=t},get channelCountMode(){return u.channelCountMode},set channelCountMode(t){u.channelCountMode=t},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(t){u.channelInterpretation=t},get context(){return u.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get offset(){return u.gain},get onended(){return c.onended},set onended(t){c.onended=t},addEventListener:(...t)=>c.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>c.dispatchEvent(t[0]),removeEventListener:(...t)=>c.removeEventListener(t[0],t[1],t[2]),start(t=0){c.start.call(c,t)},stop(t=0){c.stop.call(c,t)}};return t(r,c),i(he(h,u),(()=>c.connect(u)),(()=>c.disconnect(u)))})(fn,_n,de,En),Rn=((t,e,n,i,r)=>(s,o)=>{if(void 0===s.createConstantSource)return n(s,o);const a=s.createConstantSource();return ie(a,o),se(a,o,"offset"),e(i,(()=>i(s)))||oe(a),e(r,(()=>r(s)))||ae(a),t(s,a),a})(fn,Fe,In,ke,Ie),Dn=((t,e,n,i,r,s,o)=>class extends t{constructor(t,o){const a=r(t),c={...Wt,...o},u=i(a,c),l=s(a),h=l?n():null;super(t,!1,u,h),this._constantSourceNodeRenderer=h,this._nativeConstantSourceNode=u,this._offset=e(this,l,u.offset,ot,st),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(t){const e="function"==typeof t?o(this,t):null;this._nativeConstantSourceNode.onended=e;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===e?t:n}start(t=0){if(this._nativeConstantSourceNode.start(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=t),"closed"!==this.context.state){Z(this);const t=()=>{this._nativeConstantSourceNode.removeEventListener("ended",t),at(this)&&Q(this)};this._nativeConstantSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t)}})(rn,wn,((t,e,n,i,r)=>()=>{const s=new WeakMap;let o=null,a=null;return{set start(t){o=t},set stop(t){a=t},render(c,u,l){const h=s.get(u);return void 0!==h?Promise.resolve(h):(async(c,u,l)=>{let h=n(c);const p=tt(h,u);if(!p){const t={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(u,t),null!==o&&h.start(o),null!==a&&h.stop(a)}return s.set(u,h),p?await t(u,c.offset,h.offset,l):await i(u,c.offset,h.offset,l),await r(c,u,h,l),h})(c,u,l)}}})(gn,Rn,At,vn,Ge),Rn,Xe,$e,De),Pn=((t,e)=>(n,i)=>{const r=n.createConvolver();if(ie(r,i),i.disableNormalization===r.normalize&&(r.normalize=!i.disableNormalization),ne(r,i,"buffer"),i.channelCount>2)throw t();if(e(r,"channelCount",(t=>()=>t.call(r)),(e=>n=>{if(n>2)throw t();return e.call(r,n)})),"max"===i.channelCountMode)throw t();return e(r,"channelCountMode",(t=>()=>t.call(r)),(e=>n=>{if("max"===n)throw t();return e.call(r,n)})),r})(_e,Ee),Nn=((t,e,n,i,r,s)=>class extends t{constructor(t,o){const a=i(t),c={...zt,...o},u=n(a,c);super(t,!1,u,r(a)?e():null),this._isBufferNullified=!1,this._nativeConvolverNode=u,null!==c.buffer&&s(this,c.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(t){if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){const t=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=t.createBuffer(1,1,44100),this._isBufferNullified=!0,s(this,0)}else this._isBufferNullified=!1,s(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(t){this._nativeConvolverNode.normalize=t}})(rn,((t,e,n)=>()=>{const i=new WeakMap;return{render(r,s,o){const a=i.get(s);return void 0!==a?Promise.resolve(a):(async(r,s,o)=>{let a=e(r);if(!tt(a,s)){const e={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(s,e)}return i.set(s,a),vt(a)?await n(r,s,a.inputs[0],o):await n(r,s,a,o),a})(r,s,o)}}})(Pn,At,Ge),Pn,Xe,$e,Tn),Ln=((t,e,n,i,r,s,o)=>class extends t{constructor(t,a){const c=r(t),u={...Ht,...a},l=i(c,u),h=s(c);super(t,!1,l,h?n(u.maxDelayTime):null),this._delayTime=e(this,h,l.delayTime),o(this,u.maxDelayTime)}get delayTime(){return this._delayTime}})(rn,wn,((t,e,n,i,r)=>s=>{const o=new WeakMap;return{render(a,c,u){const l=o.get(c);return void 0!==l?Promise.resolve(l):(async(a,c,u)=>{let l=n(a);const h=tt(l,c);if(!h){const t={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,delayTime:l.delayTime.value,maxDelayTime:s};l=e(c,t)}return o.set(c,l),h?await t(c,a.delayTime,l.delayTime,u):await i(c,a.delayTime,l.delayTime,u),await r(a,c,l,u),l})(a,c,u)}}})(gn,pe,At,vn,Ge),pe,Xe,$e,Tn),Vn=(t=>(e,n)=>{const i=e.createDynamicsCompressor();if(ie(i,n),n.channelCount>2)throw t();if("max"===n.channelCountMode)throw t();return se(i,n,"attack"),se(i,n,"knee"),se(i,n,"ratio"),se(i,n,"release"),se(i,n,"threshold"),i})(_e),jn=((t,e,n,i,r,s,o,a)=>class extends t{constructor(t,r){const c=s(t),u={...Yt,...r},l=i(c,u),h=o(c);super(t,!1,l,h?n():null),this._attack=e(this,h,l.attack),this._knee=e(this,h,l.knee),this._nativeDynamicsCompressorNode=l,this._ratio=e(this,h,l.ratio),this._release=e(this,h,l.release),this._threshold=e(this,h,l.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(t){const e=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=e,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(t){const e=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=e,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(rn,wn,((t,e,n,i,r)=>()=>{const s=new WeakMap;return{render(o,a,c){const u=s.get(a);return void 0!==u?Promise.resolve(u):(async(o,a,c)=>{let u=n(o);const l=tt(u,a);if(!l){const t={attack:u.attack.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,knee:u.knee.value,ratio:u.ratio.value,release:u.release.value,threshold:u.threshold.value};u=e(a,t)}return s.set(a,u),l?(await t(a,o.attack,u.attack,c),await t(a,o.knee,u.knee,c),await t(a,o.ratio,u.ratio,c),await t(a,o.release,u.release,c),await t(a,o.threshold,u.threshold,c)):(await i(a,o.attack,u.attack,c),await i(a,o.knee,u.knee,c),await i(a,o.ratio,u.ratio,c),await i(a,o.release,u.release,c),await i(a,o.threshold,u.threshold,c)),await r(o,a,u,c),u})(o,a,c)}}})(gn,Vn,At,vn,Ge),Vn,_e,Xe,$e,Tn),Fn=((t,e,n,i,r,s)=>class extends t{constructor(t,o){const a=r(t),c={...Zt,...o},u=i(a,c),l=s(a);super(t,!1,u,l?n():null),this._gain=e(this,l,u.gain,ot,st)}get gain(){return this._gain}})(rn,wn,((t,e,n,i,r)=>()=>{const s=new WeakMap;return{render(o,a,c){const u=s.get(a);return void 0!==u?Promise.resolve(u):(async(o,a,c)=>{let u=n(o);const l=tt(u,a);if(!l){const t={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:u.gain.value};u=e(a,t)}return s.set(a,u),l?await t(a,o.gain,u.gain,c):await i(a,o.gain,u.gain,c),await r(o,a,u,c),u})(o,a,c)}}})(gn,de,At,vn,Ge),de,Xe,$e),qn=((t,e,n,i)=>(r,s,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:u,feedforward:l})=>{const h=ce(s,r.sampleRate),p=u instanceof Float64Array?u:new Float64Array(u),d=l instanceof Float64Array?l:new Float64Array(l),f=p.length,m=d.length,g=Math.min(f,m);if(0===f||f>20)throw i();if(0===p[0])throw e();if(0===m||m>20)throw i();if(0===d[0])throw e();if(1!==p[0]){for(let t=0;t<m;t+=1)d[t]/=p[0];for(let t=1;t<f;t+=1)p[t]/=p[0]}const _=n(r,h,o,o);_.channelCount=o,_.channelCountMode=a,_.channelInterpretation=c;const v=[],y=[],w=[];for(let t=0;t<o;t+=1){v.push(0);const t=new Float32Array(32),e=new Float32Array(32);t.fill(0),e.fill(0),y.push(t),w.push(e)}_.onaudioprocess=t=>{const e=t.inputBuffer,n=t.outputBuffer,i=e.numberOfChannels;for(let t=0;t<i;t+=1){const i=e.getChannelData(t),r=n.getChannelData(t);v[t]=Jt(p,f,d,m,g,y[t],w[t],v[t],32,i,r)}};const b=r.sampleRate/2;return he({get bufferSize(){return h},get channelCount(){return _.channelCount},set channelCount(t){_.channelCount=t},get channelCountMode(){return _.channelCountMode},set channelCountMode(t){_.channelCountMode=t},get channelInterpretation(){return _.channelInterpretation},set channelInterpretation(t){_.channelInterpretation=t},get context(){return _.context},get inputs(){return[_]},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},addEventListener:(...t)=>_.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>_.dispatchEvent(t[0]),getFrequencyResponse(e,n,i){if(e.length!==n.length||n.length!==i.length)throw t();const r=e.length;for(let t=0;t<r;t+=1){const r=-Math.PI*(e[t]/b),s=[Math.cos(r),Math.sin(r)],o=fe(me(d,s),me(p,s));n[t]=Math.sqrt(o[0]*o[0]+o[1]*o[1]),i[t]=Math.atan2(o[1],o[0])}},removeEventListener:(...t)=>_.removeEventListener(t[0],t[1],t[2])},_)})(Qt,$t,ge,_e),Un=((t,e,n,i)=>r=>t(ee,(()=>ee(r)))?Promise.resolve(t(i,i)).then((t=>{if(!t){const t=n(r,512,0,1);r.oncomplete=()=>{t.onaudioprocess=null,t.disconnect()},t.onaudioprocess=()=>r.currentTime,t.connect(r.destination)}return r.startRendering()})):new Promise((t=>{const n=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=e=>{n.disconnect(),t(e.renderedBuffer)},n.connect(r.destination),r.startRendering()})))(Fe,de,ge,((t,e)=>()=>{if(null===e)return Promise.resolve(!1);const n=new e(1,1,44100),i=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((t=>{n.oncomplete=()=>{i.disconnect(),t(0!==n.currentTime)},n.startRendering()}))})(de,Ze)),Bn=((t,e,n,i,r)=>(s,o)=>{const a=new WeakMap;let c=null;return{render(u,l,h){const p=a.get(l);return void 0!==p?Promise.resolve(p):(async(u,l,h)=>{let p=null,d=e(u);const f=tt(d,l);if(void 0===l.createIIRFilter?p=t(l,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):f||(d=l.createIIRFilter(o,s)),a.set(l,null===p?d:p),null!==p){if(null===c){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new n(u.context.destination.channelCount,u.context.length,l.sampleRate);c=(async()=>(await i(u,t,t.destination,h),((t,e,n,i)=>{const r=n instanceof Float64Array?n:new Float64Array(n),s=i instanceof Float64Array?i:new Float64Array(i),o=r.length,a=s.length,c=Math.min(o,a);if(1!==r[0]){for(let t=0;t<o;t+=1)s[t]/=r[0];for(let t=1;t<a;t+=1)r[t]/=r[0]}const u=new Float32Array(32),l=new Float32Array(32),h=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),p=t.numberOfChannels;for(let e=0;e<p;e+=1){const n=t.getChannelData(e),i=h.getChannelData(e);u.fill(0),l.fill(0),Jt(r,o,s,a,c,u,l,0,32,n,i)}return h})(await r(t),l,s,o)))()}const t=await c;return p.buffer=t,p.start(0),p}return await i(u,l,d,h),d})(u,l,h)}}})(_n,At,Ze,Ge,Un),Wn=((t,e,n,i,r,s)=>class extends t{constructor(t,o){const a=i(t),c=r(a),u={...Kt,...o},l=e(a,c?null:t.baseLatency,u);super(t,!1,l,c?n(u.feedback,u.feedforward):null),(t=>{var e;t.getFrequencyResponse=(e=t.getFrequencyResponse,(n,i,r)=>{if(n.length!==i.length||i.length!==r.length)throw Qt();return e.call(t,n,i,r)})})(l),this._nativeIIRFilterNode=l,s(this,1)}getFrequencyResponse(t,e,n){return this._nativeIIRFilterNode.getFrequencyResponse(t,e,n)}})(rn,(t=>(e,n,i)=>{if(void 0===e.createIIRFilter)return t(e,n,i);const r=e.createIIRFilter(i.feedforward,i.feedback);return ie(r,i),r})(qn),Bn,Xe,$e,Tn),zn=((t,e,n,i,r,s,o,a)=>(c,u)=>{const l=u.listener,{forwardX:h,forwardY:p,forwardZ:d,positionX:f,positionY:m,positionZ:g,upX:_,upY:v,upZ:y}=void 0===l.forwardX?(()=>{const h=new Float32Array(1),p=e(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),d=o(u);let f=!1,m=[0,0,-1,0,1,0],g=[0,0,0];const _=()=>{if(f)return;f=!0;const t=i(u,256,9,0);t.onaudioprocess=({inputBuffer:t})=>{const e=[s(t,h,0),s(t,h,1),s(t,h,2),s(t,h,3),s(t,h,4),s(t,h,5)];e.some(((t,e)=>t!==m[e]))&&(l.setOrientation(...e),m=e);const n=[s(t,h,6),s(t,h,7),s(t,h,8)];n.some(((t,e)=>t!==g[e]))&&(l.setPosition(...n),g=n)},p.connect(t)},v=t=>e=>{e!==m[t]&&(m[t]=e,l.setOrientation(...m))},y=t=>e=>{e!==g[t]&&(g[t]=e,l.setPosition(...g))},w=(e,i,s)=>{const o=n(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:i});o.connect(p,0,e),o.start(),Object.defineProperty(o.offset,"defaultValue",{get:()=>i});const l=t({context:c},d,o.offset,ot,st);var h,f,m,g,v,y,w;return a(l,"value",(t=>()=>t.call(l)),(t=>e=>{try{t.call(l,e)}catch(t){if(9!==t.code)throw t}_(),d&&s(e)})),l.cancelAndHoldAtTime=(h=l.cancelAndHoldAtTime,d?()=>{throw r()}:(...t)=>{const e=h.apply(l,t);return _(),e}),l.cancelScheduledValues=(f=l.cancelScheduledValues,d?()=>{throw r()}:(...t)=>{const e=f.apply(l,t);return _(),e}),l.exponentialRampToValueAtTime=(m=l.exponentialRampToValueAtTime,d?()=>{throw r()}:(...t)=>{const e=m.apply(l,t);return _(),e}),l.linearRampToValueAtTime=(g=l.linearRampToValueAtTime,d?()=>{throw r()}:(...t)=>{const e=g.apply(l,t);return _(),e}),l.setTargetAtTime=(v=l.setTargetAtTime,d?()=>{throw r()}:(...t)=>{const e=v.apply(l,t);return _(),e}),l.setValueAtTime=(y=l.setValueAtTime,d?()=>{throw r()}:(...t)=>{const e=y.apply(l,t);return _(),e}),l.setValueCurveAtTime=(w=l.setValueCurveAtTime,d?()=>{throw r()}:(...t)=>{const e=w.apply(l,t);return _(),e}),l};return{forwardX:w(0,0,v(0)),forwardY:w(1,0,v(1)),forwardZ:w(2,-1,v(2)),positionX:w(6,0,y(0)),positionY:w(7,0,y(1)),positionZ:w(8,0,y(2)),upX:w(3,0,v(3)),upY:w(4,1,v(4)),upZ:w(5,0,v(5))}})():l;return{get forwardX(){return h},get forwardY(){return p},get forwardZ(){return d},get positionX(){return f},get positionY(){return m},get positionZ(){return g},get upX(){return _},get upY(){return v},get upZ(){return y}}})(wn,On,Rn,ge,_e,Te,$e,Ee),Gn=new WeakMap,Hn=((t,e,n,i,r,s)=>class extends n{constructor(n,s){super(n),this._nativeContext=n,N.set(this,n),i(n)&&r.set(n,new Set),this._destination=new t(this,s),this._listener=e(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(t){const e="function"==typeof t?s(this,t):null;this._nativeContext.onstatechange=e;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===e?t:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(Sn,zn,Ke,$e,Gn,De),Xn=((t,e,n,i,r,s)=>(o,a)=>{const c=o.createOscillator();return ie(c,a),se(c,a,"detune"),se(c,a,"frequency"),void 0!==a.periodicWave?c.setPeriodicWave(a.periodicWave):ne(c,a,"type"),e(n,(()=>n(o)))||oe(c),e(i,(()=>i(o)))||s(c,o),e(r,(()=>r(o)))||ae(c),t(o,c),c})(fn,Fe,ke,Me,Ie,Re),Yn=((t,e,n,i,r)=>()=>{const s=new WeakMap;let o=null,a=null,c=null;return{set periodicWave(t){o=t},set start(t){a=t},set stop(t){c=t},render(u,l,h){const p=s.get(l);return void 0!==p?Promise.resolve(p):(async(u,l,h)=>{let p=n(u);const d=tt(p,l);if(!d){const t={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,detune:p.detune.value,frequency:p.frequency.value,periodicWave:null===o?void 0:o,type:p.type};p=e(l,t),null!==a&&p.start(a),null!==c&&p.stop(c)}return s.set(l,p),d?(await t(l,u.detune,p.detune,h),await t(l,u.frequency,p.frequency,h)):(await i(l,u.detune,p.detune,h),await i(l,u.frequency,p.frequency,h)),await r(u,l,p,h),p})(u,l,h)}}})(gn,Xn,At,vn,Ge),Zn=((t,e,n,i,r,s,o)=>class extends t{constructor(t,o){const a=r(t),c={...ye,...o},u=n(a,c),l=s(a),h=l?i():null,p=t.sampleRate/2;super(t,!1,u,h),this._detune=e(this,l,u.detune,153600,-153600),this._frequency=e(this,l,u.frequency,p,-p),this._nativeOscillatorNode=u,this._onended=null,this._oscillatorNodeRenderer=h,null!==this._oscillatorNodeRenderer&&void 0!==c.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=c.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(t){const e="function"==typeof t?o(this,t):null;this._nativeOscillatorNode.onended=e;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===e?t:n}get type(){return this._nativeOscillatorNode.type}set type(t){this._nativeOscillatorNode.type=t,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t)}start(t=0){if(this._nativeOscillatorNode.start(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=t),"closed"!==this.context.state){Z(this);const t=()=>{this._nativeOscillatorNode.removeEventListener("ended",t),at(this)&&Q(this)};this._nativeOscillatorNode.addEventListener("ended",t)}}stop(t=0){this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t)}})(rn,wn,Xn,Yn,Xe,$e,De),$n=(t=>(e,n)=>{const i=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return i.buffer=r,i.loop=!0,i.connect(n),i.start(),()=>{i.stop(),i.disconnect(n)}})(_n),Qn=((t,e,n,i,r)=>(s,{curve:o,oversample:a,...c})=>{const u=s.createWaveShaper(),l=s.createWaveShaper();ie(u,c),ie(l,c);const h=n(s,{...c,gain:1}),p=n(s,{...c,gain:-1}),d=n(s,{...c,gain:1}),f=n(s,{...c,gain:-1});let m=null,g=!1,_=null;const v={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(t){h.channelCount=t,p.channelCount=t,u.channelCount=t,d.channelCount=t,l.channelCount=t,f.channelCount=t},get channelCountMode(){return u.channelCountMode},set channelCountMode(t){h.channelCountMode=t,p.channelCountMode=t,u.channelCountMode=t,d.channelCountMode=t,l.channelCountMode=t,f.channelCountMode=t},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(t){h.channelInterpretation=t,p.channelInterpretation=t,u.channelInterpretation=t,d.channelInterpretation=t,l.channelInterpretation=t,f.channelInterpretation=t},get context(){return u.context},get curve(){return _},set curve(n){if(null!==n&&n.length<2)throw e();if(null===n)u.curve=n,l.curve=n;else{const t=n.length,e=new Float32Array(t+2-t%2),i=new Float32Array(t+2-t%2);e[0]=n[0],i[0]=-n[t-1];const r=Math.ceil((t+1)/2),s=(t+1)/2-1;for(let o=1;o<r;o+=1){const a=o/r*s,c=Math.floor(a),u=Math.ceil(a);e[o]=c===u?n[c]:(1-(a-c))*n[c]+(1-(u-a))*n[u],i[o]=c===u?-n[t-1-c]:-(1-(a-c))*n[t-1-c]-(1-(u-a))*n[t-1-u]}e[r]=t%2==1?n[r-1]:(n[r-2]+n[r-1])/2,u.curve=e,l.curve=i}_=n,g&&(i(_)&&null===m?m=t(s,h):null!==m&&(m(),m=null))},get inputs(){return[h]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get oversample(){return u.oversample},set oversample(t){u.oversample=t,l.oversample=t},addEventListener:(...t)=>h.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>h.dispatchEvent(t[0]),removeEventListener:(...t)=>h.removeEventListener(t[0],t[1],t[2])};return null!==o&&(v.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==v.oversample&&(v.oversample=a),r(he(v,d),(()=>{h.connect(u).connect(d),h.connect(p).connect(l).connect(f).connect(d),g=!0,i(_)&&(m=t(s,h))}),(()=>{h.disconnect(u),u.disconnect(d),h.disconnect(p),p.disconnect(l),l.disconnect(f),f.disconnect(d),g=!1,null!==m&&(m(),m=null)}))})($n,$t,de,Ce,En),Kn=((t,e,n,i,r,s,o)=>(a,c)=>{const u=a.createWaveShaper();if(null!==s&&"webkitAudioContext"===s.name&&void 0===a.createGain().gain.automationRate)return n(a,c);ie(u,c);const l=null===c.curve||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(null!==l&&l.length<2)throw e();ne(u,{curve:l},"curve"),ne(u,c,"oversample");let h=null,p=!1;return o(u,"curve",(t=>()=>t.call(u)),(e=>n=>(e.call(u,n),p&&(i(n)&&null===h?h=t(a,u):i(n)||null===h||(h(),h=null)),n))),r(u,(()=>{p=!0,i(u.curve)&&(h=t(a,u))}),(()=>{p=!1,null!==h&&(h(),h=null)}))})($n,$t,Qn,Ce,En,Je,Ee),Jn=(Ui=((t,e,n,i,r,s,o,a,c,u)=>(l,{coneInnerAngle:h,coneOuterAngle:p,coneOuterGain:d,distanceModel:f,maxDistance:m,orientationX:g,orientationY:_,orientationZ:v,panningModel:y,positionX:w,positionY:b,positionZ:x,refDistance:S,rolloffFactor:A,...T})=>{const C=l.createPanner();if(T.channelCount>2)throw o();if("max"===T.channelCountMode)throw o();ie(C,T);const E={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},O=n(l,{...E,channelInterpretation:"speakers",numberOfInputs:6}),k=i(l,{...T,gain:1}),M=i(l,{...E,gain:1}),I=i(l,{...E,gain:0}),R=i(l,{...E,gain:0}),D=i(l,{...E,gain:0}),P=i(l,{...E,gain:0}),N=i(l,{...E,gain:0}),L=r(l,256,6,1),V=s(l,{...E,curve:new Float32Array([1,1]),oversample:"none"});let j=[g,_,v],F=[w,b,x];const q=new Float32Array(1);L.onaudioprocess=({inputBuffer:t})=>{const e=[c(t,q,0),c(t,q,1),c(t,q,2)];e.some(((t,e)=>t!==j[e]))&&(C.setOrientation(...e),j=e);const n=[c(t,q,3),c(t,q,4),c(t,q,5)];n.some(((t,e)=>t!==F[e]))&&(C.setPosition(...n),F=n)},Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"defaultValue",{get:()=>0});const U={get bufferSize(){},get channelCount(){return C.channelCount},set channelCount(t){if(t>2)throw o();k.channelCount=t,C.channelCount=t},get channelCountMode(){return C.channelCountMode},set channelCountMode(t){if("max"===t)throw o();k.channelCountMode=t,C.channelCountMode=t},get channelInterpretation(){return C.channelInterpretation},set channelInterpretation(t){k.channelInterpretation=t,C.channelInterpretation=t},get coneInnerAngle(){return C.coneInnerAngle},set coneInnerAngle(t){C.coneInnerAngle=t},get coneOuterAngle(){return C.coneOuterAngle},set coneOuterAngle(t){C.coneOuterAngle=t},get coneOuterGain(){return C.coneOuterGain},set coneOuterGain(t){if(t<0||t>1)throw e();C.coneOuterGain=t},get context(){return C.context},get distanceModel(){return C.distanceModel},set distanceModel(t){C.distanceModel=t},get inputs(){return[k]},get maxDistance(){return C.maxDistance},set maxDistance(t){if(t<0)throw new RangeError;C.maxDistance=t},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},get orientationX(){return M.gain},get orientationY(){return I.gain},get orientationZ(){return R.gain},get panningModel(){return C.panningModel},set panningModel(t){C.panningModel=t},get positionX(){return D.gain},get positionY(){return P.gain},get positionZ(){return N.gain},get refDistance(){return C.refDistance},set refDistance(t){if(t<0)throw new RangeError;C.refDistance=t},get rolloffFactor(){return C.rolloffFactor},set rolloffFactor(t){if(t<0)throw new RangeError;C.rolloffFactor=t},addEventListener:(...t)=>k.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>k.dispatchEvent(t[0]),removeEventListener:(...t)=>k.removeEventListener(t[0],t[1],t[2])};return h!==U.coneInnerAngle&&(U.coneInnerAngle=h),p!==U.coneOuterAngle&&(U.coneOuterAngle=p),d!==U.coneOuterGain&&(U.coneOuterGain=d),f!==U.distanceModel&&(U.distanceModel=f),m!==U.maxDistance&&(U.maxDistance=m),g!==U.orientationX.value&&(U.orientationX.value=g),_!==U.orientationY.value&&(U.orientationY.value=_),v!==U.orientationZ.value&&(U.orientationZ.value=v),y!==U.panningModel&&(U.panningModel=y),w!==U.positionX.value&&(U.positionX.value=w),b!==U.positionY.value&&(U.positionY.value=b),x!==U.positionZ.value&&(U.positionZ.value=x),S!==U.refDistance&&(U.refDistance=S),A!==U.rolloffFactor&&(U.rolloffFactor=A),1===j[0]&&0===j[1]&&0===j[2]||C.setOrientation(...j),0===F[0]&&0===F[1]&&0===F[2]||C.setPosition(...F),u(he(U,C),(()=>{k.connect(C),t(k,V,0,0),V.connect(M).connect(O,0,0),V.connect(I).connect(O,0,1),V.connect(R).connect(O,0,2),V.connect(D).connect(O,0,3),V.connect(P).connect(O,0,4),V.connect(N).connect(O,0,5),O.connect(L).connect(l.destination)}),(()=>{k.disconnect(C),a(k,V,0,0),V.disconnect(M),M.disconnect(O),V.disconnect(I),I.disconnect(O),V.disconnect(R),R.disconnect(O),V.disconnect(D),D.disconnect(O),V.disconnect(P),P.disconnect(O),V.disconnect(N),N.disconnect(O),O.disconnect(L),L.disconnect(l.destination)}))})(yt,$t,On,de,ge,Kn,_e,St,Te,En),(t,e)=>{const n=t.createPanner();return void 0===n.orientationX?Ui(t,e):(ie(n,e),se(n,e,"orientationX"),se(n,e,"orientationY"),se(n,e,"orientationZ"),se(n,e,"positionX"),se(n,e,"positionY"),se(n,e,"positionZ"),ne(n,e,"coneInnerAngle"),ne(n,e,"coneOuterAngle"),ne(n,e,"coneOuterGain"),ne(n,e,"distanceModel"),ne(n,e,"maxDistance"),ne(n,e,"panningModel"),ne(n,e,"refDistance"),ne(n,e,"rolloffFactor"),n)}),ti=((t,e,n,i,r,s,o,a,c,u)=>()=>{const l=new WeakMap;let h=null;return{render(p,d,f){const m=l.get(d);return void 0!==m?Promise.resolve(m):(async(p,d,f)=>{let m=null,g=s(p);const _={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},v={..._,coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor},y=tt(g,d);if("bufferSize"in g)m=i(d,{..._,gain:1});else if(!y){const t={...v,orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value};g=r(d,t)}if(l.set(d,null===m?g:m),null!==m){if(null===h){if(null===o)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new o(6,p.context.length,d.sampleRate),i=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});i.connect(t.destination),h=(async()=>{const e=await Promise.all([p.orientationX,p.orientationY,p.orientationZ,p.positionX,p.positionY,p.positionZ].map((async(e,i)=>{const r=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===i?1:0});return await a(t,e,r.offset,f),r})));for(let t=0;t<6;t+=1)e[t].connect(i,0,t),e[t].start(0);return u(t)})()}const t=await h,s=i(d,{..._,gain:1});await c(p,d,s,f);const l=[];for(let e=0;e<t.numberOfChannels;e+=1)l.push(t.getChannelData(e));let g=[l[0][0],l[1][0],l[2][0]],y=[l[3][0],l[4][0],l[5][0]],w=i(d,{..._,gain:1}),b=r(d,{...v,orientationX:g[0],orientationY:g[1],orientationZ:g[2],positionX:y[0],positionY:y[1],positionZ:y[2]});s.connect(w).connect(b.inputs[0]),b.connect(m);for(let e=128;e<t.length;e+=128){const t=[l[0][e],l[1][e],l[2][e]],n=[l[3][e],l[4][e],l[5][e]];if(t.some(((t,e)=>t!==g[e]))||n.some(((t,e)=>t!==y[e]))){g=t,y=n;const o=e/d.sampleRate;w.gain.setValueAtTime(0,o),w=i(d,{..._,gain:0}),b=r(d,{...v,orientationX:g[0],orientationY:g[1],orientationZ:g[2],positionX:y[0],positionY:y[1],positionZ:y[2]}),w.gain.setValueAtTime(1,o),s.connect(w).connect(b.inputs[0]),b.connect(m)}}return m}return y?(await t(d,p.orientationX,g.orientationX,f),await t(d,p.orientationY,g.orientationY,f),await t(d,p.orientationZ,g.orientationZ,f),await t(d,p.positionX,g.positionX,f),await t(d,p.positionY,g.positionY,f),await t(d,p.positionZ,g.positionZ,f)):(await a(d,p.orientationX,g.orientationX,f),await a(d,p.orientationY,g.orientationY,f),await a(d,p.orientationZ,g.orientationZ,f),await a(d,p.positionX,g.positionX,f),await a(d,p.positionY,g.positionY,f),await a(d,p.positionZ,g.positionZ,f)),vt(g)?await c(p,d,g.inputs[0],f):await c(p,d,g,f),g})(p,d,f)}}})(gn,On,Rn,de,Jn,At,Ze,vn,Ge,Un),ei=((t,e,n,i,r,s,o)=>class extends t{constructor(t,a){const c=r(t),u={...we,...a},l=n(c,u),h=s(c);super(t,!1,l,h?i():null),this._nativePannerNode=l,this._orientationX=e(this,h,l.orientationX,ot,st),this._orientationY=e(this,h,l.orientationY,ot,st),this._orientationZ=e(this,h,l.orientationZ,ot,st),this._positionX=e(this,h,l.positionX,ot,st),this._positionY=e(this,h,l.positionY,ot,st),this._positionZ=e(this,h,l.positionZ,ot,st),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(t){this._nativePannerNode.coneInnerAngle=t}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(t){this._nativePannerNode.coneOuterAngle=t}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(t){this._nativePannerNode.coneOuterGain=t}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(t){this._nativePannerNode.distanceModel=t}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(t){this._nativePannerNode.maxDistance=t}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(t){this._nativePannerNode.panningModel=t}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(t){this._nativePannerNode.refDistance=t}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(t){this._nativePannerNode.rolloffFactor=t}})(rn,wn,Jn,ti,Xe,$e,Tn),ni=((t,e,n,i)=>class i{constructor(i,r){const s=e(i),o=(t=>{const{imag:e,real:n}=t;return void 0===e?void 0===n?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,(()=>0)),real:n}:void 0===n?{...t,imag:e,real:Array.from(e,(()=>0))}:{...t,imag:e,real:n}})({...be,...r}),a=t(s,o);return n.add(a),a}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===i.prototype||n.has(t)}})((t=>(e,{disableNormalization:n,imag:i,real:r})=>{const s=i instanceof Float32Array?i:new Float32Array(i),o=r instanceof Float32Array?r:new Float32Array(r),a=e.createPeriodicWave(o,s,{disableNormalization:n});if(Array.from(i).length<2)throw t();return a})(nt),Xe,new WeakSet),ii=((t,e)=>(n,i)=>{const r=i.channelCountMode;if("clamped-max"===r)throw e();if(void 0===n.createStereoPanner)return t(n,i);const s=n.createStereoPanner();return ie(s,i),se(s,i,"pan"),Object.defineProperty(s,"channelCountMode",{get:()=>r,set:t=>{if(t!==r)throw e()}}),s})(((t,e,n,i,r,s)=>{const o=16385,a=new Float32Array([1,1]),c=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},l={...u,oversample:"none"},h=(t,s,h,p,d)=>{if(1===s)return((t,e,r,s)=>{const h=new Float32Array(o),p=new Float32Array(o);for(let t=0;t<o;t+=1){const e=t/16384*c;h[t]=Math.cos(e),p[t]=Math.sin(e)}const d=n(t,{...u,gain:0}),f=i(t,{...l,curve:h}),m=i(t,{...l,curve:a}),g=n(t,{...u,gain:0}),_=i(t,{...l,curve:p});return{connectGraph(){e.connect(d),e.connect(void 0===m.inputs?m:m.inputs[0]),e.connect(g),m.connect(r),r.connect(void 0===f.inputs?f:f.inputs[0]),r.connect(void 0===_.inputs?_:_.inputs[0]),f.connect(d.gain),_.connect(g.gain),d.connect(s,0,0),g.connect(s,0,1)},disconnectGraph(){e.disconnect(d),e.disconnect(void 0===m.inputs?m:m.inputs[0]),e.disconnect(g),m.disconnect(r),r.disconnect(void 0===f.inputs?f:f.inputs[0]),r.disconnect(void 0===_.inputs?_:_.inputs[0]),f.disconnect(d.gain),_.disconnect(g.gain),d.disconnect(s,0,0),g.disconnect(s,0,1)}}})(t,h,p,d);if(2===s)return((t,r,s,h)=>{const p=new Float32Array(o),d=new Float32Array(o),f=new Float32Array(o),m=new Float32Array(o),g=Math.floor(8192.5);for(let t=0;t<o;t+=1)if(t>g){const e=(t-g)/(16384-g)*c;p[t]=Math.cos(e),d[t]=Math.sin(e),f[t]=0,m[t]=1}else{const e=t/(16384-g)*c;p[t]=1,d[t]=0,f[t]=Math.cos(e),m[t]=Math.sin(e)}const _=e(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),v=n(t,{...u,gain:0}),y=i(t,{...l,curve:p}),w=n(t,{...u,gain:0}),b=i(t,{...l,curve:d}),x=i(t,{...l,curve:a}),S=n(t,{...u,gain:0}),A=i(t,{...l,curve:f}),T=n(t,{...u,gain:0}),C=i(t,{...l,curve:m});return{connectGraph(){r.connect(_),r.connect(void 0===x.inputs?x:x.inputs[0]),_.connect(v,0),_.connect(w,0),_.connect(S,1),_.connect(T,1),x.connect(s),s.connect(void 0===y.inputs?y:y.inputs[0]),s.connect(void 0===b.inputs?b:b.inputs[0]),s.connect(void 0===A.inputs?A:A.inputs[0]),s.connect(void 0===C.inputs?C:C.inputs[0]),y.connect(v.gain),b.connect(w.gain),A.connect(S.gain),C.connect(T.gain),v.connect(h,0,0),S.connect(h,0,0),w.connect(h,0,1),T.connect(h,0,1)},disconnectGraph(){r.disconnect(_),r.disconnect(void 0===x.inputs?x:x.inputs[0]),_.disconnect(v,0),_.disconnect(w,0),_.disconnect(S,1),_.disconnect(T,1),x.disconnect(s),s.disconnect(void 0===y.inputs?y:y.inputs[0]),s.disconnect(void 0===b.inputs?b:b.inputs[0]),s.disconnect(void 0===A.inputs?A:A.inputs[0]),s.disconnect(void 0===C.inputs?C:C.inputs[0]),y.disconnect(v.gain),b.disconnect(w.gain),A.disconnect(S.gain),C.disconnect(T.gain),v.disconnect(h,0,0),S.disconnect(h,0,0),w.disconnect(h,0,1),T.disconnect(h,0,1)}}})(t,h,p,d);throw r()};return(e,{channelCount:i,channelCountMode:o,pan:a,...c})=>{if("max"===o)throw r();const u=t(e,{...c,channelCount:1,channelCountMode:o,numberOfInputs:2}),l=n(e,{...c,channelCount:i,channelCountMode:o,gain:1}),p=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:a});let{connectGraph:d,disconnectGraph:f}=h(e,i,l,p,u);Object.defineProperty(p.gain,"defaultValue",{get:()=>0}),Object.defineProperty(p.gain,"maxValue",{get:()=>1}),Object.defineProperty(p.gain,"minValue",{get:()=>-1});const m={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(t){l.channelCount!==t&&(g&&f(),({connectGraph:d,disconnectGraph:f}=h(e,t,l,p,u)),g&&d()),l.channelCount=t},get channelCountMode(){return l.channelCountMode},set channelCountMode(t){if("clamped-max"===t||"max"===t)throw r();l.channelCountMode=t},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(t){l.channelInterpretation=t},get context(){return l.context},get inputs(){return[l]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get pan(){return p.gain},addEventListener:(...t)=>l.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>l.dispatchEvent(t[0]),removeEventListener:(...t)=>l.removeEventListener(t[0],t[1],t[2])};let g=!1;return s(he(m,u),(()=>{d(),g=!0}),(()=>{f(),g=!1}))}})(On,le,de,Kn,_e,En),_e),ri=((t,e,n,i,r)=>()=>{const s=new WeakMap;return{render(o,a,c){const u=s.get(a);return void 0!==u?Promise.resolve(u):(async(o,a,c)=>{let u=n(o);const l=tt(u,a);if(!l){const t={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,pan:u.pan.value};u=e(a,t)}return s.set(a,u),l?await t(a,o.pan,u.pan,c):await i(a,o.pan,u.pan,c),vt(u)?await r(o,a,u.inputs[0],c):await r(o,a,u,c),u})(o,a,c)}}})(gn,ii,At,vn,Ge),si=((t,e,n,i,r,s)=>class extends t{constructor(t,o){const a=r(t),c={...xe,...o},u=n(a,c),l=s(a);super(t,!1,u,l?i():null),this._pan=e(this,l,u.pan)}get pan(){return this._pan}})(rn,wn,ii,ri,Xe,$e),oi=((t,e,n)=>()=>{const i=new WeakMap;return{render(r,s,o){const a=i.get(s);return void 0!==a?Promise.resolve(a):(async(r,s,o)=>{let a=e(r);if(!tt(a,s)){const e={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(s,e)}return i.set(s,a),vt(a)?await n(r,s,a.inputs[0],o):await n(r,s,a,o),a})(r,s,o)}}})(Kn,At,Ge),ai=((t,e,n,i,r,s,o)=>class extends t{constructor(t,e){const a=r(t),c={...Ae,...e},u=n(a,c);super(t,!0,u,s(a)?i():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=u,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(t){if(null===t)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(t.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=t}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(t){this._nativeWaveShaperNode.oversample=t}})(rn,$t,Kn,oi,Xe,$e,Tn),ci=(t=>null!==t&&t.isSecureContext)(Be),ui=(t=>(e,n,i)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get:()=>Math.round(e*n)},currentTime:{configurable:!0,get:()=>e}});try{return i()}finally{null!==t&&(delete t.currentFrame,delete t.currentTime)}})(Be),li=new WeakMap,hi=((t,e)=>n=>{let i=t.get(n);if(void 0!==i)return i;if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");return i=new e(1,1,44100),t.set(n,i),i})(li,Ze),pi=(t=>null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null)(Be),di=ci?((t,e,n,i,r,s,o,a,c,u,l,h,p)=>{let d=0;return(f,m,g={credentials:"omit"})=>{const _=l.get(f);if(void 0!==_&&_.has(m))return Promise.resolve();const v=u.get(f);if(void 0!==v){const t=v.get(m);if(void 0!==t)return t}const y=s(f),w=void 0===y.audioWorklet?r(m).then((([t,e])=>{const[i,r]=B(t,e);return n(`${i};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${r}\n})})(window,'_AWGS')`)})).then((()=>{const t=p._AWGS.pop();if(void 0===t)throw new SyntaxError;i(y.currentTime,y.sampleRate,(()=>t(class{},void 0,((t,n)=>{if(""===t.trim())throw e();const i=j.get(y);if(void 0!==i){if(i.has(t))throw e();z(n),W(n.parameterDescriptors),i.set(t,n)}else z(n),W(n.parameterDescriptors),j.set(y,new Map([[t,n]]))}),y.sampleRate,void 0,void 0)))})):Promise.all([r(m),Promise.resolve(t(h,h))]).then((([[t,e],n])=>{const i=d+1;d=i;const[r,s]=B(t,e),u=new Blob([`${r};((AudioWorkletProcessor,registerProcessor)=>{${s}\n})(${n?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${n?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${n?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${i}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),l=URL.createObjectURL(u);return y.audioWorklet.addModule(l,g).then((()=>{if(a(y))return y;const t=o(y);return t.audioWorklet.addModule(l,g).then((()=>t))})).then((t=>{if(null===c)throw new SyntaxError;try{new c(t,`__sac${i}`)}catch{throw new SyntaxError}})).finally((()=>URL.revokeObjectURL(l)))}));return void 0===v?u.set(f,new Map([[m,w]])):v.set(m,w),w.then((()=>{const t=l.get(f);void 0===t?l.set(f,new Set([m])):t.add(m)})).finally((()=>{const t=u.get(f);void 0!==t&&t.delete(m)})),w}})(Fe,_e,(t=>e=>new Promise(((n,i)=>{if(null===t)return void i(new SyntaxError);const r=t.document.head;if(null===r)i(new SyntaxError);else{const s=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),c=t.onerror,u=()=>{t.onerror=c,URL.revokeObjectURL(a)};t.onerror=(e,n,r,s,o)=>n===a||n===t.location.href&&1===r&&1===s?(u(),i(o),!1):null!==c?c(e,n,r,s,o):void 0,s.onerror=()=>{u(),i(new SyntaxError)},s.onload=()=>{u(),n()},s.src=a,s.type="module",r.appendChild(s)}})))(Be),ui,(async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw new DOMException("","AbortError")}),Xe,hi,$e,pi,new WeakMap,new WeakMap,((t,e)=>async()=>{if(null===t)return!0;if(null===e)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),i=new e(1,128,44100),r=URL.createObjectURL(n);let s=!1,o=!1;try{await i.audioWorklet.addModule(r);const e=new t(i,"a",{numberOfOutputs:0}),n=i.createOscillator();e.port.onmessage=()=>s=!0,e.onprocessorerror=()=>o=!0,n.connect(e),n.start(0),await i.startRendering()}catch{}finally{URL.revokeObjectURL(r)}return s&&!o})(pi,Ze),Be):void 0,fi=((t,e)=>n=>t(n)||e(n))(tn,$e),mi=((t,e,n,i,r,s,o,a,c,u,l,h,p,d,f,m,g,_,v,y)=>class extends f{constructor(e,n){super(e,n),this._nativeContext=e,this._audioWorklet=void 0===t?void 0:{addModule:(e,n)=>t(this,e,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(t,e,i){return new n({length:e,numberOfChannels:t,sampleRate:i})}createBufferSource(){return new i(this)}createChannelMerger(t=6){return new s(this,{numberOfInputs:t})}createChannelSplitter(t=6){return new o(this,{numberOfOutputs:t})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(t=1){return new l(this,{maxDelayTime:t})}createDynamicsCompressor(){return new h(this)}createGain(){return new p(this)}createIIRFilter(t,e){return new d(this,{feedback:e,feedforward:t})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(t,e,n={disableNormalization:!1}){return new _(this,{...n,imag:e,real:t})}createStereoPanner(){return new v(this)}createWaveShaper(){return new y(this)}decodeAudioData(t,e,n){return u(this._nativeContext,t).then((t=>("function"==typeof e&&e(t),t)),(t=>{throw"function"==typeof n&&n(t),t}))}})(di,on,dn,xn,Cn,kn,Mn,Dn,Nn,((t,e,n,i,r,s,o,a,c,u,l)=>(n,i)=>{const h=o(n)?n:s(n);if(r.has(i)){const t=new DOMException("","DataCloneError");return Promise.reject(t)}try{r.add(i)}catch{}return e(c,(()=>c(h)))?h.decodeAudioData(i).then((n=>(Gt(i).catch((()=>{})),e(a,(()=>a(n)))||l(n),t.add(n),n))):new Promise(((e,n)=>{const r=async()=>{try{await Gt(i)}catch{}},s=t=>{n(t),r()};try{h.decodeAudioData(i,(n=>{"function"!=typeof n.copyFromChannel&&(u(n),it(n)),t.add(n),r().then((()=>e(n)))}),(t=>{s(null===t?new DOMException("","EncodingError"):t)}))}catch(t){s(t)}}))})(an,Fe,0,0,new WeakSet,Xe,fi,et,ee,hn,pn),Ln,jn,Fn,Wn,Hn,Zn,ei,ni,si,ai),gi=((t,e,n,i)=>class extends t{constructor(t,e){const r=n(t),s=((t,e)=>t.createMediaElementSource(e.mediaElement))(r,e);if(i(r))throw TypeError();super(t,!0,s,null),this._nativeMediaElementAudioSourceNode=s}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(rn,0,Xe,$e),_i=((t,e,n,i)=>class extends t{constructor(t,e){const r=n(t);if(i(r))throw new TypeError;const s=((t,e)=>{const n=t.createMediaStreamDestination();return ie(n,e),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n})(r,{...te,...e});super(t,!1,s,null),this._nativeMediaStreamAudioDestinationNode=s}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(rn,0,Xe,$e),vi=((t,e,n,i)=>class extends t{constructor(t,e){const r=n(t),s=((t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort(((t,e)=>t.id<e.id?-1:t.id>e.id?1:0));const i=n.slice(0,1),r=t.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(r,"mediaStream",{value:e}),r})(r,e);if(i(r))throw new TypeError;super(t,!0,s,null),this._nativeMediaStreamAudioSourceNode=s}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(rn,0,Xe,$e),yi=((t,e,n)=>class extends t{constructor(t,i){const r=n(t);super(t,!0,e(r,i),null)}})(rn,((t,e)=>(n,{mediaStreamTrack:i})=>{if("function"==typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(i);const r=new MediaStream([i]),s=n.createMediaStreamSource(r);if("audio"!==i.kind)throw t();if(e(n))throw new TypeError;return s})($t,$e),Xe),wi=((t,e,n,i,r,s,o,a,c)=>class extends t{constructor(t={}){if(null===c)throw new Error("Missing the native AudioContext constructor.");let e;try{e=new c(t)}catch(t){if(12===t.code&&"sampleRate is not in range"===t.message)throw n();throw t}if(null===e)throw i();if(!(t=>void 0===t||"number"==typeof t||"string"==typeof t&&("balanced"===t||"interactive"===t||"playback"===t))(t.latencyHint))throw new TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==t.sampleRate&&e.sampleRate!==t.sampleRate)throw n();super(e,2);const{latencyHint:r}=t,{sampleRate:s}=e;if(this._baseLatency="number"==typeof e.baseLatency?e.baseLatency:"balanced"===r?512/s:"interactive"===r||void 0===r?256/s:"playback"===r?1024/s:128*Math.max(2,Math.min(128,Math.round(r*s/128)))/s,this._nativeAudioContext=e,"webkitAudioContext"===c.name?(this._nativeGainNode=e.createGain(),this._nativeOscillatorNode=e.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(e.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===e.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),e.removeEventListener("statechange",t)};e.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then((()=>{throw e()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then((()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),pt(this)})))}createMediaElementSource(t){return new r(this,{mediaElement:t})}createMediaStreamDestination(){return new s(this)}createMediaStreamSource(t){return new o(this,{mediaStream:t})}createMediaStreamTrackSource(t){return new a(this,{mediaStreamTrack:t})}resume(){return"suspended"===this._state?new Promise(((t,e)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",n)})):this._nativeAudioContext.resume().catch((t=>{if(void 0===t||15===t.code)throw e();throw t}))}suspend(){return this._nativeAudioContext.suspend().catch((t=>{if(void 0===t)throw e();throw t}))}})(mi,$t,_e,Se,gi,_i,vi,yi,Je),bi=(t=>e=>{const n=t.get(e);if(void 0===n)throw new Error("The context has no set of AudioWorkletNodes.");return n})(Gn),xi=(t=>(e,n)=>{t(e).add(n)})(bi),Si=(t=>(e,n,i=0,r=0)=>{const s=e[i];if(void 0===s)throw t();return Mt(n)?s.connect(n,0,r):s.connect(n,0)})(nt),Ai=(t=>(e,n)=>{t(e).delete(n)})(bi),Ti=(t=>(e,n,i,r=0)=>void 0===n?e.forEach((t=>t.disconnect())):"number"==typeof n?Xt(t,e,n).disconnect():Mt(n)?void 0===i?e.forEach((t=>t.disconnect(n))):void 0===r?Xt(t,e,i).disconnect(n,0):Xt(t,e,i).disconnect(n,0,r):void 0===i?e.forEach((t=>t.disconnect(n))):Xt(t,e,i).disconnect(n,0))(nt),Ci=new WeakMap,Ei=((t,e)=>n=>e(t,n))(Ci,G),Oi=((t,e,n,i,r,s,o,a,c,u,l,h,p)=>(d,f,m,g)=>{if(0===g.numberOfInputs&&0===g.numberOfOutputs)throw c();const _=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(_.some((t=>t<1)))throw c();if(_.length!==g.numberOfOutputs)throw e();if("explicit"!==g.channelCountMode)throw c();const v=g.channelCount*g.numberOfInputs,y=_.reduce(((t,e)=>t+e),0),w=void 0===m.parameterDescriptors?0:m.parameterDescriptors.length;if(v+w>6||y>6)throw c();const b=new MessageChannel,x=[],S=[];for(let t=0;t<g.numberOfInputs;t+=1)x.push(o(d,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),S.push(r(d,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const A=[];if(void 0!==m.parameterDescriptors)for(const{defaultValue:t,maxValue:e,minValue:n,name:i}of m.parameterDescriptors){const r=s(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==g.parameterData[i]?g.parameterData[i]:void 0===t?0:t});Object.defineProperties(r.offset,{defaultValue:{get:()=>void 0===t?0:t},maxValue:{get:()=>void 0===e?ot:e},minValue:{get:()=>void 0===n?st:n}}),A.push(r)}const T=i(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,v+w)}),C=ce(f,d.sampleRate),E=a(d,C,v+w,Math.max(1,y)),O=r(d,{channelCount:Math.max(1,y),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,y)}),k=[];for(let t=0;t<g.numberOfOutputs;t+=1)k.push(i(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:_[t]}));for(let t=0;t<g.numberOfInputs;t+=1){x[t].connect(S[t]);for(let e=0;e<g.channelCount;e+=1)S[t].connect(T,e,t*g.channelCount+e)}const M=new Pt(void 0===m.parameterDescriptors?[]:m.parameterDescriptors.map((({name:t},e)=>{const n=A[e];return n.connect(T,0,v+e),n.start(0),[t,n.offset]})));T.connect(E);let I=g.channelInterpretation,R=null;const D=0===g.numberOfOutputs?[E]:k,P={get bufferSize(){return C},get channelCount(){return g.channelCount},set channelCount(t){throw n()},get channelCountMode(){return g.channelCountMode},set channelCountMode(t){throw n()},get channelInterpretation(){return I},set channelInterpretation(t){for(const e of x)e.channelInterpretation=t;I=t},get context(){return E.context},get inputs(){return x},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return R},set onprocessorerror(t){"function"==typeof R&&P.removeEventListener("processorerror",R),R="function"==typeof t?t:null,"function"==typeof R&&P.addEventListener("processorerror",R)},get parameters(){return M},get port(){return b.port2},addEventListener:(...t)=>E.addEventListener(t[0],t[1],t[2]),connect:t.bind(null,D),disconnect:u.bind(null,D),dispatchEvent:(...t)=>E.dispatchEvent(t[0]),removeEventListener:(...t)=>E.removeEventListener(t[0],t[1],t[2])},N=new Map;var L,V;b.port1.addEventListener=(L=b.port1.addEventListener,(...t)=>{if("message"===t[0]){const e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=N.get(t[1]);void 0!==n?t[1]=n:(t[1]=t=>{l(d.currentTime,d.sampleRate,(()=>e(t)))},N.set(e,t[1]))}}return L.call(b.port1,t[0],t[1],t[2])}),b.port1.removeEventListener=(V=b.port1.removeEventListener,(...t)=>{if("message"===t[0]){const e=N.get(t[1]);void 0!==e&&(N.delete(t[1]),t[1]=e)}return V.call(b.port1,t[0],t[1],t[2])});let j=null;Object.defineProperty(b.port1,"onmessage",{get:()=>j,set:t=>{"function"==typeof j&&b.port1.removeEventListener("message",j),j="function"==typeof t?t:null,"function"==typeof j&&(b.port1.addEventListener("message",j),b.port1.start())}}),m.prototype.port=b.port1;let q=null;((t,e,n,i)=>{let r=F.get(t);void 0===r&&(r=new WeakMap,F.set(t,r));const s=(async(t,e)=>new t(await(t=>new Promise(((e,n)=>{const{port1:i,port2:r}=new MessageChannel;i.onmessage=({data:t})=>{i.close(),r.close(),e(t)},i.onmessageerror=({data:t})=>{i.close(),r.close(),n(t)},r.postMessage(t)})))(e)))(n,i);return r.set(e,s),s})(d,P,m,g).then((t=>q=t));const U=jt(g.numberOfInputs,g.channelCount),B=jt(g.numberOfOutputs,_),W=void 0===m.parameterDescriptors?[]:m.parameterDescriptors.reduce(((t,{name:e})=>({...t,[e]:new Float32Array(128)})),{});let z=!0;const G=()=>{g.numberOfOutputs>0&&E.disconnect(O);for(let t=0,e=0;t<g.numberOfOutputs;t+=1){const n=k[t];for(let i=0;i<_[t];i+=1)O.disconnect(n,e+i,i);e+=_[t]}},H=new Map;E.onaudioprocess=({inputBuffer:t,outputBuffer:e})=>{if(null!==q){const n=h(P);for(let i=0;i<C;i+=128){for(let e=0;e<g.numberOfInputs;e+=1)for(let n=0;n<g.channelCount;n+=1)Lt(t,U[e],n,n,i);void 0!==m.parameterDescriptors&&m.parameterDescriptors.forEach((({name:e},n)=>{Lt(t,W,e,v+n,i)}));for(let t=0;t<g.numberOfInputs;t+=1)for(let e=0;e<_[t];e+=1)0===B[t][e].byteLength&&(B[t][e]=new Float32Array(128));try{const t=U.map(((t,e)=>{if(n[e].size>0)return H.set(e,C/128),t;const i=H.get(e);return void 0===i?[]:(t.every((t=>t.every((t=>0===t))))&&(1===i?H.delete(e):H.set(e,i-1)),t)})),r=l(d.currentTime+i/d.sampleRate,d.sampleRate,(()=>q.process(t,B,W)));z=r;for(let t=0,n=0;t<g.numberOfOutputs;t+=1){for(let r=0;r<_[t];r+=1)Vt(e,B[t],r,n+r,i);n+=_[t]}}catch(t){z=!1,P.dispatchEvent(new ErrorEvent("processorerror",{colno:t.colno,filename:t.filename,lineno:t.lineno,message:t.message}))}if(!z){for(let t=0;t<g.numberOfInputs;t+=1){x[t].disconnect(S[t]);for(let e=0;e<g.channelCount;e+=1)S[i].disconnect(T,e,t*g.channelCount+e)}if(void 0!==m.parameterDescriptors){const t=m.parameterDescriptors.length;for(let e=0;e<t;e+=1){const t=A[e];t.disconnect(T,0,v+e),t.stop()}}T.disconnect(E),E.onaudioprocess=null,X?G():$();break}}}};let X=!1;const Y=o(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Z=()=>E.connect(Y).connect(d.destination),$=()=>{E.disconnect(Y),Y.disconnect()};return Z(),p(P,(()=>{if(z){$(),g.numberOfOutputs>0&&E.connect(O);for(let t=0,e=0;t<g.numberOfOutputs;t+=1){const n=k[t];for(let i=0;i<_[t];i+=1)O.connect(n,e+i,i);e+=_[t]}}X=!0}),(()=>{z&&(Z(),G()),X=!1}))})(Si,nt,$t,On,le,Rn,de,ge,_e,Ti,ui,Ei,En),ki=((t,e,n,i,r)=>(s,o,a,c,u,l)=>{if(null!==a)try{const e=new a(s,c,l),i=new Map;let o=null;if(Object.defineProperties(e,{channelCount:{get:()=>l.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>o,set:t=>{"function"==typeof o&&e.removeEventListener("processorerror",o),o="function"==typeof t?t:null,"function"==typeof o&&e.addEventListener("processorerror",o)}}}),e.addEventListener=(p=e.addEventListener,(...t)=>{if("processorerror"===t[0]){const e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=i.get(t[1]);void 0!==n?t[1]=n:(t[1]=n=>{"error"===n.type?(Object.defineProperties(n,{type:{value:"processorerror"}}),e(n)):e(new ErrorEvent(t[0],{...n}))},i.set(e,t[1]))}}return p.call(e,"error",t[1],t[2]),p.call(e,...t)}),e.removeEventListener=(h=e.removeEventListener,(...t)=>{if("processorerror"===t[0]){const e=i.get(t[1]);void 0!==e&&(i.delete(t[1]),t[1]=e)}return h.call(e,"error",t[1],t[2]),h.call(e,t[0],t[1],t[2])}),0!==l.numberOfOutputs){const t=n(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return e.connect(t).connect(s.destination),r(e,(()=>t.disconnect()),(()=>t.connect(s.destination)))}return e}catch(t){if(11===t.code)throw i();throw t}var h,p;if(void 0===u)throw i();return(t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}})(l),e(s,o,u,l)})($t,Oi,de,_e,En),Mi=((t,e,n,i,r,s,o,a,c,u,l,h,p,d,f,m)=>(g,_,v)=>{const y=new WeakMap;let w=null;return{render(b,x,S){a(x,b);const A=y.get(x);return void 0!==A?Promise.resolve(A):(async(a,b,x)=>{let S=l(a),A=null;const T=tt(S,b),C=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(null===h){const t=C.reduce(((t,e)=>t+e),0),n=r(b,{channelCount:Math.max(1,t),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,t)}),s=[];for(let t=0;t<a.numberOfOutputs;t+=1)s.push(i(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:C[t]}));const u=o(b,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1});u.connect=e.bind(null,s),u.disconnect=c.bind(null,s),A=[n,s,u]}else T||(S=new h(b,g));if(y.set(b,null===A?S:A[2]),null!==A){if(null===w){if(void 0===v)throw new Error("Missing the processor constructor.");if(null===p)throw new Error("Missing the native OfflineAudioContext constructor.");const t=a.channelCount*a.numberOfInputs,e=void 0===v.parameterDescriptors?0:v.parameterDescriptors.length,n=t+e,c=async()=>{const c=new p(n,128*Math.ceil(a.context.length/128),b.sampleRate),u=[],l=[];for(let t=0;t<_.numberOfInputs;t+=1)u.push(o(c,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),l.push(r(c,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const h=await Promise.all(Array.from(a.parameters.values()).map((async t=>{const e=s(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:t.value});return await d(c,t,e.offset,x),e}))),g=i(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,t+e)});for(let t=0;t<_.numberOfInputs;t+=1){u[t].connect(l[t]);for(let e=0;e<_.channelCount;e+=1)l[t].connect(g,e,t*_.channelCount+e)}for(const[e,n]of h.entries())n.connect(g,0,t+e),n.start(0);return g.connect(c.destination),await Promise.all(u.map((t=>f(a,c,t,x)))),m(c)};w=Ft(a,0===n?null:await c(),b,_,C,v,u)}const t=await w,e=n(b,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[c,l,h]=A;null!==t&&(e.buffer=t,e.start(0)),e.connect(c);for(let t=0,e=0;t<a.numberOfOutputs;t+=1){const n=l[t];for(let i=0;i<C[t];i+=1)c.connect(n,e+i,i);e+=C[t]}return h}if(T)for(const[e,n]of a.parameters.entries())await t(b,n,S.parameters.get(e),x);else for(const[t,e]of a.parameters.entries())await d(b,e,S.parameters.get(t),x);return await f(a,b,S,x),S})(b,x,S)}}})(gn,Si,_n,On,le,Rn,de,Ai,Ti,ui,At,pi,Ze,vn,Ge,Un),Ii=(t=>e=>t.get(e))(li),Ri=(t=>(e,n)=>{t.set(e,n)})(Ci),Di=ci?((t,e,n,i,r,s,o,a,c,u,l,h,p,d)=>class extends e{constructor(e,l,p){var d;const f=a(e),m=c(f),g=(t=>({...t,outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:Array.from({length:t.numberOfOutputs},(()=>1))}))({...Nt,...p});(t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}})(g);const _=j.get(f),v=null==_?void 0:_.get(l),y=m||"closed"!==f.state?f:null!==(d=o(f))&&void 0!==d?d:f,w=r(y,m?null:e.baseLatency,u,l,v,g);super(e,!0,w,m?i(l,g,v):null);const b=[];w.parameters.forEach(((t,e)=>{const i=n(this,m,t);b.push([e,i])})),this._nativeAudioWorkletNode=w,this._onprocessorerror=null,this._parameters=new Pt(b),m&&t(f,this);const{activeInputs:x}=s(this);h(w,x)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(t){const e="function"==typeof t?d(this,t):null;this._nativeAudioWorkletNode.onprocessorerror=e;const n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===e?t:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(xi,rn,wn,Mi,ki,ut,Ii,Xe,$e,pi,0,Ri,0,De):void 0,Pi=((t,e)=>(n,i,r)=>{if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,i,r)}catch(e){if("SyntaxError"===e.name)throw t();throw e}})(_e,Ze),Ni=((t,e,n,i,r,s,o,a)=>{const c=[];return(u,l)=>n(u).render(u,l,c).then((()=>Promise.all(Array.from(i(l)).map((t=>n(t).render(t,l,c)))))).then((()=>r(l))).then((n=>("function"!=typeof n.copyFromChannel?(o(n),it(n)):e(s,(()=>s(n)))||a(n),t.add(n),n)))})(an,Fe,ze,bi,Un,et,hn,pn),Li=((t,e,n,i,r)=>class extends t{constructor(t,n,r){let s;if("number"==typeof t&&void 0!==n&&void 0!==r)s={length:n,numberOfChannels:t,sampleRate:r};else{if("object"!=typeof t)throw new Error("The given parameters are not valid.");s=t}const{length:o,numberOfChannels:a,sampleRate:c}={...ve,...s},u=i(a,o,c);e(ee,(()=>ee(u)))||u.addEventListener("statechange",(()=>{let t=0;const e=n=>{"running"===this._state&&(t>0?(u.removeEventListener("statechange",e),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):t+=1)};return e})()),super(u,a),this._length=o,this._nativeOfflineAudioContext=u,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally((()=>{this._state=null,pt(this)})))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout((()=>this._waitForThePromiseToSettle(t)))}})(mi,Fe,$t,Pi,Ni),Vi=((t,e)=>n=>{const i=t.get(n);return e(i)||e(n)})(N,tn),ji=((t,e)=>n=>t.has(n)||e(n))(R,en),Fi=((t,e)=>n=>t.has(n)||e(n))(P,nn),qi=((t,e)=>n=>{const i=t.get(n);return e(i)||e(n)})(N,$e);var Ui;function Bi(t,e){if(!t)throw new Error(e)}function Wi(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function zi(t){t.isOffline||"running"===t.state||Hi('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Gi=console;function Hi(...t){Gi.warn(...t)}function Xi(t){return void 0===t}function Yi(t){return!Xi(t)}function Zi(t){return"number"==typeof t}function $i(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function Qi(t){return Array.isArray(t)}function Ki(t){return"string"==typeof t}function Ji(t){return Ki(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}const tr="object"==typeof self?self:null,er=tr&&(tr.hasOwnProperty("AudioContext")||tr.hasOwnProperty("webkitAudioContext"));function nr(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}function ir(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}Object.create,Object.create;class rr{constructor(t,e,n){this._callback=t,this._type=e,this._updateInterval=n,this._createClock()}_createWorker(){const t=new Blob([`\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`],{type:"text/javascript"}),e=URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout((()=>{this._createTimeout(),this._callback()}),1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function sr(t){return Fi(t)}function or(t){return ji(t)}function ar(t){return qi(t)}function cr(t){return Vi(t)}function ur(t){return t instanceof AudioBuffer}function lr(t,e){return"value"===t||sr(e)||or(e)||ur(e)}function hr(t,...e){if(!e.length)return t;const n=e.shift();if($i(t)&&$i(n))for(const e in n)lr(e,n[e])?t[e]=n[e]:$i(n[e])?(t[e]||Object.assign(t,{[e]:{}}),hr(t[e],n[e])):Object.assign(t,{[e]:n[e]});return hr(t,...e)}function pr(t,e,n=[],i){const r={},s=Array.from(e);if($i(s[0])&&i&&!Reflect.has(s[0],i)&&(Object.keys(s[0]).some((e=>Reflect.has(t,e)))||(hr(r,{[i]:s[0]}),n.splice(n.indexOf(i),1),s.shift())),1===s.length&&$i(s[0]))hr(r,s[0]);else for(let t=0;t<n.length;t++)Yi(s[t])&&(r[n[t]]=s[t]);return hr(t,r)}function dr(t,e){return Xi(t)?e:t}function fr(t,e){return e.forEach((e=>{Reflect.has(t,e)&&delete t[e]})),t}class mr{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||tr&&this.toString()===tr.TONE_DEBUG_CLASS)&&function(...t){Gi.log(...t)}(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}mr.version="14.7.77";const gr=1e-6;function _r(t,e){return t>e+gr}function vr(t,e){return _r(t,e)||wr(t,e)}function yr(t,e){return t+gr<e}function wr(t,e){return Math.abs(t-e)<gr}class br extends mr{constructor(){super(),this.name="Timeline",this._timeline=[];const t=pr(br.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(Bi(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const e=this._timeline[this.length-1];Bi(vr(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(t){const e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this}get(t,e="time"){const n=this._search(t,e);return-1!==n?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const n=this._search(t);return n-1>=0?this._timeline[n-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(wr(this._timeline[e].time,t)){for(let n=e;n>=0&&wr(this._timeline[n].time,t);n--)e=n;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&vr(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(0===this._timeline.length)return-1;let n=0;const i=this._timeline.length;let r=i;if(i>0&&this._timeline[i-1][e]<=t)return i-1;for(;n<r;){let i=Math.floor(n+(r-n)/2);const s=this._timeline[i],o=this._timeline[i+1];if(wr(s[e],t)){for(let n=i;n<this._timeline.length&&wr(this._timeline[n][e],t);n++)i=n;return i}if(yr(s[e],t)&&_r(o[e],t))return i;_r(s[e],t)?r=i:n=i+1}return-1}_iterate(t,e=0,n=this._timeline.length-1){this._timeline.slice(e,n+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const n=this._search(t);return-1!==n&&this._iterate(e,0,n),this}forEachAfter(t,e){const n=this._search(t);return this._iterate(e,n+1),this}forEachBetween(t,e,n){let i=this._search(t),r=this._search(e);return-1!==i&&-1!==r?(this._timeline[i].time!==t&&(i+=1),this._timeline[r].time===e&&(r-=1),this._iterate(n,i,r)):-1===i&&this._iterate(n,0,r),this}forEachFrom(t,e){let n=this._search(t);for(;n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this}forEachAtTime(t,e){const n=this._search(t);if(-1!==n&&wr(this._timeline[n].time,t)){let i=n;for(let e=n;e>=0&&wr(this._timeline[e].time,t);e--)i=e;this._iterate((t=>{e(t)}),i,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const xr=[];function Sr(t){xr.push(t)}const Ar=[];function Tr(t){Ar.push(t)}class Cr extends mr{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach((t=>{Xi(this._events)&&(this._events={}),this._events.hasOwnProperty(t)||(this._events[t]=[]),this._events[t].push(e)})),this}once(t,e){const n=(...i)=>{e(...i),this.off(t,n)};return this.on(t,n),this}off(t,e){return t.split(/\W+/).forEach((n=>{if(Xi(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(Xi(e))this._events[t]=[];else{const n=this._events[t];for(let t=n.length-1;t>=0;t--)n[t]===e&&n.splice(t,1)}})),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const n=this._events[t].slice(0);for(let t=0,i=n.length;t<i;t++)n[t].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach((e=>{const n=Object.getOwnPropertyDescriptor(Cr.prototype,e);Object.defineProperty(t.prototype,e,n)}))}dispose(){return super.dispose(),this._events=void 0,this}}class Er extends Cr{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Or extends Er{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new br,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const t=pr(Or.getDefaults(),arguments,["context"]);t.context?this._context=t.context:this._context=function(t){return new wi(t)}({latencyHint:t.latencyHint}),this._ticker=new rr(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(t.latencyHint),this.lookAhead=t.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){var t;return this._initialized||(t=this,xr.forEach((e=>e(t))),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,n){return this._context.createBuffer(t,e,n)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,n){return this._context.createPeriodicWave(t,e,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return Bi(cr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return Bi(cr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return Bi(cr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){Bi(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){Bi(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){Bi(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){Bi(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return function(t,e,n){return Bi(Yi(Di),"This node only works in a secure context (https or localhost)"),new Di(t,e,n)}(this.rawContext,t,e)}addAudioWorkletModule(t,e){return ir(this,void 0,void 0,(function*(){Bi(Yi(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(e)||this._workletModules.set(e,this.rawContext.audioWorklet.addModule(t)),yield this._workletModules.get(e)}))}workletsAreReady(){return ir(this,void 0,void 0,(function*(){const t=[];this._workletModules.forEach((e=>t.push(e))),yield Promise.all(t)}))}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get latencyHint(){return this._latencyHint}_setLatencyHint(t){let e=0;if(this._latencyHint=t,Ki(t))switch(t){case"interactive":e=.1;break;case"playback":e=.5;break;case"balanced":e=.25}this.lookAhead=e,this.updateInterval=e/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return cr(this._context)?this._context.resume():Promise.resolve()}close(){return ir(this,void 0,void 0,(function*(){var t;cr(this._context)&&(yield this._context.close()),this._initialized&&(t=this,Ar.forEach((e=>e(t))))}))}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0);for(let e=0;e<n.length;e++)n[e]=t;const i=this._context.createBufferSource();return i.channelCount=1,i.channelCountMode="explicit",i.buffer=e,i.loop=!0,i.start(0),this._constants.set(t,i),i}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map((t=>this._constants[t].disconnect())),this}_timeoutLoop(){const t=this.now();let e=this._timeouts.peek();for(;this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach((e=>{e.id===t&&this._timeouts.remove(e)})),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const n=++this._timeoutIds,i=()=>{const r=this.now();this._timeouts.add({callback:()=>{t(),i()},id:n,time:r+e})};return i(),n}}function kr(t,e){Qi(e)?e.forEach((e=>kr(t,e))):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function Mr(t,e){Qi(e)?e.forEach((e=>Mr(t,e))):Object.defineProperty(t,e,{writable:!0})}const Ir=()=>{};class Rr extends mr{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Ir;const t=pr(Rr.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,t.url&&ur(t.url)||t.url instanceof Rr?this.set(t.url):Ki(t.url)&&this.load(t.url).catch(t.onerror)}static getDefaults(){return{onerror:Ir,onload:Ir,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Lr().sampleRate}set(t){return t instanceof Rr?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return ir(this,void 0,void 0,(function*(){const e=Rr.load(t).then((t=>{this.set(t),this.onload(this)}));Rr.downloads.push(e);try{yield e}finally{const t=Rr.downloads.indexOf(e);Rr.downloads.splice(t,1)}return this}))}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const e=Qi(t)&&t[0].length>0,n=e?t.length:1,i=e?t[0].length:t.length,r=Lr(),s=r.createBuffer(n,i,r.sampleRate),o=e||1!==n?t:[t];for(let t=0;t<n;t++)s.copyToChannel(o[t],t);return this._buffer=s,this}toMono(t){if(Zi(t))this.fromArray(this.toArray(t));else{let t=new Float32Array(this.length);const e=this.numberOfChannels;for(let n=0;n<e;n++){const e=this.toArray(n);for(let n=0;n<e.length;n++)t[n]+=e[n]}t=t.map((t=>t/e)),this.fromArray(t)}return this}toArray(t){if(Zi(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);{const t=[];for(let e=0;e<this.numberOfChannels;e++)t[e]=this.getChannelData(e);return t}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){const n=Math.floor(t*this.sampleRate),i=Math.floor(e*this.sampleRate);Bi(n<i,"The start time must be less than the end time");const r=i-n,s=Lr().createBuffer(this.numberOfChannels,r,this.sampleRate);for(let t=0;t<this.numberOfChannels;t++)s.copyToChannel(this.getChannelData(t).subarray(n,i),t);return new Rr(s)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return(new Rr).fromArray(t)}static fromUrl(t){return ir(this,void 0,void 0,(function*(){const e=new Rr;return yield e.load(t)}))}static load(t){return ir(this,void 0,void 0,(function*(){const e=t.match(/\[([^\]\[]+\|.+)\]$/);if(e){const n=e[1].split("|");let i=n[0];for(const t of n)if(Rr.supportsType(t)){i=t;break}t=t.replace(e[0],i)}const n=""===Rr.baseUrl||Rr.baseUrl.endsWith("/")?Rr.baseUrl:Rr.baseUrl+"/",i=yield fetch(n+t);if(!i.ok)throw new Error(`could not load url: ${t}`);const r=yield i.arrayBuffer();return yield Lr().decodeAudioData(r)}))}static supportsType(t){const e=t.split("."),n=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}static loaded(){return ir(this,void 0,void 0,(function*(){for(yield Promise.resolve();Rr.downloads.length;)yield Rr.downloads[0]}))}}Rr.baseUrl="",Rr.downloads=[];class Dr extends Or{constructor(){var t,e,n;super({clockSource:"offline",context:ar(arguments[0])?arguments[0]:(t=arguments[0],e=arguments[1]*arguments[2],n=arguments[2],new Li(t,e,n)),lookAhead:0,updateInterval:ar(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=ar(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return ir(this,void 0,void 0,(function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const n=Math.floor(this.sampleRate/128);t&&e%n==0&&(yield new Promise((t=>setTimeout(t,1))))}}))}render(t=!0){return ir(this,void 0,void 0,(function*(){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new Rr(e)}))}close(){return Promise.resolve()}}const Pr=new class extends Er{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,n){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t,e){return ir(this,void 0,void 0,(function*(){return Promise.resolve()}))}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}};let Nr=Pr;function Lr(){return Nr===Pr&&er&&(t=new Or,Nr=cr(t)?new Or(t):ar(t)?new Dr(t):t),Nr;var t}if(tr&&!tr.TONE_SILENCE_LOGGING){const t=` * Tone.js ${"v"}14.7.77 * `;console.log(`%c${t}`,"background: #000; color: #fff")}function Vr(t){return Math.pow(2,t/12)}let jr=440;function Fr(t){return Math.round(qr(t))}function qr(t){return 69+12*Math.log2(t/jr)}class Ur extends mr{constructor(t,e,n){super(),this.defaultUnits="s",this._val=e,this._units=n,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const n=parseInt(t,10),i="."===e?1.5:1;return 1===n?this._beatsToUnits(this._getTimeSignature())*i:this._beatsToUnits(4/n)*i},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(e)))},regexp:/^(\d+)t$/i},tr:{method:(t,e,n)=>{let i=0;return t&&"0"!==t&&(i+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(i+=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(i+=this._beatsToUnits(parseFloat(n)/4)),i},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Ur&&this.fromType(this._val),Xi(this._val))return this._noArg();if(Ki(this._val)&&Xi(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if($i(this._val)){let t=0;for(const e in this._val)if(Yi(this._val[e])){const n=this._val[e];t+=new this.constructor(this.context,e).valueOf()*n}return t}if(Yi(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}return Ki(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class Br extends Ur{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new Br(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const n=new this.constructor(this.context,t).valueOf(),i=this.valueOf();return i+(Math.round(i/n)*n-i)*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let t=1;t<9;t++){const n=Math.pow(2,t);e.push(n+"n."),e.push(n+"n"),e.push(n+"t")}e.push("0");let n=e[0],i=new Br(this.context,e[0]).toSeconds();return e.forEach((e=>{const r=new Br(this.context,e).toSeconds();Math.abs(r-t)<Math.abs(i-t)&&(n=e,i=r)})),n}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const n=Math.floor(e/this._getTimeSignature());let i=e%1*4;e=Math.floor(e)%this._getTimeSignature();const r=i.toString();return r.length>3&&(i=parseFloat(parseFloat(r).toFixed(3))),[n,e,i].join(":")}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Fr(this.toFrequency())}_now(){return this.context.now()}}class Wr extends Br{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return jr}static set A4(t){!function(t){jr=t}(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:Wr.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(t,e){const n=zr[t.toLowerCase()]+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?n:Wr.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,n){let i=1;return t&&"0"!==t&&(i*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(i*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(i*=this._beatsToUnits(parseFloat(n)/4)),i}}})}transpose(t){return new Wr(this.context,this.valueOf()*Vr(t))}harmonize(t){return t.map((t=>this.transpose(t)))}toMidi(){return Fr(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/Wr.A4);let n=Math.round(12*e)+57;const i=Math.floor(n/12);return i<0&&(n+=-12*i),Gr[n%12]+i.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return function(t){return jr*Math.pow(2,(t-69)/12)}(t)}static ftom(t){return Fr(t)}}const zr={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},Gr=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Hr extends Br{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Xr extends mr{constructor(){super();const t=pr(Xr.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:Lr()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return new Br(this.context,t).toSeconds()}toFrequency(t){return new Wr(this.context,t).toFrequency()}toTicks(t){return new Hr(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach((n=>{Xi(t[n])&&delete e[n]})),e}get(){const t=this.constructor.getDefaults();return Object.keys(t).forEach((e=>{if(Reflect.has(this,e)){const n=this[e];Yi(n)&&Yi(n.value)&&Yi(n.setValueAtTime)?t[e]=n.value:n instanceof Xr?t[e]=n._getPartialProperties(t[e]):Qi(n)||Zi(n)||Ki(n)||"boolean"==typeof n?t[e]=n:delete t[e]}})),t}set(t){return Object.keys(t).forEach((e=>{Reflect.has(this,e)&&Yi(this[e])&&(this[e]&&Yi(this[e].value)&&Yi(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof Xr?this[e].set(t[e]):this[e]=t[e])})),this}}class Yr extends br{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return null!==e?e.state:this._initial}setStateAtTime(t,e,n){return Wi(e,0),this.add(Object.assign({},n,{state:t,time:e})),this}getLastState(t,e){for(let n=this._search(e);n>=0;n--){const e=this._timeline[n];if(e.state===t)return e}}getNextState(t,e){const n=this._search(e);if(-1!==n)for(let e=n;e<this._timeline.length;e++){const n=this._timeline[e];if(n.state===t)return n}}}class Zr extends Xr{constructor(){super(pr(Zr.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const t=pr(Zr.getDefaults(),arguments,["param","units","convert"]);for(Bi(Yi(t.param)&&(sr(t.param)||t.param instanceof Zr),"param must be an AudioParam");!sr(t.param);)t.param=t.param._param;this._swappable=!!Yi(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new br(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,Yi(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Xr.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return Yi(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return Yi(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return Yi(this.maxValue)&&Yi(this.minValue)&&Wi(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?(e=t,Math.pow(10,e/20)):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t;var e}_toType(t){return this.convert&&"decibels"===this.units?(e=t,Math.log(e)/Math.LN10*20):t;var e}setValueAtTime(t,e){const n=this.toSeconds(e),i=this._fromType(t);return Bi(isFinite(i)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(i),this.log(this.units,"setValueAtTime",t,n),this._events.add({time:n,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,n),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),i=this._events.get(e);let r=this._initialValue;if(null===i)r=this._initialValue;else if("setTargetAtTime"!==i.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)r=i.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){let t=i.value;if("setTargetAtTime"===i.type){const e=this._events.getBefore(i.time);t=null===e?this._initialValue:e.value}r="linearRampToValueAtTime"===n.type?this._linearInterpolate(i.time,t,n.time,n.value,e):this._exponentialInterpolate(i.time,t,n.time,n.value,e)}else r=i.value;else{const t=this._events.getBefore(i.time);let n;n=null===t?this._initialValue:t.value,"setTargetAtTime"===i.type&&(r=this._exponentialApproach(i.time,n,i.value,i.constant,e))}return this._toType(r)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const n=this._fromType(t),i=this.toSeconds(e);return Bi(isFinite(n)&&isFinite(i),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(n),this._events.add({time:i,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",t,i),this._param.linearRampToValueAtTime(n,i),this}exponentialRampToValueAtTime(t,e){let n=this._fromType(t);n=wr(n,0)?this._minOutput:n,this._assertRange(n);const i=this.toSeconds(e);return Bi(isFinite(n)&&isFinite(i),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:i,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",t,i),this._param.exponentialRampToValueAtTime(n,i),this}exponentialRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this}linearRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this}targetRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this}exponentialApproachValueAtTime(t,e,n){e=this.toSeconds(e),n=this.toSeconds(n);const i=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(t,e,i),this.cancelAndHoldAtTime(e+.9*n),this.linearRampToValueAtTime(t,e+n),this}setTargetAtTime(t,e,n){const i=this._fromType(t);Bi(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const r=this.toSeconds(e);return this._assertRange(i),Bi(isFinite(i)&&isFinite(r),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:n,time:r,type:"setTargetAtTime",value:i}),this.log(this.units,"setTargetAtTime",t,r,n),this._param.setTargetAtTime(i,r,n),this}setValueCurveAtTime(t,e,n,i=1){n=this.toSeconds(n),e=this.toSeconds(e);const r=this._fromType(t[0])*i;this.setValueAtTime(this._toType(r),e);const s=n/(t.length-1);for(let n=1;n<t.length;n++){const r=this._fromType(t[n])*i;this.linearRampToValueAtTime(this._toType(r),e+n*s)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return Bi(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),n=this._fromType(this.getValueAtTime(e));Bi(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+n);const i=this._events.get(e),r=this._events.getAfter(e);return i&&wr(i.time,e)?r?(this._param.cancelScheduledValues(r.time),this._events.cancel(r.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):r&&(this._param.cancelScheduledValues(r.time),this._events.cancel(r.time),"linearRampToValueAtTime"===r.type?this.linearRampToValueAtTime(this._toType(n),e):"exponentialRampToValueAtTime"===r.type&&this.exponentialRampToValueAtTime(this._toType(n),e)),this._events.add({time:e,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,e),this}rampTo(t,e=.1,n){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const n=this._events.get(e);if(n&&"setTargetAtTime"===n.type){const i=this._events.getAfter(n.time),r=i?i.time:e+2,s=(r-e)/10;for(let n=e;n<r;n+=s)t.linearRampToValueAtTime(this.getValueAtTime(n),n)}return this._events.forEachAfter(this.context.currentTime,(e=>{"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)})),this}setParam(t){Bi(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,n,i,r){return n+(e-n)*Math.exp(-(r-t)/i)}_linearInterpolate(t,e,n,i,r){return e+(r-t)/(n-t)*(i-e)}_exponentialInterpolate(t,e,n,i,r){return e*Math.pow(i/e,(r-t)/(n-t))}}class $r extends Xr{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return Yi(this.input)?sr(this.input)||this.input instanceof Zr?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Yi(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return Yi(t)&&(t instanceof $r||or(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach((e=>{e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation}))}_getChannelProperties(){const t=this._getInternalNodes();Bi(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,n=0){return Kr(this,t,e,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Hi("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,n=0){return function(t,e,n=0,i=0){if(Yi(e))for(;e instanceof $r;)e=e.input;for(;!or(t);)Yi(t.output)&&(t=t.output);sr(e)?t.disconnect(e,n):or(e)?t.disconnect(e,n,i):t.disconnect()}(this,t,e,n),this}chain(...t){return Qr(this,...t),this}fan(...t){return t.forEach((t=>this.connect(t))),this}dispose(){return super.dispose(),Yi(this.input)&&(this.input instanceof $r?this.input.dispose():or(this.input)&&this.input.disconnect()),Yi(this.output)&&(this.output instanceof $r?this.output.dispose():or(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Qr(...t){const e=t.shift();t.reduce(((t,e)=>(t instanceof $r?t.connect(e):or(t)&&Kr(t,e),e)),e)}function Kr(t,e,n=0,i=0){for(Bi(Yi(t),"Cannot connect from undefined node"),Bi(Yi(e),"Cannot connect to undefined node"),(e instanceof $r||or(e))&&Bi(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Bi(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof $r||e instanceof Zr;)Yi(e.input)&&(e=e.input);for(;t instanceof $r;)Yi(t.output)&&(t=t.output);sr(e)?t.connect(e,n):t.connect(e,n,i)}class Jr extends $r{constructor(){super(pr(Jr.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const t=pr(Jr.getDefaults(),arguments,["gain","units"]);this.gain=new Zr({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),kr(this,"gain")}static getDefaults(){return Object.assign($r.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class ts extends $r{constructor(t){super(t),this.onended=Ir,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Jr({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const e=this.toSeconds(t);return-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign($r.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Ir})}_startGain(t,e=1){Bi(-1===this._startTime,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){Bi(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.context.currentTime),e>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout((()=>{const t="exponential"===this._curve?2*e:0;this._stopSource(this.now()+t),this._onended()}),this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Ir&&(this.onended(this),this.onended=Ir,!this.context.isOffline)){const t=()=>this.dispose();void 0!==window.requestIdleCallback?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Bi(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class es extends ts{constructor(){super(pr(es.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const t=pr(es.getDefaults(),arguments,["offset"]);Kr(this._source,this._gainNode),this.offset=new Zr({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(ts.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class ns extends $r{constructor(){super(pr(ns.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const t=pr(ns.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new es({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign($r.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,n=0){return is(this,t,e,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,n){return this._param.exponentialRampTo(t,e,n),this}linearRampTo(t,e,n){return this._param.linearRampTo(t,e,n),this}targetRampTo(t,e,n){return this._param.targetRampTo(t,e,n),this}exponentialApproachValueAtTime(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this}setTargetAtTime(t,e,n){return this._param.setTargetAtTime(t,e,n),this}setValueCurveAtTime(t,e,n,i){return this._param.setValueCurveAtTime(t,e,n,i),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,n){return this._param.rampTo(t,e,n),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function is(t,e,n,i){(e instanceof Zr||sr(e)||e instanceof ns&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof ns&&(e.overridden=!0)),Kr(t,e,n,i)}class rs extends Zr{constructor(){super(pr(rs.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new br(1/0),this._multiplier=1;const t=pr(rs.getDefaults(),arguments,["value"]);this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Zr.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);const i=this._fromType(t),r=this._events.get(e),s=Math.round(Math.max(1/n,1));for(let t=0;t<=s;t++){const s=n*t+e,o=this._exponentialApproach(r.time,r.value,i,n,s);this.linearRampToValueAtTime(this._toType(o),s)}return this}setValueAtTime(t,e){const n=this.toSeconds(e);super.setValueAtTime(t,e);const i=this._events.get(n),r=this._events.previousEvent(i),s=this._getTicksUntilEvent(r,n);return i.ticks=Math.max(s,0),this}linearRampToValueAtTime(t,e){const n=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const i=this._events.get(n),r=this._events.previousEvent(i),s=this._getTicksUntilEvent(r,n);return i.ticks=Math.max(s,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const n=this._fromType(t),i=this._events.get(e),r=Math.round(Math.max(10*(e-i.time),1)),s=(e-i.time)/r;for(let t=0;t<=r;t++){const r=s*t+i.time,o=this._exponentialInterpolate(i.time,i.value,e,n,r);this.linearRampToValueAtTime(this._toType(o),r)}return this}_getTicksUntilEvent(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Xi(t.ticks)){const e=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(e,t.time)}const n=this._fromType(this.getValueAtTime(t.time));let i=this._fromType(this.getValueAtTime(e));const r=this._events.get(e);return r&&r.time===e&&"setValueAtTime"===r.type&&(i=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(n+i)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)}getDurationOfTicks(t,e){const n=this.toSeconds(e),i=this.getTicksAtTime(e);return this.getTimeOfTick(i+t)-n}getTimeOfTick(t){const e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linearRampToValueAtTime"===n.type&&e.value!==n.value){const i=this._fromType(this.getValueAtTime(e.time)),r=(this._fromType(this.getValueAtTime(n.time))-i)/(n.time-e.time),s=Math.sqrt(Math.pow(i,2)-2*r*(e.ticks-t)),o=(-i+s)/r,a=(-i-s)/r;return(o>0?o:a)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const n=this.toSeconds(e),i=this.toSeconds(t),r=this.getTicksAtTime(n);return this.getTicksAtTime(n+i)-r}_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class ss extends ns{constructor(){super(pr(ss.getDefaults(),arguments,["value"])),this.name="TickSignal";const t=pr(ss.getDefaults(),arguments,["value"]);this.input=this._param=new rs({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(ns.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class os extends Xr{constructor(){super(pr(os.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new Yr,this._tickOffset=new br;const t=pr(os.getDefaults(),arguments,["frequency"]);this.frequency=new ss({context:this.context,units:t.units,value:t.frequency}),kr(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Xr.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),Yi(e)&&this.setTicksAtTime(e,n)),this}stop(t){const e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){const t=this._state.get(e);t&&t.time>0&&(this._tickOffset.cancel(t.time),this._state.cancel(t.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),n=this._state.getLastState("stopped",e),i={state:"paused",time:e};this._state.add(i);let r=n,s=0;return this._state.forEachBetween(n.time,e+this.sampleTime,(t=>{let e=r.time;const n=this._tickOffset.get(t.time);n&&n.time>=r.time&&(s=n.ticks,e=n.time),"started"===r.state&&"started"!==t.state&&(s+=this.frequency.getTicksAtTime(t.time)-this.frequency.getTicksAtTime(e)),r=t})),this._state.remove(i),s}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),n={state:"paused",time:t};this._state.add(n);let i=e,r=0;return this._state.forEachBetween(e.time,t+this.sampleTime,(t=>{let e=i.time;const n=this._tickOffset.get(t.time);n&&n.time>=i.time&&(r=n.seconds,e=n.time),"started"===i.state&&"started"!==t.state&&(r+=t.time-e),i=t})),this._state.remove(n),r}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const n=this._tickOffset.get(e),i=this._state.get(e),r=Math.max(n.time,i.time),s=this.frequency.getTicksAtTime(r)+t-n.ticks;return this.frequency.getTimeOfTick(s)}forEachTickBetween(t,e,n){let i=this._state.get(t);this._state.forEachBetween(t,e,(e=>{i&&"started"===i.state&&"started"!==e.state&&this.forEachTickBetween(Math.max(i.time,t),e.time-this.sampleTime,n),i=e}));let r=null;if(i&&"started"===i.state){const s=Math.max(i.time,t),o=this.frequency.getTicksAtTime(s),a=o-this.frequency.getTicksAtTime(i.time);let c=Math.ceil(a)-a;c=wr(c,1)?0:c;let u=this.frequency.getTimeOfTick(o+c);for(;u<e;){try{n(u,Math.round(this.getTicksAtTime(u)))}catch(t){r=t;break}u+=this.frequency.getDurationOfTicks(1,u)}}if(r)throw r;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class as extends Xr{constructor(){super(pr(as.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=Ir,this._lastUpdate=0,this._state=new Yr("stopped"),this._boundLoop=this._loop.bind(this);const t=pr(as.getDefaults(),arguments,["callback","frequency"]);this.callback=t.callback,this._tickSource=new os({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,kr(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Xr.getDefaults(),{callback:Ir,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){zi(this.context);const n=this.toSeconds(t);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const n=this.toSeconds(e),i=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(i+t,n)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,(t=>{switch(t.state){case"started":const e=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,e);break;case"stopped":0!==t.time&&this.emit("stop",t.time);break;case"paused":this.emit("pause",t.time)}})),this._tickSource.forEachTickBetween(t,e,((t,e)=>{this.callback(t,e)})))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Cr.mixin(as);class cs extends mr{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=pr(cs.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach((e=>{this._loadingCount++;const n=t.urls[e];this.add(e,n,this._bufferLoaded.bind(this,t.onload),t.onerror)}))}static getDefaults(){return{baseUrl:"",onerror:Ir,onload:Ir,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return Bi(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t()}get loaded(){return Array.from(this._buffers).every((([t,e])=>e.loaded))}add(t,e,n=Ir,i=Ir){return Ki(e)?this._buffers.set(t.toString(),new Rr(this.baseUrl+e,n,i)):this._buffers.set(t.toString(),new Rr(e,n,i)),this}dispose(){return super.dispose(),this._buffers.forEach((t=>t.dispose())),this._buffers.clear(),this}}class us extends Hr{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class ls extends Xr{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new br,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Sr((t=>{t.draw=new ls({context:t})})),Tr((t=>{t.draw.dispose()}));class hs extends mr{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){Bi(Yi(t.time),"Events must have a time property"),Bi(Yi(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new ps(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(null!==this._root){const e=[];this._root.search(t.time,e);for(const n of e)if(n.event===t){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,(t=>this.remove(t))),this}_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{let e,n=null;if(t.getBalance()>0)if(null===t.left.right)e=t.left,e.right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)e=t.right,e.left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),n&&this._rebalance(n)}t.dispose()}_rotateLeft(t){const e=t.parent,n=t.isLeftChild(),i=t.right;i&&(t.right=i.left,i.left=t),null!==e?n?e.left=i:e.right=i:this._setRoot(i)}_rotateRight(t){const e=t.parent,n=t.isLeftChild(),i=t.left;i&&(t.left=i.right,i.right=t),null!==e?n?e.left=i:e.right=i:this._setRoot(i)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(null!==this._root){const e=[];if(this._root.search(t,e),e.length>0){let t=e[0];for(let n=1;n<e.length;n++)e[n].low>t.low&&(t=e[n]);return t.event}}return null}forEach(t){if(null!==this._root){const e=[];this._root.traverse((t=>e.push(t))),e.forEach((e=>{e.event&&t(e.event)}))}return this}forEachAtTime(t,e){if(null!==this._root){const n=[];this._root.search(t,n),n.forEach((t=>{t.event&&e(t.event)}))}return this}forEachFrom(t,e){if(null!==this._root){const n=[];this._root.searchAfter(t,n),n.forEach((t=>{t.event&&e(t.event)}))}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse((t=>t.dispose())),this._root=null,this}}class ps{constructor(t,e,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class ds extends $r{constructor(){super(pr(ds.getDefaults(),arguments,["volume"])),this.name="Volume";const t=pr(ds.getDefaults(),arguments,["volume"]);this.input=this.output=new Jr({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,kr(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign($r.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class fs extends $r{constructor(){super(pr(fs.getDefaults(),arguments)),this.name="Destination",this.input=new ds({context:this.context}),this.output=new Jr({context:this.context}),this.volume=this.input.volume;const t=pr(fs.getDefaults(),arguments);Qr(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign($r.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),Qr(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Sr((t=>{t.destination=new fs({context:t})})),Tr((t=>{t.destination.dispose()}));class ms extends mr{constructor(t){super(),this.name="TimelineValue",this._timeline=new br({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}class gs{constructor(t,e){this.id=gs._eventId++;const n=Object.assign(gs.getDefaults(),e);this.transport=t,this.callback=n.callback,this._once=n.once,this.time=n.time}static getDefaults(){return{callback:Ir,once:!1,time:0}}invoke(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}gs._eventId=0;class _s extends gs{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(_s.getDefaults(),e);this.duration=new us(t.context,n.duration).valueOf(),this._interval=new us(t.context,n.interval).valueOf(),this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},gs.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvents(t){const e=this.transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new us(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const e=this.transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new us(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new us(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class vs extends Xr{constructor(){super(pr(vs.getDefaults(),arguments)),this.name="Transport",this._loop=new ms(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new br,this._repeatedEvents=new hs,this._syncedSignals=[],this._swingAmount=0;const t=pr(vs.getDefaults(),arguments);this._ppq=t.ppq,this._clock=new as({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),kr(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(Xr.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){const n=e%(2*this._swingTicks)/(2*this._swingTicks),i=Math.sin(n*Math.PI)*this._swingAmount;t+=new us(this.context,2*this._swingTicks/3).toSeconds()*i}this._timeline.forEachAtTime(e,(e=>e.invoke(t)))}schedule(t,e){const n=new gs(this,{callback:t,time:new Hr(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(t,e,n,i=1/0){const r=new _s(this,{callback:t,duration:new Br(this.context,i).toTicks(),interval:new Br(this.context,e).toTicks(),time:new Hr(this.context,n).toTicks()});return this._addEvent(r,this._repeatedEvents)}scheduleOnce(t,e){const n=new gs(this,{callback:t,once:!0,time:new Hr(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,(t=>this.clear(t.id))),this._repeatedEvents.forEachFrom(e,(t=>this.clear(t.id))),this}_bindClockEvents(){this._clock.on("start",((t,e)=>{e=new us(this.context,e).toSeconds(),this.emit("start",t,e)})),this._clock.on("stop",(t=>{this.emit("stop",t)})),this._clock.on("pause",(t=>{this.emit("pause",t)}))}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){let n;return Yi(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){Qi(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new Br(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new Br(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new us(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new us(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if("started"===this.state){const n=this._clock.getTicksAtTime(e),i=e+this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,e);this.emit("stop",i),this._clock.setTicksAtTime(t,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return Math.round(this._clock.getTicksAtTime(t))}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{const e=this.now(),n=t-this.getTicksAtTime(e)%t;return this._clock.nextTickTime(n,e)}}syncSignal(t,e){if(!e){const n=this.now();if(0!==t.getValueAtTime(n)){const i=1/(60/this.bpm.getValueAtTime(n)/this.PPQ);e=t.getValueAtTime(n)/i}else e=0}const n=new Jr(e);return this.bpm.connect(n),n.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:n,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const n=this._syncedSignals[e];n.signal===t&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Mr(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Cr.mixin(vs),Sr((t=>{t.transport=new vs({context:t})})),Tr((t=>{t.transport.dispose()}));class ys extends $r{constructor(t){super(t),this.input=void 0,this._state=new Yr("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Ir,this._syncedStop=Ir,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new ds({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,kr(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign($r.getDefaults(),{mute:!1,onstop:Ir,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,n){let i=Xi(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(i=this._clampToCurrentTime(i),this._synced||"started"!==this._state.getValueAtTime(i))if(this.log("start",i),this._state.setStateAtTime("started",i),this._synced){const t=this._state.get(i);t&&(t.offset=this.toSeconds(dr(e,0)),t.duration=n?this.toSeconds(n):void 0);const r=this.context.transport.schedule((t=>{this._start(t,e,n)}),i);this._scheduled.push(r),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>i&&this._syncedStart(this.now(),this.context.transport.seconds)}else zi(this.context),this._start(i,e,n);else Bi(_r(i,this._state.get(i).time),"Start time must be strictly greater than previous start time"),this._state.cancel(i),this._state.setStateAtTime("started",i),this.log("restart",i),this.restart(i,e,n);return this}stop(t){let e=Xi(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||Yi(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){const t=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(t)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,n){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(e>0){const n=this._state.get(e);if(n&&"started"===n.state&&n.time!==e){const i=e-this.toSeconds(n.time);let r;n.duration&&(r=this.toSeconds(n.duration)-i),this._start(t,this.toSeconds(n.offset)+i,r)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));"started"===this._state.getValueAtTime(e)&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach((t=>this.context.transport.clear(t))),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Ir,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class ws extends ts{constructor(){super(pr(ws.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const t=pr(ws.getDefaults(),arguments,["url","onload"]);Kr(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Zr({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new Rr(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(ts.getDefaults(),{url:new Rr,loop:!1,loopEnd:0,loopStart:0,onload:Ir,onerror:Ir,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,n,i=1){Bi(this.buffer.loaded,"buffer is either not set or not loaded");const r=this.toSeconds(t);this._startGain(r,i),e=this.loop?dr(e,this.loopStart):dr(e,0);let s=Math.max(this.toSeconds(e),0);if(this.loop){const t=this.toSeconds(this.loopEnd)||this.buffer.duration,e=this.toSeconds(this.loopStart),n=t-e;vr(s,t)&&(s=(s-e)%n+e),wr(s,this.buffer.duration)&&(s=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,yr(s,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(r,s)),Yi(n)){let t=this.toSeconds(n);t=Math.max(t,0),this.stop(r+t)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function bs(t,e){return ir(this,void 0,void 0,(function*(){const n=e/t.context.sampleRate,i=new Dr(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:i})).toDestination().start(0),(yield i.render()).getChannelData(0)}))}class xs extends ts{constructor(){super(pr(xs.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const t=pr(xs.getDefaults(),arguments,["frequency","type"]);Kr(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new Zr({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new Zr({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),kr(this,["frequency","detune"])}static getDefaults(){return Object.assign(ts.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Ss extends ys{constructor(){super(pr(Ss.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const t=pr(Ss.getDefaults(),arguments,["frequency","type"]);this.frequency=new ns({context:this.context,units:"frequency",value:t.frequency}),kr(this,"frequency"),this.detune=new ns({context:this.context,units:"cents",value:t.detune}),kr(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&"custom"!==t.type&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(ys.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const e=this.toSeconds(t),n=new xs({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){const e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){const e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type)return Ss._periodicWaveCache.find((t=>{return t.phase===this._phase&&(e=t.partials,n=this._partials,e.length===n.length&&e.every(((t,e)=>n[e]===t)));var e,n}));{const t=Ss._periodicWaveCache.find((t=>t.type===this._type&&t.phase===this._phase));return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const e=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&e)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{const e=this._getCachedPeriodicWave();if(Yi(e)){const{partials:t,wave:n}=e;this._wave=n,this._partials=t,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[e,n]=this._getRealImaginary(t,this._phase),i=this.context.createPeriodicWave(e,n);this._wave=i,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),Ss._periodicWaveCache.push({imag:n,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:e,type:this._type,wave:this._wave}),Ss._periodicWaveCache.length>100&&Ss._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){Wi(t,0);let e=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(e=n[1]),"custom"!==this._type)this.type=0===t?e:e+t.toString();else{const e=new Float32Array(t);this._partials.forEach(((t,n)=>e[n]=t)),this._partials=Array.from(e),this.type=this._type}}_getRealImaginary(t,e){let n=2048;const i=new Float32Array(n),r=new Float32Array(n);let s=1;if("custom"===t){if(s=this._partials.length+1,this._partialCount=this._partials.length,n=s,0===this._partials.length)return[i,r]}else{const e=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);e?(s=parseInt(e[2],10)+1,this._partialCount=parseInt(e[2],10),t=e[1],s=Math.max(s,2),n=s):this._partialCount=0,this._partials=[]}for(let o=1;o<n;++o){const n=2/(o*Math.PI);let a;switch(t){case"sine":a=o<=s?1:0,this._partials[o-1]=a;break;case"square":a=1&o?2*n:0,this._partials[o-1]=a;break;case"sawtooth":a=n*(1&o?1:-1),this._partials[o-1]=a;break;case"triangle":a=1&o?n*n*2*(o-1>>1&1?-1:1):0,this._partials[o-1]=a;break;case"custom":a=this._partials[o-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}0!==a?(i[o]=-a*Math.sin(e*o),r[o]=a*Math.cos(e*o)):(i[o]=0,r[o]=0)}return[i,r]}_inverseFFT(t,e,n){let i=0;const r=t.length;for(let s=0;s<r;s++)i+=t[s]*Math.cos(s*n)+e[s]*Math.sin(s*n);return i}getInitialValue(){const[t,e]=this._getRealImaginary(this._type,0);let n=0;const i=2*Math.PI;for(let r=0;r<32;r++)n=Math.max(this._inverseFFT(t,e,r/32*i),n);return r=-this._inverseFFT(t,e,this._phase)/n,-1,1,Math.max(Math.min(r,1),-1);var r}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(t=1024){return ir(this,void 0,void 0,(function*(){return bs(this,t)}))}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Ss._periodicWaveCache=[];class As extends $r{constructor(){super(Object.assign(pr(As.getDefaults(),arguments,["context"])))}connect(t,e=0,n=0){return is(this,t,e,n),this}}class Ts extends As{constructor(){super(Object.assign(pr(Ts.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const t=pr(Ts.getDefaults(),arguments,["mapping","length"]);Qi(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):"function"==typeof t.mapping&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(ns.getDefaults(),{length:1024})}setMap(t,e=1024){const n=new Float32Array(e);for(let i=0,r=e;i<r;i++){const e=i/(r-1)*2-1;n[i]=t(e,i)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){Bi(["none","2x","4x"].some((e=>e.includes(t))),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Cs extends As{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Ts({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Es extends ns{constructor(){super(Object.assign(pr(Es.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const t=pr(Es.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Jr({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(ns.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Os extends ys{constructor(){super(pr(Os.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new Cs({context:this.context}),this._modulationNode=new Jr({context:this.context});const t=pr(Os.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Ss({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Ss({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new Es({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),kr(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ss.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return ir(this,void 0,void 0,(function*(){return bs(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class ks extends ys{constructor(){super(pr(ks.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Jr({context:this.context,gain:0});const t=pr(ks.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Ss({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new ns({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new Ss({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new Es({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new Es({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),kr(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ss.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return ir(this,void 0,void 0,(function*(){return bs(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Ms extends ys{constructor(){super(pr(Ms.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Jr({context:this.context,gain:0}),this._thresh=new Ts({context:this.context,mapping:t=>t<=0?-1:1});const t=pr(Ms.getDefaults(),arguments,["frequency","width"]);this.width=new ns({context:this.context,units:"audioRange",value:t.width}),this._triangle=new Ss({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),kr(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(ys.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(t=1024){return ir(this,void 0,void 0,(function*(){return bs(this,t)}))}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Is extends ys{constructor(){super(pr(Is.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const t=pr(Is.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new ns({context:this.context,units:"frequency",value:t.frequency}),this.detune=new ns({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,kr(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ss.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach((e=>e.start(t)))}_stop(t){t=this.toSeconds(t),this._forEach((e=>e.stop(t)))}_restart(t){this._forEach((e=>e.restart(t)))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach((e=>e.type=t))}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,n=t/(this._oscillators.length-1);this._forEach(((t,i)=>t.detune.value=e+n*i))}}get count(){return this._oscillators.length}set count(t){if(Wi(t,1),this._oscillators.length!==t){this._forEach((t=>t.dispose())),this._oscillators=[];for(let e=0;e<t;e++){const n=new Ss({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:0===e?()=>this.onstop(this):Ir});"custom"===this.type&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[e]=n}this.spread=this._spread,"started"===this.state&&this._forEach((t=>t.start()))}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach(((t,e)=>t.phase=this._phase+e/this.count*360))}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach((e=>e.baseType=t)),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach((e=>e.partials=t)))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach((e=>e.partialCount=t)),this._type=this._oscillators[0].type}asArray(t=1024){return ir(this,void 0,void 0,(function*(){return bs(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach((t=>t.dispose())),this}}class Rs extends ys{constructor(){super(pr(Rs.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Es({context:this.context,value:2});const t=pr(Rs.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Ms({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Ss({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),kr(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(ys.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(t=1024){return ir(this,void 0,void 0,(function*(){return bs(this,t)}))}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Ds={am:Os,fat:Is,fm:ks,oscillator:Ss,pulse:Ms,pwm:Rs};class Ps extends ys{constructor(){super(pr(Ps.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const t=pr(Ps.getDefaults(),arguments,["frequency","type"]);this.frequency=new ns({context:this.context,units:"frequency",value:t.frequency}),this.detune=new ns({context:this.context,units:"cents",value:t.detune}),kr(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(Ss.getDefaults(),ks.getDefaults(),Os.getDefaults(),Is.getDefaults(),Ms.getDefaults(),Rs.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some((t=>this._sourceType===t))&&(t=this._sourceType),t+this._oscillator.type}set type(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=Ds[t],n=this.now();if(this._oscillator){const t=this._oscillator;t.stop(n),this.context.setTimeout((()=>t.dispose()),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}_getOscType(t,e){return t instanceof Ds[e]}get baseType(){return this._oscillator.baseType}set baseType(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(t){this._getOscType(this._oscillator,"fat")&&Zi(t)&&(this._oscillator.count=t)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(t){this._getOscType(this._oscillator,"fat")&&Zi(t)&&(this._oscillator.spread=t)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Ki(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(t=1024){return ir(this,void 0,void 0,(function*(){return bs(this,t)}))}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function Ns(t,e=1/0){const n=new WeakMap;return function(i,r){Reflect.defineProperty(i,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){Wi(i,t,e),n.set(this,i)}})}}function Ls(t,e=1/0){const n=new WeakMap;return function(i,r){Reflect.defineProperty(i,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){Wi(this.toSeconds(i),t,e),n.set(this,i)}})}}class Vs extends ys{constructor(){super(pr(Vs.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const t=pr(Vs.getDefaults(),arguments,["url","onload"]);this._buffer=new Rr({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(ys.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Ir,onerror:Ir,playbackRate:1,reverse:!1})}load(t){return ir(this,void 0,void 0,(function*(){return yield this._buffer.load(t),this._onload(),this}))}_onload(t=Ir){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,n){return super.start(t,e,n),this}_start(t,e,n){e=this._loop?dr(e,this._loopStart):dr(e,0);const i=this.toSeconds(e),r=n;n=dr(n,Math.max(this._buffer.duration-i,0));let s=this.toSeconds(n);s/=this._playbackRate,t=this.toSeconds(t);const o=new ws({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+s),this._state.setStateAtTime("stopped",t+s,{implicitEnd:!0})),this._activeSources.add(o),this._loop&&Xi(r)?o.start(t,i):o.start(t,i,s-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach((t=>t.stop(e)))}restart(t,e,n){return super.restart(t,e,n),this}_restart(t,e,n){this._stop(t),this._start(t,e,n)}seek(t,e){const n=this.toSeconds(e);if("started"===this._state.getValueAtTime(n)){const e=this.toSeconds(t);this._stop(n),this._start(n,e)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&Wi(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((e=>{e.loopStart=t}))}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&Wi(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((e=>{e.loopEnd=t}))}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach((e=>{e.loop=t})),t)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),n=this._state.getNextState("stopped",e);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach((t=>t.cancelStop()))),this._activeSources.forEach((n=>{n.playbackRate.setValueAtTime(t,e)}))}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach((t=>t.dispose())),this._activeSources.clear(),this._buffer.dispose(),this}}nr([Ls(0)],Vs.prototype,"fadeIn",void 0),nr([Ls(0)],Vs.prototype,"fadeOut",void 0);class js extends $r{constructor(){super(pr(js.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new ns({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const t=pr(js.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign($r.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(Ki(t))return t;{let n;for(n in Fs)if(Fs[n][e]===t)return n;return t}}_setCurve(t,e,n){if(Ki(n)&&Reflect.has(Fs,n)){const i=Fs[n];$i(i)?"_decayCurve"!==t&&(this[t]=i[e]):this[t]=i}else{if(!Qi(n)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+n);this[t]=n}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._decayCurve}set decayCurve(t){Bi(["linear","exponential"].some((e=>e===t)),`Invalid envelope curve: ${t}`),this._decayCurve=t}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let n=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),r=this.getValueAtTime(t);if(r>0&&(n=(1-r)/(1/n)),n<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,n,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,n,t);else{this._sig.cancelAndHoldAtTime(t);let i=this._attackCurve;for(let t=1;t<i.length;t++)if(i[t-1]<=r&&r<=i[t]){i=this._attackCurve.slice(t),i[0]=r;break}this._sig.setValueCurveAtTime(i,t,n,e)}if(i&&this.sustain<1){const r=e*this.sustain,s=t+n;this.log("decay",s),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(r,i+s):this._sig.exponentialApproachValueAtTime(r,s,i)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,t):(Bi(Qi(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,n,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,n=1){return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,n=0){return is(this,t,e,n),this}asArray(t=1024){return ir(this,void 0,void 0,(function*(){const e=t/this.context.sampleRate,n=new Dr(1,e,this.context.sampleRate),i=this.toSeconds(this.attack)+this.toSeconds(this.decay),r=i+this.toSeconds(this.release),s=.1*r,o=r+s,a=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/o,decay:e*this.toSeconds(this.decay)/o,release:e*this.toSeconds(this.release)/o,context:n}));return a._sig.toDestination(),a.triggerAttackRelease(e*(i+s)/o,0),(yield n.render()).getChannelData(0)}))}dispose(){return super.dispose(),this._sig.dispose(),this}}nr([Ls(0)],js.prototype,"attack",void 0),nr([Ls(0)],js.prototype,"decay",void 0),nr([Ns(0,1)],js.prototype,"sustain",void 0),nr([Ls(0)],js.prototype,"release",void 0);const Fs=(()=>{const t=128;let e,n;const i=[];for(e=0;e<t;e++)i[e]=Math.sin(e/127*(Math.PI/2));const r=[];for(e=0;e<127;e++){n=e/127;const t=Math.sin(n*(2*Math.PI)*6.4-Math.PI/2)+1;r[e]=t/10+.83*n}r[127]=1;const s=[];for(e=0;e<t;e++)s[e]=Math.ceil(e/127*5)/5;const o=[];for(e=0;e<t;e++)n=e/127,o[e]=.5*(1-Math.cos(Math.PI*n));const a=[];for(e=0;e<t;e++){n=e/127;const t=4*Math.pow(n,3)+.2,i=Math.cos(t*Math.PI*2*n);a[e]=Math.abs(i*(1-n))}function c(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=1-t[n];return e}return{bounce:{In:c(a),Out:a},cosine:{In:i,Out:(u=i,u.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:r,Out:c(r)},sine:{In:o,Out:c(o)},step:{In:s,Out:c(s)}};var u})();class qs extends $r{constructor(){super(pr(qs.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const t=pr(qs.getDefaults(),arguments);this._volume=this.output=new ds({context:this.context,volume:t.volume}),this.volume=this._volume.volume,kr(this,"volume")}static getDefaults(){return Object.assign($r.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const n=this["_original_"+t]=this[t];this[t]=(...t)=>{const i=t[e],r=this.context.transport.schedule((i=>{t[e]=i,n.apply(this,t)}),i);this._scheduledEvents.push(r)}}unsync(){return this._scheduledEvents.forEach((t=>this.context.transport.clear(t))),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(t,e,n,i){const r=this.toSeconds(n),s=this.toSeconds(e);return this.triggerAttack(t,r,i),this.triggerRelease(r+s),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Us extends qs{constructor(){super(pr(Us.getDefaults(),arguments));const t=pr(Us.getDefaults(),arguments);this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(qs.getDefaults(),{detune:0,onsilence:Ir,portamento:0})}triggerAttack(t,e,n=1){this.log("triggerAttack",t,e,n);const i=this.toSeconds(e);return this._triggerEnvelopeAttack(i,n),this.setNote(t,i),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const n=this.toSeconds(e),i=t instanceof Wr?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const t=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(i,t,n)}else this.frequency.setValueAtTime(i,n);return this}}nr([Ls(0)],Us.prototype,"portamento",void 0);class Bs extends js{constructor(){super(pr(Bs.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Jr({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Ws extends Us{constructor(){super(pr(Ws.getDefaults(),arguments)),this.name="Synth";const t=pr(Ws.getDefaults(),arguments);this.oscillator=new Ps(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Bs(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),kr(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Us.getDefaults(),{envelope:Object.assign(fr(js.getDefaults(),Object.keys($r.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(fr(Ps.getDefaults(),[...Object.keys(ys.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){const e=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+e+n)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class zs extends Ws{constructor(){super(pr(zs.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const t=pr(zs.getDefaults(),arguments);this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,kr(this,["oscillator","envelope"])}static getDefaults(){return hr(Us.getDefaults(),Ws.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const n=this.toSeconds(e),i=this.toFrequency(t instanceof Wr?t.toFrequency():t),r=i*this.octaves;return this.oscillator.frequency.setValueAtTime(r,n),this.oscillator.frequency.exponentialRampToValueAtTime(i,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}nr([Ns(0)],zs.prototype,"octaves",void 0),nr([Ls(0)],zs.prototype,"pitchDecay",void 0);const Gs=new Set;function Hs(t){Gs.add(t)}function Xs(t,e){const n=`registerProcessor("${t}", ${e})`;Gs.add(n)}Hs('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n'),Hs("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n"),Hs("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n"),Xs("feedback-comb-filter",'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class Ys extends qs{constructor(){super(pr(Ys.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const t=pr(Ys.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),e={};Object.keys(t.urls).forEach((n=>{const i=parseInt(n,10);if(Bi(Ji(n)||Zi(i)&&isFinite(i),`url key is neither a note or midi pitch: ${n}`),Ji(n)){const i=new Wr(this.context,n).toMidi();e[i]=t.urls[n]}else Zi(i)&&isFinite(i)&&(e[i]=t.urls[i])})),this._buffers=new cs({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(qs.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Ir,onerror:Ir,release:.1,urls:{}})}_findClosest(t){let e=0;for(;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,n=1){return this.log("triggerAttack",t,e,n),Array.isArray(t)||(t=[t]),t.forEach((t=>{const i=qr(new Wr(this.context,t).toFrequency()),r=Math.round(i),s=i-r,o=this._findClosest(r),a=r-o,c=this._buffers.get(a),u=Vr(o+s),l=new ws({url:c,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:u}).connect(this.output);l.start(e,0,c.duration/u,n),Qi(this._activeSources.get(r))||this._activeSources.set(r,[]),this._activeSources.get(r).push(l),l.onended=()=>{if(this._activeSources&&this._activeSources.has(r)){const t=this._activeSources.get(r),e=t.indexOf(l);-1!==e&&t.splice(e,1)}}})),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach((t=>{const n=new Wr(this.context,t).toMidi();if(this._activeSources.has(n)&&this._activeSources.get(n).length){const t=this._activeSources.get(n);e=this.toSeconds(e),t.forEach((t=>{t.stop(e)})),this._activeSources.set(n,[])}})),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach((t=>{for(;t.length;)t.shift().stop(e)})),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,n,i=1){const r=this.toSeconds(n);return this.triggerAttack(t,r,i),Qi(e)?(Bi(Qi(t),"notes must be an array when duration is array"),t.forEach(((t,n)=>{const i=e[Math.min(n,e.length-1)];this.triggerRelease(t,r+this.toSeconds(i))}))):this.triggerRelease(t,r+this.toSeconds(e)),this}add(t,e,n){if(Bi(Ji(t)||isFinite(t),`note must be a pitch or midi: ${t}`),Ji(t)){const i=new Wr(this.context,t).toMidi();this._buffers.add(i,e,n)}else this._buffers.add(t,e,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach((t=>{t.forEach((t=>t.dispose()))})),this._activeSources.clear(),this}}nr([Ls(0)],Ys.prototype,"attack",void 0),nr([Ls(0)],Ys.prototype,"release",void 0);class Zs extends $r{constructor(){super(Object.assign(pr(Zs.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const t=pr(Zs.getDefaults(),arguments,["pan"]);this.pan=new Zr({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",kr(this,"pan")}static getDefaults(){return Object.assign($r.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}Xs("bit-crusher","\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");class $s extends $r{constructor(){super(pr($s.getDefaults(),arguments,["solo"])),this.name="Solo";const t=pr($s.getDefaults(),arguments,["solo"]);this.input=this.output=new Jr({context:this.context}),$s._allSolos.has(this.context)||$s._allSolos.set(this.context,new Set),$s._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign($r.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),$s._allSolos.get(this.context).forEach((t=>t._updateSolo()))}get muted(){return 0===this.input.gain.value}_addSolo(){$s._soloed.has(this.context)||$s._soloed.set(this.context,new Set),$s._soloed.get(this.context).add(this)}_removeSolo(){$s._soloed.has(this.context)&&$s._soloed.get(this.context).delete(this)}_isSoloed(){return $s._soloed.has(this.context)&&$s._soloed.get(this.context).has(this)}_noSolos(){return!$s._soloed.has(this.context)||$s._soloed.has(this.context)&&0===$s._soloed.get(this.context).size}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),$s._allSolos.get(this.context).delete(this),this._removeSolo(),this}}$s._allSolos=new Map,$s._soloed=new Map;class Qs extends $r{constructor(){super(pr(Qs.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const t=pr(Qs.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Zs({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new ds({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,kr(this,["pan","volume"])}static getDefaults(){return Object.assign($r.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Ks extends $r{constructor(){super(pr(Ks.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const t=pr(Ks.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new $s({solo:t.solo,context:this.context}),this._panVol=this.output=new Qs({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),kr(this,["pan","volume"])}static getDefaults(){return Object.assign($r.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return Ks.buses.has(t)||Ks.buses.set(t,new Jr({context:this.context})),Ks.buses.get(t)}send(t,e=0){const n=this._getBus(t),i=new Jr({context:this.context,units:"decibels",gain:e});return this.connect(i),i.connect(n),i}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Ks.buses=new Map;class Js extends $r{constructor(){super(...arguments),this.name="Listener",this.positionX=new Zr({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Zr({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Zr({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Zr({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Zr({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Zr({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Zr({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Zr({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Zr({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign($r.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}function to(){return Lr().now()}var eo;Sr((t=>{t.listener=new Js({context:t})})),Tr((t=>{t.listener.dispose()})),Lr().transport,Lr().destination,Lr().destination,Lr().listener,Lr().draw,Lr(),function(t){t.C="C",t.D="D",t.E="E",t.F="F",t.G="G",t.A="A",t.B="B"}(eo||(eo={}));var no,io,ro=function(){function t(t){this.gameState=t,this.hasToneStarted=!1,t.onEvent(co.START,this.InitializeTone.bind(this)),t.onEvent(co.EAT,this.eatSound.bind(this)),t.onEvent(co.OVER,this.overSound.bind(this)),window.__DEV__||(this.synth=(new Ws).toDestination())}return t.prototype.Update=function(t){},t.prototype.Awake=function(){},t.prototype.getNote=function(){switch(this.gameState.Score%7){case 1:return eo.D;case 2:return eo.E;case 3:return eo.F;case 4:return eo.G;case 5:return eo.A;case 6:return eo.B;default:return eo.C}},t.prototype.overSound=function(){var t,e,n=to();null===(t=this.synth)||void 0===t||t.triggerAttack(this.getNote()+"3",n),null===(e=this.synth)||void 0===e||e.triggerRelease(n+.5)},t.prototype.eatSound=function(){var t,e,n=to();null===(t=this.synth)||void 0===t||t.triggerAttack(eo.C+"4",n),null===(e=this.synth)||void 0===e||e.triggerRelease(n+.05)},t.prototype.InitializeTone=function(){return t=this,e=void 0,i=function(){return function(t,e){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(t){switch(t.label){case 0:return this.hasToneStarted?[3,2]:[4,Nr.resume()];case 1:t.sent(),this.hasToneStarted=!0,t.label=2;case 2:return[2]}}))},new((n=void 0)||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}));var t,e,n,i},t}();!function(t){t[t.UP=0]="UP",t[t.RIGHT=1]="RIGHT",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT"}(no||(no={})),function(t){t[t.UP=270*Math.PI/180]="UP",t[t.RIGHT=0]="RIGHT",t[t.DOWN=90*Math.PI/180]="DOWN",t[t.LEFT=180*Math.PI/180]="LEFT"}(io||(io={})),new u(247,76,0,1);var so=function(t){function e(e){var n=t.call(this)||this;return n.gameState=e,n.deltaTimeSinceLastUpdate=0,n.directionSinceLastUpdate=null,n._direction=no.RIGHT,n.tail=[],n.listenToEvents(),n}return r(e,t),e.prototype.changeDirection=function(t){this.tail.length>0&&(t==no.DOWN&&this.directionSinceLastUpdate==no.UP||t==no.RIGHT&&this.directionSinceLastUpdate==no.LEFT||t==no.LEFT&&this.directionSinceLastUpdate==no.RIGHT||t==no.UP&&this.directionSinceLastUpdate==no.DOWN)||(this._direction=t)},Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},enumerable:!1,configurable:!0}),e.prototype.Awake=function(){t.prototype.Awake.call(this);var e=p.NodeArgsFromIndex(p.Origin),n=e.Start,i=e.End,r=e.Index;this._direction=no.RIGHT,this.head=new O(C.HEAD,n,i,r),this.head.Awake();var s=new ro(this.gameState);s.Awake(),this.AddComponent(s)},e.prototype.UpdateHead=function(){switch(this.direction){case no.LEFT:this.head.RotateAngle=io.LEFT;break;case no.UP:this.head.RotateAngle=io.UP;break;case no.RIGHT:this.head.RotateAngle=io.RIGHT;break;case no.DOWN:this.head.RotateAngle=io.DOWN}},e.prototype.Update=function(e){if(t.prototype.Update.call(this,e),this.UpdateHead(),(this.deltaTimeSinceLastUpdate>=h.snake.speed||this.deltaTimeSinceLastUpdate<0)&&!this.gameState.isPaused){this.deltaTimeSinceLastUpdate=0,this.directionSinceLastUpdate=this.direction;var n=this.head.Index,i=void 0;switch(this.direction){case no.LEFT:i=n.Add(new p(-1,0));break;case no.UP:i=n.Add(new p(0,-1));break;case no.DOWN:i=n.Add(new p(0,1));break;case no.RIGHT:i=n.Add(new p(1,0))}i.x<0&&(i.x=h.grid.dimension-1),i.x>=h.grid.dimension&&(i.x=0),i.y<0&&(i.y=h.grid.dimension-1),i.y>=h.grid.dimension&&(i.y=0),this.head.Move(i);for(var r=0,s=this.tail;r<s.length;r++){var o=s[r];if(this.head.Index.equals(o.Index))return void this.gameState.Over();var a=o.Index;o.Move(n),n=a}}else this.deltaTimeSinceLastUpdate+=e;this.tail.forEach((function(t){return t.Update(e)})),this.head.Update(e)},e.prototype.isIndexAtSnake=function(t){return this.isIndexAtHead(t)||!!this.tail.length&&!!this.tail.find((function(e){return e.Index.equals(t)}))},e.prototype.isIndexAtHead=function(t){var e;return null===(e=this.head)||void 0===e?void 0:e.Index.equals(t)},e.prototype.Eat=function(){var t=p.NodeArgsFromIndex(this.head.Index.Clone()),e=t.Start,n=t.End,i=t.Index,r=new O(C.TAIL,e,n,i,this.tail.length+1);r.Awake(),this.tail.push(r)},e.prototype.listenToEvents=function(){this.gameState.onEvent(co.RESTART,this.onRestart.bind(this)),this.gameState.onEvent(co.EAT,this.Eat.bind(this))},e.prototype.onRestart=function(){this.ResetState(),this.Awake()},e.prototype.ResetState=function(){this.head.Clear(),this.tail.forEach((function(t){return t.Clear()})),this.tail=[]},e.prototype.SaveState=function(){return{direction:this.direction,head:this.head.Save(),tail:this.tail.map((function(t){return t.Save()}))}},e.prototype.LoadState=function(t){this._direction=t.direction,this.ResetState(),this.head=O.Load(t.head),this.head.Awake(),this.tail=t.tail.map((function(t){return O.Load(t)})),this.tail.forEach((function(t){return t.Awake()}))},e}(c),oo=n(890),ao=new Image;ao.src=oo;var co,uo,lo=.025,ho=function(){function t(){this._isIncreasing=!1}return t.prototype.Awake=function(){this._start=this.Entity.Start,this._size=this.Entity.Size,this._index=this.Entity.Index,this.Clear()},t.prototype.Update=function(t){this.Clear();var e=this.Entity.AdjustSize();this._index.equals(this.Entity.Index)&&!e||(this._start=this.Entity.Start,this._index=this.Entity.Index,this._size=this.Entity.Size),this._size.x<this.Entity.Size.x/1.25?this._isIncreasing=!0:this._size.x>this.Entity.Size.x&&(this._isIncreasing=!1),this._isIncreasing?(this._start=this._start.Sub(new p(lo,lo)),this._size=this._size.Add(new p(.05,.05))):(this._start=this._start.Add(new p(lo,lo)),this._size=this._size.Sub(new p(.05,.05))),this.Draw(this._start,this._size)},t.prototype.Draw=function(t,e){this.Entity.Canvas.RenderImage(t,e,ao)},t.prototype.Clear=function(){this.Entity.Canvas.ClearRect(this._start,this.Entity.Size)},t}(),po=function(t){function e(e,n,i,r){void 0===r&&(r=m.Foreground);var s=t.call(this)||this;return s.Start=e,s.End=n,s.Index=i,s.Canvas=r,s}return r(e,t),e.prototype.Awake=function(){this.AddComponent(new ho),t.prototype.Awake.call(this)},e.prototype.AdjustSize=function(){var t=this.Size.x!=h.grid.nodeSize;if(t){this.GetComponent(ho).Clear();var e=p.NodeArgsFromIndex(this.Index),n=e.Start,i=e.End,r=e.Index;this.Start=n,this.End=i,this.Index=r}return t},e.prototype.Update=function(e){t.prototype.Update.call(this,e)},Object.defineProperty(e,"RandomDim",{get:function(){return Math.floor(Math.random()*h.grid.dimension)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"RandomIndex",{get:function(){return new p(this.RandomDim,this.RandomDim)},enumerable:!1,configurable:!0}),e.prototype.UpdatePosition=function(t,e,n){this.Start=t,this.End=e,this.Index=n},Object.defineProperty(e.prototype,"Size",{get:function(){return new p(this.End.x-this.Start.x,this.End.y-this.Start.y)},enumerable:!1,configurable:!0}),e.prototype.SaveState=function(){return{index:this.Index.Clone()}},e.prototype.LoadState=function(t){var e=p.NodeArgsFromIndex(t.index),n=e.Start,i=e.End,r=e.Index;this.Index=r,this.Start=n,this.End=i},e}(c),fo=n(187),mo=n(885),go=n.n(mo)().configure({time:!0,locate:!1}),_o=function(t){function e(){var e=t.call(this)||this;return e._gameHistories=[],e._isPaused=!0,e._hasStarted=!1,e._matchTime=0,e._score=0,e._highestScore=0,e._lastDeltaTime=0,e._fps=0,e.onEvent(co.PAUSE,e.onPause.bind(e)),e.onEvent(co.START,e.onStart.bind(e)),e.onEvent(co.RESTART,e.Awake.bind(e)),e.onEvent(co.OVER,e.Awake.bind(e)),e.onEvent(co.SAVE,e.onSave.bind(e)),e.onEvent(co.LOAD,e.onLoad.bind(e)),e}return r(e,t),e.prototype.Update=function(t){this.isPaused||t>0&&(this._matchTime+=t);var e=t-this._lastDeltaTime;e>0&&(this._fps=1e3/e),this._lastDeltaTime=t},e.prototype.Awake=function(){this._isPaused=!0,this._score=0,this._matchTime=0},e.prototype.debugInfo=function(){return{score:this._score,isPaused:this._isPaused}},e.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];h.isDev&&go(t.length>0?t:this.debugInfo())},e.prototype.debugEvent=function(t){h.isDev&&go(t,this.debugInfo())},Object.defineProperty(e.prototype,"isPaused",{get:function(){return this._isPaused},enumerable:!1,configurable:!0}),e.prototype.Pause=function(){this.debugEvent(co.PAUSE),this.emit(co.PAUSE)},e.prototype.Start=function(){this.debugEvent(co.START),this.emit(co.START)},e.prototype.Eat=function(t){this._score+=1,this._score>this._highestScore&&(this._highestScore=this._score),this.debugEvent(co.EAT),this.emit(co.EAT,t)},e.prototype.Restart=function(){this._score=0,this.debugEvent(co.RESTART),this.emit(co.RESTART)},e.prototype.Over=function(){this._score=0,this._gameHistories.unshift([this.Entity.Save()]),this.debugEvent(co.OVER),this.emit(co.PAUSE),this.emit(co.OVER)},e.prototype.Save=function(){this.debugEvent(co.SAVE),this.emit(co.SAVE)},e.prototype.SaveOnHistory=function(){this._gameHistories[0]?this._gameHistories[0].push(this.Entity.Save()):this._gameHistories[0]=[this.Entity.Save()]},e.prototype.Load=function(){this.debugEvent(co.LOAD),this.emit(co.LOAD)},e.prototype.onSave=function(){this._savedState=this.Entity.Save()},e.prototype.onLoad=function(){this.Entity.LoadState()},e.prototype.onPause=function(){this._isPaused=!0,this.debug()},e.prototype.onStart=function(){this._isPaused=!1,this._hasStarted=!0,this.debug()},e.prototype.onEvent=function(t,e){this.on(t,e)},Object.defineProperty(e.prototype,"Score",{get:function(){return this._score},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MatchTime",{get:function(){return this._matchTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"FPS",{get:function(){return this._fps},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HighestScore",{get:function(){return this._highestScore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"GameSave",{get:function(){return this._savedState},enumerable:!1,configurable:!0}),e.prototype.SaveData=function(){return{score:this.Score,matchTime:this.MatchTime,isPaused:this.isPaused}},e.prototype.LoadData=function(t){this._score=t.score,this._matchTime=t.matchTime,this._isPaused=t.isPaused},e}(fo.EventEmitter);!function(t){t.START="start",t.PAUSE="pause",t.RESTART="restart",t.EAT="eat",t.OVER="over",t.SAVE="save",t.LOAD="load"}(co||(co={})),function(t){t.ARROW_LEFT="ArrowLeft",t.ARROW_UP="ArrowUp",t.ARROW_RIGHT="ArrowRight",t.ARROW_DOWN="ArrowDown",t.W="KeyW",t.A="KeyA",t.S="KeyS",t.D="KeyD",t.ENTER="Enter"}(uo||(uo={}));var vo=new(function(t){function e(){var e=t.call(this)||this;return e._lastTimestamp=0,e._entities=[],e._nextKey=null,e.Update(),e.attachKeyboard(),e}return r(e,t),Object.defineProperty(e.prototype,"Entities",{get:function(){return this._entities},enumerable:!1,configurable:!0}),e.prototype.Awake=function(){var e=this,n=new _o;this.AddComponent(n),n.on(co.OVER,(function(){e._snake.onRestart()})),t.prototype.Awake.call(this),this._entities.push(new v),this._snake=new so(n),this._entities.push(this._snake),this._entities.push(new x(n));for(var i=0,r=this.Entities;i<r.length;i++)r[i].Awake();this._food=this.createFood(),this._entities.push(this._food),this._food.Awake(),window.requestAnimationFrame((function(){e._lastTimestamp=Date.now(),e.Update()}))},e.prototype.Update=function(e){var n=this;void 0===e&&(e=0),m.ensureSize();var i=e-this._lastTimestamp;this.checkFoodCollision(),this.checkKey(),t.prototype.Update.call(this,i);for(var r=0,s=this.Entities;r<s.length;r++)s[r].Update(i);this._lastTimestamp=e,window.requestAnimationFrame((function(t){n.Update(t)}))},Object.defineProperty(e.prototype,"state",{get:function(){return this.GetComponent(_o)},enumerable:!1,configurable:!0}),e.prototype.handleKeydown=function(t){if(null==this._nextKey||this._nextKey!=t.code){var e=t.code;this._nextKey=this.state.isPaused?e===uo.ENTER?e:null:e}},e.prototype.attachKeyboard=function(){document.addEventListener("keydown",this.handleKeydown.bind(this))},e.prototype.checkKey=function(){if(null!=this._nextKey){switch(this._nextKey){case uo.ENTER:this.state.isPaused?this.state.Start():this.state.Pause();break;case uo.ARROW_UP:case uo.W:this._snake.changeDirection(no.UP);break;case uo.ARROW_RIGHT:case uo.D:this._snake.changeDirection(no.RIGHT);break;case uo.ARROW_LEFT:case uo.A:this._snake.changeDirection(no.LEFT);break;case uo.ARROW_DOWN:case uo.S:this._snake.changeDirection(no.DOWN)}this._nextKey=null}},e.prototype.createFood=function(){for(var t;(t=po.RandomIndex)&&this._snake.isIndexAtSnake(t););var e=p.NodeArgsFromIndex(t),n=e.Start,i=e.End,r=e.Index;return new po(n,i,r,m.Foreground)},e.prototype.updateFoodIndex=function(){for(var t;(t=po.RandomIndex)&&(this._snake.isIndexAtSnake(t)||this._food.Index.equals(t)););var e=p.NodeArgsFromIndex(t),n=e.Start,i=e.End,r=e.Index;this._food.UpdatePosition(n,i,r)},e.prototype.checkFoodCollision=function(){this._food&&this._snake.isIndexAtHead(this._food.Index)&&(this.state.Eat(this._food),this.updateFoodIndex())},e.prototype.Save=function(){return{snakeState:this._snake.SaveState(),gameData:this.GetComponent(_o).SaveData(),foodState:this._food.SaveState()}},e.prototype.LoadState=function(){var t=this.GetComponent(_o).GameSave;t&&(this._snake.LoadState(t.snakeState),this.GetComponent(_o).LoadData(t.gameData),this._food.LoadState(t.foodState))},e}(c));vo.Awake(),window.game=vo},890:(t,e,n)=>{"use strict";t.exports=n.p+"dfcb8e9ec83d3402af07.png"},788:(t,e,n)=>{"use strict";t.exports=n.p+"5cf7b39de9c6426530b4.png"},948:(t,e,n)=>{"use strict";t.exports=n.p+"c39bf5074a9b01c8f36e.png"}},i={};function r(t){var e=i[t];if(void 0!==e){if(void 0!==e.error)throw e.error;return e.exports}var s=i[t]={id:t,loaded:!1,exports:{}};try{var o={id:t,module:s,factory:n[t],require:r};r.i.forEach((function(t){t(o)})),s=o.module,o.factory.call(s.exports,s,s.exports,o.require)}catch(t){throw s.error=t,t}return s.loaded=!0,s.exports}r.m=n,r.c=i,r.i=[],r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.hu=t=>t+"."+r.h()+".hot-update.js",r.hmrF=()=>"app."+r.h()+".hot-update.json",r.h=()=>"e5682d3e8727754fc93d",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="crab-snake:",r.l=(n,i,s,o)=>{if(t[n])t[n].push(i);else{var a,c;if(void 0!==s)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var h=u[l];if(h.getAttribute("src")==n||h.getAttribute("data-webpack")==e+s){a=h;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.setAttribute("data-webpack",e+s),a.src=n),t[n]=[i];var p=(e,i)=>{a.onerror=a.onload=null,clearTimeout(d);var r=t[n];if(delete t[n],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((t=>t(i))),e)return e(i)},d=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),c&&document.head.appendChild(a)}},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t,e,n,i,s={},o=r.c,a=[],c=[],u="idle";function l(t){u=t;for(var e=0;e<c.length;e++)c[e].call(null,t)}function h(t){if(0===e.length)return t();var n=e;return e=[],Promise.all(n).then((function(){return h(t)}))}function p(t){if("idle"!==u)throw new Error("check() is only allowed in idle status");return l("check"),r.hmrM().then((function(i){if(!i)return l(m()?"ready":"idle"),null;l("prepare");var s=[];return e=[],n=[],Promise.all(Object.keys(r.hmrC).reduce((function(t,e){return r.hmrC[e](i.c,i.r,i.m,t,n,s),t}),[])).then((function(){return h((function(){return t?f(t):(l("ready"),s)}))}))}))}function d(t){return"ready"!==u?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status")})):f(t)}function f(t){t=t||{},m();var e=n.map((function(e){return e(t)}));n=void 0;var r,s=e.map((function(t){return t.error})).filter(Boolean);if(s.length>0)return l("abort"),Promise.resolve().then((function(){throw s[0]}));l("dispose"),e.forEach((function(t){t.dispose&&t.dispose()})),l("apply");var o=function(t){r||(r=t)},a=[];return e.forEach((function(t){if(t.apply){var e=t.apply(o);if(e)for(var n=0;n<e.length;n++)a.push(e[n])}})),r?(l("fail"),Promise.resolve().then((function(){throw r}))):i?f(t).then((function(t){return a.forEach((function(e){t.indexOf(e)<0&&t.push(e)})),t})):(l("idle"),Promise.resolve(a))}function m(){if(i)return n||(n=[]),Object.keys(r.hmrI).forEach((function(t){i.forEach((function(e){r.hmrI[t](e,n)}))})),i=void 0,!0}r.hmrD=s,r.i.push((function(f){var m,g,_,v,y=f.module,w=function(n,i){var r=o[i];if(!r)return n;var s=function(e){if(r.hot.active){if(o[e]){var s=o[e].parents;-1===s.indexOf(i)&&s.push(i)}else a=[i],t=e;-1===r.children.indexOf(e)&&r.children.push(e)}else console.warn("[HMR] unexpected require("+e+") from disposed module "+i),a=[];return n(e)},c=function(t){return{configurable:!0,enumerable:!0,get:function(){return n[t]},set:function(e){n[t]=e}}};for(var p in n)Object.prototype.hasOwnProperty.call(n,p)&&"e"!==p&&Object.defineProperty(s,p,c(p));return s.e=function(t){return function(t){switch(u){case"ready":return l("prepare"),e.push(t),h((function(){l("ready")})),t;case"prepare":return e.push(t),t;default:return t}}(n.e(t))},s}(f.require,f.id);y.hot=(m=f.id,g=y,v={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:_=t!==m,_requireSelf:function(){a=g.parents.slice(),t=_?void 0:m,r(m)},active:!0,accept:function(t,e,n){if(void 0===t)v._selfAccepted=!0;else if("function"==typeof t)v._selfAccepted=t;else if("object"==typeof t&&null!==t)for(var i=0;i<t.length;i++)v._acceptedDependencies[t[i]]=e||function(){},v._acceptedErrorHandlers[t[i]]=n;else v._acceptedDependencies[t]=e||function(){},v._acceptedErrorHandlers[t]=n},decline:function(t){if(void 0===t)v._selfDeclined=!0;else if("object"==typeof t&&null!==t)for(var e=0;e<t.length;e++)v._declinedDependencies[t[e]]=!0;else v._declinedDependencies[t]=!0},dispose:function(t){v._disposeHandlers.push(t)},addDisposeHandler:function(t){v._disposeHandlers.push(t)},removeDisposeHandler:function(t){var e=v._disposeHandlers.indexOf(t);e>=0&&v._disposeHandlers.splice(e,1)},invalidate:function(){switch(this._selfInvalidated=!0,u){case"idle":n=[],Object.keys(r.hmrI).forEach((function(t){r.hmrI[t](m,n)})),l("ready");break;case"ready":Object.keys(r.hmrI).forEach((function(t){r.hmrI[t](m,n)}));break;case"prepare":case"check":case"dispose":case"apply":(i=i||[]).push(m)}},check:p,apply:d,status:function(t){if(!t)return u;c.push(t)},addStatusHandler:function(t){c.push(t)},removeStatusHandler:function(t){var e=c.indexOf(t);e>=0&&c.splice(e,1)},data:s[m]},t=void 0,v),y.parents=a,y.children=[],a=[],f.require=w})),r.hmrC={},r.hmrI={}})(),r.p="./",(()=>{var t,e,n,i,s={143:0},o={};function a(t){return new Promise(((e,n)=>{o[t]=e;var i=r.p+r.hu(t),s=new Error;r.l(i,(e=>{if(o[t]){o[t]=void 0;var i=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;s.message="Loading hot update chunk "+t+" failed.\n("+i+": "+r+")",s.name="ChunkLoadError",s.type=i,s.request=r,n(s)}}))}))}function c(o){function a(t){for(var e=[t],n={},i=e.map((function(t){return{chain:[t],id:t}}));i.length>0;){var s=i.pop(),o=s.id,a=s.chain,u=r.c[o];if(u&&(!u.hot._selfAccepted||u.hot._selfInvalidated)){if(u.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:o};if(u.hot._main)return{type:"unaccepted",chain:a,moduleId:o};for(var l=0;l<u.parents.length;l++){var h=u.parents[l],p=r.c[h];if(p){if(p.hot._declinedDependencies[o])return{type:"declined",chain:a.concat([h]),moduleId:o,parentId:h};-1===e.indexOf(h)&&(p.hot._acceptedDependencies[o]?(n[h]||(n[h]=[]),c(n[h],[o])):(delete n[h],e.push(h),i.push({chain:a.concat([h]),id:h})))}}}}return{type:"accepted",moduleId:t,outdatedModules:e,outdatedDependencies:n}}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];-1===t.indexOf(i)&&t.push(i)}}r.f&&delete r.f.jsonpHmr,t=void 0;var u={},l=[],h={},p=function(t){console.warn("[HMR] unexpected require("+t.id+") to disposed module")};for(var d in e)if(r.o(e,d)){var f,m=e[d],g=!1,_=!1,v=!1,y="";switch((f=m?a(d):{type:"disposed",moduleId:d}).chain&&(y="\nUpdate propagation: "+f.chain.join(" -> ")),f.type){case"self-declined":o.onDeclined&&o.onDeclined(f),o.ignoreDeclined||(g=new Error("Aborted because of self decline: "+f.moduleId+y));break;case"declined":o.onDeclined&&o.onDeclined(f),o.ignoreDeclined||(g=new Error("Aborted because of declined dependency: "+f.moduleId+" in "+f.parentId+y));break;case"unaccepted":o.onUnaccepted&&o.onUnaccepted(f),o.ignoreUnaccepted||(g=new Error("Aborted because "+d+" is not accepted"+y));break;case"accepted":o.onAccepted&&o.onAccepted(f),_=!0;break;case"disposed":o.onDisposed&&o.onDisposed(f),v=!0;break;default:throw new Error("Unexception type "+f.type)}if(g)return{error:g};if(_)for(d in h[d]=m,c(l,f.outdatedModules),f.outdatedDependencies)r.o(f.outdatedDependencies,d)&&(u[d]||(u[d]=[]),c(u[d],f.outdatedDependencies[d]));v&&(c(l,[f.moduleId]),h[d]=p)}e=void 0;for(var w,b=[],x=0;x<l.length;x++){var S=l[x],A=r.c[S];A&&(A.hot._selfAccepted||A.hot._main)&&h[S]!==p&&!A.hot._selfInvalidated&&b.push({module:S,require:A.hot._requireSelf,errorHandler:A.hot._selfAccepted})}return{dispose:function(){var t;n.forEach((function(t){delete s[t]})),n=void 0;for(var e,i=l.slice();i.length>0;){var o=i.pop(),a=r.c[o];if(a){var c={},h=a.hot._disposeHandlers;for(x=0;x<h.length;x++)h[x].call(null,c);for(r.hmrD[o]=c,a.hot.active=!1,delete r.c[o],delete u[o],x=0;x<a.children.length;x++){var p=r.c[a.children[x]];p&&(t=p.parents.indexOf(o))>=0&&p.parents.splice(t,1)}}}for(var d in u)if(r.o(u,d)&&(a=r.c[d]))for(w=u[d],x=0;x<w.length;x++)e=w[x],(t=a.children.indexOf(e))>=0&&a.children.splice(t,1)},apply:function(t){for(var e in h)r.o(h,e)&&(r.m[e]=h[e]);for(var n=0;n<i.length;n++)i[n](r);for(var s in u)if(r.o(u,s)){var a=r.c[s];if(a){w=u[s];for(var c=[],p=[],d=[],f=0;f<w.length;f++){var m=w[f],g=a.hot._acceptedDependencies[m],_=a.hot._acceptedErrorHandlers[m];if(g){if(-1!==c.indexOf(g))continue;c.push(g),p.push(_),d.push(m)}}for(var v=0;v<c.length;v++)try{c[v].call(null,w)}catch(e){if("function"==typeof p[v])try{p[v](e,{moduleId:s,dependencyId:d[v]})}catch(n){o.onErrored&&o.onErrored({type:"accept-error-handler-errored",moduleId:s,dependencyId:d[v],error:n,originalError:e}),o.ignoreErrored||(t(n),t(e))}else o.onErrored&&o.onErrored({type:"accept-errored",moduleId:s,dependencyId:d[v],error:e}),o.ignoreErrored||t(e)}}}for(var y=0;y<b.length;y++){var x=b[y],S=x.module;try{x.require(S)}catch(e){if("function"==typeof x.errorHandler)try{x.errorHandler(e,{moduleId:S,module:r.c[S]})}catch(n){o.onErrored&&o.onErrored({type:"self-accept-error-handler-errored",moduleId:S,error:n,originalError:e}),o.ignoreErrored||(t(n),t(e))}else o.onErrored&&o.onErrored({type:"self-accept-errored",moduleId:S,error:e}),o.ignoreErrored||t(e)}}return l}}}self.webpackHotUpdatecrab_snake=(t,n,s)=>{for(var a in n)r.o(n,a)&&(e[a]=n[a]);s&&i.push(s),o[t]&&(o[t](),o[t]=void 0)},r.hmrI.jsonp=function(t,s){e||(e={},i=[],n=[],s.push(c)),r.o(e,t)||(e[t]=r.m[t])},r.hmrC.jsonp=function(o,u,l,h,p,d){p.push(c),t={},n=u,e=l.reduce((function(t,e){return t[e]=!1,t}),{}),i=[],o.forEach((function(e){r.o(s,e)&&void 0!==s[e]&&(h.push(a(e)),t[e]=!0)})),r.f&&(r.f.jsonpHmr=function(e,n){t&&!r.o(t,e)&&r.o(s,e)&&void 0!==s[e]&&(n.push(a(e)),t[e]=!0)})},r.hmrM=()=>{if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(r.p+r.hmrF()).then((t=>{if(404!==t.status){if(!t.ok)throw new Error("Failed to fetch update manifest "+t.statusText);return t.json()}}))}})(),r(820)})();